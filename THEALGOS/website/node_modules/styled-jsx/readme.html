<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="styled-jsx">styled-jsx</h1>
<p><a href="https://travis-ci.org/zeit/styled-jsx"><img src="https://travis-ci.org/zeit/styled-jsx.svg?branch=master" alt="Build Status" /></a></p>
<p>Need help?<br> <a href="https://spectrum.chat/styled-jsx"><img src="https://withspectrum.github.io/badge/badge.svg" alt="Join the community on Spectrum" /></a></p>
<p>Full, scoped and component-friendly CSS support for JSX (rendered on the server or the client).</p>
<p>Code and docs are for v3 which we highly recommend you to try. Looking for styled-jsx v2? Switch to the <a href="https://github.com/zeit/styled-jsx/tree/v2">v2 branch</a>.</p>
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#configuration-options">Configuration options</a>
<ul>
<li><a href="#optimizeforspeed"><code>optimizeForSpeed</code></a></li>
<li><a href="#sourcemaps"><code>sourceMaps</code></a></li>
<li><a href="#stylemodule"><code>styleModule</code></a></li>
<li><a href="#vendorprefixes"><code>vendorPrefixes</code></a></li>
</ul></li>
<li><a href="#features">Features</a></li>
<li><a href="#how-it-works">How It Works</a>
<ul>
<li><a href="#why-it-works-like-this">Why It Works Like This</a></li>
</ul></li>
<li><a href="#targeting-the-root">Targeting The Root</a></li>
<li><a href="#global-styles">Global styles</a>
<ul>
<li><a href="#one-off-global-selectors">One-off global selectors</a></li>
</ul></li>
<li><a href="#dynamic-styles">Dynamic styles</a>
<ul>
<li><a href="#via-interpolated-dynamic-props">Via interpolated dynamic props</a></li>
<li><a href="#via-classname-toggling">Via <code>className</code> toggling</a></li>
<li><a href="#via-inline-style">Via inline <code>style</code></a></li>
</ul></li>
<li><a href="#constants">Constants</a></li>
<li><a href="#server-side-rendering">Server-Side Rendering</a>
<ul>
<li><a href="#styled-jsxserver"><code>styled-jsx/server</code></a></li>
</ul></li>
<li><a href="#external-css-and-styles-outside-of-the-component">External CSS and styles outside of the component</a>
<ul>
<li><a href="#external-styles">External styles</a></li>
<li><a href="#styles-outside-of-components">Styles outside of components</a></li>
<li><a href="#the-resolve-tag">The <code>resolve</code> tag</a></li>
<li><a href="#styles-in-regular-css-files">Styles in regular CSS files</a></li>
</ul></li>
<li><a href="#css-preprocessing-via-plugins">CSS Preprocessing via Plugins</a>
<ul>
<li><a href="#plugin-options">Plugin options</a></li>
<li><a href="#example-plugins">Example plugins</a></li>
</ul></li>
<li><a href="#rendering-in-tests">Rendering in tests</a></li>
<li><a href="#faq">FAQ</a>
<ul>
<li><a href="#warning-unknown-jsx-prop-on-style-tag">Warning: unknown <code>jsx</code> prop on &lt;style&gt; tag</a></li>
<li><a href="#can-i-return-an-array-of-components-when-using-react-16">Can I return an array of components when using React 16?</a></li>
<li><a href="#styling-third-parties--child-components-from-the-parent">Styling third parties / child components from the parent</a></li>
<li><a href="https://github.com/zeit/styled-jsx/issues/319#issuecomment-349239326">Some styles are missing in production</a></li>
<li><a href="#build-a-component-library-with-styled-jsx">Build a component library with styled-jsx</a></li>
</ul></li>
<li><a href="#syntax-highlighting">Syntax Highlighting</a></li>
</ul>
<h2 id="getting-started">Getting started</h2>
<p>Firstly, install the package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npm</span> install --save styled-jsx</a></code></pre></div>
<p>Next, add <code>styled-jsx/babel</code> to <code>plugins</code> in your babel configuration:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="st">&quot;styled-jsx/babel&quot;</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="fu">}</span></a></code></pre></div>
<p>Now add <code>&lt;style jsx&gt;</code> to your code and fill it with CSS:</p>
<pre class="jsx"><code>export default () =&gt; (
  &lt;div&gt;
    &lt;p&gt;only this paragraph will get the style :)&lt;/p&gt;

    { /* you can include &lt;Component /&gt;s here that include
         other &lt;p&gt;s that don&#39;t get unexpected styles! */ }

    &lt;style jsx&gt;{`
      p {
        color: red;
      }
    `}&lt;/style&gt;
  &lt;/div&gt;
)</code></pre>
<h2 id="configuration-options">Configuration options</h2>
<p>The following are optional settings for the babel plugin.</p>
<h4 id="optimizeforspeed"><code>optimizeForSpeed</code></h4>
<p>Blazing fast and optimized CSS rules injection system based on the CSSOM APIs.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="ot">[</span><span class="st">&quot;styled-jsx/babel&quot;</span><span class="ot">,</span> <span class="fu">{</span> <span class="dt">&quot;optimizeForSpeed&quot;</span><span class="fu">:</span> <span class="kw">true</span> <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="fu">}</span></a></code></pre></div>
<p>When in production* this mode is automatically enabled.<br> Beware that when using this option source maps cannot be generated and styles cannot be edited via the devtools.</p>
<p>* <code>process.env.NODE_ENV === 'production'</code></p>
<h4 id="sourcemaps"><code>sourceMaps</code></h4>
<p>Generates source maps (default: <code>false</code>)</p>
<h4 id="stylemodule"><code>styleModule</code></h4>
<p>Module that the transpiled files should import (default: <code>styled-jsx/style</code>)</p>
<h4 id="vendorprefixes"><code>vendorPrefixes</code></h4>
<p>Turn on/off automatic vendor prefixing (default: <code>true</code>)</p>
<h2 id="features">Features</h2>
<ul>
<li>Full CSS support, no tradeoffs in power</li>
<li>Runtime size of just <strong>3kb</strong> (gzipped, from 12kb)</li>
<li>Complete isolation: Selectors, animations, keyframes</li>
<li>Built-in CSS vendor prefixing</li>
<li>Very fast, minimal and efficient transpilation (see below)</li>
<li>High-performance runtime-CSS-injection when not server-rendering</li>
<li>Future-proof: Equivalent to server-renderable “Shadow CSS”</li>
<li>Source maps support</li>
<li>Dynamic styles and themes support</li>
<li>CSS Preprocessing via Plugins</li>
</ul>
<h2 id="how-it-works">How It Works</h2>
<p>The example above transpiles to the following:</p>
<pre class="jsx"><code>import _JSXStyle from &#39;styled-jsx/style&#39;

export default () =&gt; (
  &lt;div className=&quot;jsx-123&quot;&gt;
    &lt;p className=&quot;jsx-123&quot;&gt;only this paragraph will get the style :)&lt;/p&gt;
    &lt;_JSXStyle id=&quot;123&quot;&gt;{`p.jsx-123 {color: red;}`}&lt;/_JSXStyle&gt;
  &lt;/div&gt;
)</code></pre>
<h3 id="why-it-works-like-this">Why It Works Like This</h3>
<p>Unique classnames give us style encapsulation and <code>_JSXStyle</code> is heavily optimized for:</p>
<ul>
<li>Injecting styles upon render</li>
<li>Only injecting a certain component’s style once (even if the component is included multiple times)</li>
<li>Removing unused styles</li>
<li>Keeping track of styles for server-side rendering</li>
</ul>
<h3 id="targeting-the-root">Targeting The Root</h3>
<p>Notice that the outer <code>&lt;div&gt;</code> from the example above also gets a <code>jsx-123</code> classname. We do this so that you can target the “root” element, in the same manner that <a href="https://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-201/#toc-style-host"><code>:host</code></a> works with Shadow DOM.</p>
<p>If you want to target <em>only</em> the host, we suggest you use a class:</p>
<pre class="jsx"><code>export default () =&gt; (
  &lt;div className=&quot;root&quot;&gt;
    &lt;style jsx&gt;{`
      .root {
        color: green;
      }
    `}&lt;/style&gt;
  &lt;/div&gt;
)</code></pre>
<h3 id="global-styles">Global styles</h3>
<p>To skip scoping entirely, you can make the global-ness of your styles explicit by adding <em>global</em>.</p>
<pre class="jsx"><code>export default () =&gt; (
  &lt;div&gt;
    &lt;style jsx global&gt;{`
      body {
        background: red
      }
    `}&lt;/style&gt;
  &lt;/div&gt;
)</code></pre>
<p>The advantage of using this over <code>&lt;style&gt;</code> is twofold: no need to use <code>dangerouslySetInnerHTML</code> to avoid escaping issues with CSS and take advantage of <code>styled-jsx</code>’s de-duping system to avoid the global styles being inserted multiple times.</p>
<h3 id="one-off-global-selectors">One-off global selectors</h3>
<p>Sometimes it’s useful to skip selectors scoping. In order to get a one-off global selector we support <code>:global()</code>, inspired by <a href="https://github.com/css-modules/css-modules">css-modules</a>.</p>
<p>This is very useful in order to, for example, generate a <em>global class</em> that you can pass to 3rd-party components. For example, to style <code>react-select</code> which supports passing a custom class via <code>optionClassName</code>:</p>
<pre class="jsx"><code>import Select from &#39;react-select&#39;
export default () =&gt; (
  &lt;div&gt;
    &lt;Select optionClassName=&quot;react-select&quot; /&gt;

    &lt;style jsx&gt;{`
      /* &quot;div&quot; will be prefixed, but &quot;.react-select&quot; won&#39;t */

      div :global(.react-select) {
        color: red
      }
    `}&lt;/style&gt;
  &lt;/div&gt;
)</code></pre>
<h3 id="dynamic-styles">Dynamic styles</h3>
<p>To make a component’s visual representation customizable from the outside world there are three options.</p>
<h4 id="via-interpolated-dynamic-props">Via interpolated dynamic props</h4>
<p>Any value that comes from the component’s <code>render</code> method scope is treated as dynamic. This makes it possible to use <code>props</code> and <code>state</code> for example.</p>
<pre class="jsx"><code>const Button = (props) =&gt; (
  &lt;button&gt;
     { props.children }
     &lt;style jsx&gt;{`
        button {
          padding: ${ &#39;large&#39; in props ? &#39;50&#39; : &#39;20&#39; }px;
          background: ${props.theme.background};
          color: #999;
          display: inline-block;
          font-size: 1em;
        }
     `}&lt;/style&gt;
  &lt;/button&gt;
)</code></pre>
<p>New styles’ injection is optimized to perform well at runtime.</p>
<p>That said when your CSS is mostly static we recommend to split it up in static and dynamic styles and use two separate <code>style</code> tags so that, when changing, only the dynamic parts are recomputed/rendered.</p>
<pre class="jsx"><code>const Button = (props) =&gt; (
  &lt;button&gt;
     { props.children }
     &lt;style jsx&gt;{`
        button {
          color: #999;
          display: inline-block;
          font-size: 2em;
        }
     `}&lt;/style&gt;
     &lt;style jsx&gt;{`
        button {
          padding: ${ &#39;large&#39; in props ? &#39;50&#39; : &#39;20&#39; }px;
          background: ${props.theme.background};
        }
     `}&lt;/style&gt;
  &lt;/button&gt;
)</code></pre>
<h4 id="via-classname-toggling">Via <code>className</code> toggling</h4>
<p>The second option is to pass properties that toggle class names.</p>
<pre class="jsx"><code>const Button = (props) =&gt; (
  &lt;button className={ &#39;large&#39; in props &amp;&amp; &#39;large&#39; }&gt;
     { props.children }
     &lt;style jsx&gt;{`
        button {
          padding: 20px;
          background: #eee;
          color: #999
        }
        .large {
          padding: 50px
        }
     `}&lt;/style&gt;
  &lt;/button&gt;
)</code></pre>
<p>Then you would use this component as either <code>&lt;Button&gt;Hi&lt;/Button&gt;</code> or <code>&lt;Button large&gt;Big&lt;/Button&gt;</code>.</p>
<h4 id="via-inline-style">Via inline <code>style</code></h4>
<p>*<strong>best for animations</strong></p>
<p>Imagine that you wanted to make the padding in the button above completely customizable. You can override the CSS you configure via inline-styles:</p>
<pre class="jsx"><code>const Button = ({ padding, children }) =&gt; (
  &lt;button style={{ padding }}&gt;
     { children }
     &lt;style jsx&gt;{`
        button {
          padding: 20px;
          background: #eee;
          color: #999
        }
     `}&lt;/style&gt;
  &lt;/button&gt;
)</code></pre>
<p>In this example, the padding defaults to the one set in <code>&lt;style&gt;</code> (<code>20</code>), but the user can pass a custom one via <code>&lt;Button padding={30}&gt;</code>.</p>
<h3 id="constants">Constants</h3>
<p>It is possible to use constants like so:</p>
<pre class="jsx"><code>import { colors, spacing } from &#39;../theme&#39;
import { invertColor } from &#39;../theme/utils&#39;

const Button = ({ children }) =&gt; (
  &lt;button&gt;
     { children }
     &lt;style jsx&gt;{`
        button {
          padding: ${ spacing.medium };
          background: ${ colors.primary };
          color: ${ invertColor(colors.primary) };
        }
     `}&lt;/style&gt;
  &lt;/button&gt;
)</code></pre>
<p>Please keep in mind that constants defined outside of the component scope are treated as static styles.</p>
<h2 id="server-side-rendering">Server-Side Rendering</h2>
<h3 id="styled-jsxserver"><code>styled-jsx/server</code></h3>
<p>The main export flushes your styles to an array of <code>React.Element</code>:</p>
<pre class="jsx"><code>import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/server&#39;
import flush from &#39;styled-jsx/server&#39;
import App from &#39;./app&#39;

export default (req, res) =&gt; {
  const app = ReactDOM.renderToString(&lt;App /&gt;)
  const styles = flush()
  const html = ReactDOM.renderToStaticMarkup(&lt;html&gt;
    &lt;head&gt;{ styles }&lt;/head&gt;
    &lt;body&gt;
      &lt;div id=&quot;root&quot; dangerouslySetInnerHTML={{__html: app}} /&gt;
    &lt;/body&gt;
  &lt;/html&gt;)
  res.end(&#39;&lt;!doctype html&gt;&#39; + html)
}</code></pre>
<p>We also expose <code>flushToHTML</code> to return generated HTML:</p>
<pre class="jsx"><code>import React from &#39;react&#39;
import ReactDOM from &#39;react-dom/server&#39;
import { flushToHTML } from &#39;styled-jsx/server&#39;
import App from &#39;./app&#39;

export default (req, res) =&gt; {
  const app = ReactDOM.renderToString(&lt;App /&gt;)
  const styles = flushToHTML()
  const html = `&lt;!doctype html&gt;
    &lt;html&gt;
      &lt;head&gt;${styles}&lt;/head&gt;
      &lt;body&gt;
        &lt;div id=&quot;root&quot;&gt;${app}&lt;/div&gt;
      &lt;/body&gt;
    &lt;/html&gt;`
  res.end(html)
}</code></pre>
<p>It’s <strong>paramount</strong> that you use one of these two functions so that the generated styles can be diffed when the client loads and duplicate styles are avoided.</p>
<h3 id="content-security-policy">Content Security Policy</h3>
<p>Strict <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">CSP</a> is supported.</p>
<p>You should generate a nonce <strong>per request</strong>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="im">import</span> nanoid <span class="im">from</span> <span class="st">&#39;nanoid&#39;</span></a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="kw">const</span> nonce <span class="op">=</span> <span class="va">Buffer</span>.<span class="at">from</span>(<span class="at">nanoid</span>()).<span class="at">toString</span>(<span class="st">&#39;base64&#39;</span>) <span class="co">//ex: N2M0MDhkN2EtMmRkYi00MTExLWFhM2YtNDhkNTc4NGJhMjA3</span></a></code></pre></div>
<p>You must then pass a nonce to either <code>flushToReact({ nonce })</code> or <code>flushToHTML({ nonce })</code> <strong>and</strong> set a <code>&lt;meta property="csp-nonce" content={nonce} /&gt;</code> tag.</p>
<p>Your CSP policy must share the same nonce as well (the header nonce needs to match the html nonce and remain unpredictable). <code>Content-Security-Policy: default-src 'self'; style-src 'self' 'nonce-N2M0MDhkN2EtMmRkYi00MTExLWFhM2YtNDhkNTc4NGJhMjA3';</code></p>
<h3 id="external-css-and-styles-outside-of-the-component">External CSS and styles outside of the component</h3>
<p>In styled-jsx styles can be defined outside of the component’s render method or in separate JavaScript modules using the <code>styled-jsx/css</code> library. <code>styled-jsx/css</code> exports three tags that can be used to tag your styles:</p>
<ul>
<li><code>css</code>, the default export, to define scoped styles.</li>
<li><code>css.global</code> to define global styles.</li>
<li><code>css.resolve</code> to define scoped styles that resolve to the scoped <code>className</code> and a <code>styles</code> element.</li>
</ul>
<h4 id="external-styles">External styles</h4>
<p>In an external file:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="co">/* styles.js */</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="im">import</span> css <span class="im">from</span> <span class="st">&#39;styled-jsx/css&#39;</span></a>
<a class="sourceLine" id="cb17-3" title="3"></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">// Scoped styles</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="im">export</span> <span class="kw">const</span> button <span class="op">=</span> css<span class="vs">`button { color: hotpink; }`</span></a>
<a class="sourceLine" id="cb17-6" title="6"></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">// Global styles</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="im">export</span> <span class="kw">const</span> body <span class="op">=</span> <span class="va">css</span>.<span class="at">global</span><span class="vs">`body { margin: 0; }`</span></a>
<a class="sourceLine" id="cb17-9" title="9"></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="co">// Resolved styles</span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="im">export</span> <span class="kw">const</span> link <span class="op">=</span> <span class="va">css</span>.<span class="at">resolve</span><span class="vs">`a { color: green; }`</span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="co">// link.className -&gt; scoped className to apply to `a` elements e.g. jsx-123</span></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">// link.styles -&gt; styles element to render inside of your component</span></a>
<a class="sourceLine" id="cb17-14" title="14"></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co">// Works also with default exports</span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="im">export</span> <span class="im">default</span> css<span class="vs">`div { color: green; }`</span></a></code></pre></div>
<p>You can then import and use those styles:</p>
<pre class="jsx"><code>import styles, { button, body } from &#39;./styles&#39;

export default () =&gt; (
  &lt;div&gt;
    &lt;button&gt;styled-jsx&lt;/button&gt;
    &lt;style jsx&gt;{styles}&lt;/style&gt;
    &lt;style jsx&gt;{button}&lt;/style&gt;
    &lt;style jsx global&gt;{body}&lt;/style&gt;
  &lt;/div&gt;
)</code></pre>
<p>N.B. All the tags except for <a href="#the-resolve-tag"><code>resolve</code></a> don’t support dynamic styles.</p>
<p><code>resolve</code> and <code>global</code> can also be imported individually:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="im">import</span> <span class="op">{</span> resolve <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;styled-jsx/css&#39;</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="im">import</span> <span class="op">{</span> global <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;styled-jsx/css&#39;</span></a></code></pre></div>
<p>If you use Prettier we recommend you to use the default <code>css</code> export syntax since the tool doesn’t support named imports.</p>
<h4 id="styles-outside-of-components">Styles outside of components</h4>
<p>The <code>css</code> tag from <code>styled-jsx/css</code> can be also used to define styles in your components files but outside of the component itself. This might help with keeping <code>render</code> methods smaller.</p>
<pre class="jsx"><code>import css from &#39;styled-jsx/css&#39;

export default () =&gt; (
  &lt;div&gt;
    &lt;button&gt;styled-jsx&lt;/button&gt;
    &lt;style jsx&gt;{button}&lt;/style&gt;
  &lt;/div&gt;
)

const button = css`button { color: hotpink; }`</code></pre>
<p>Like in externals styles <code>css</code> doesn’t work with dynamic styles. If you have dynamic parts you might want to place them inline inside of your component using a regular <code>&lt;style jsx&gt;</code> element.</p>
<h4 id="the-resolve-tag">The <code>resolve</code> tag</h4>
<p>The <code>resolve</code> tag from <code>styled-jsx/css</code> can be used when you need to scope some CSS - for example, if you need to style nested components from the parent, such as the <code>Link</code> component in the example below.</p>
<p>It works by returning the generated scoped <code>className</code> and related <code>styles</code>.</p>
<pre class="jsx"><code>import React from &#39;react&#39;
import Link from &#39;some-library&#39;

import css from &#39;styled-jsx/css&#39;

const { className, styles } = css.resolve`
  a { color: green }
`

export default () =&gt; (
  &lt;div&gt;
    {/* use the className */}
    &lt;Link className={className}&gt;About&lt;/Link&gt;

    {/* render the styles for it */}
    {styles}
  &lt;/div&gt;
)</code></pre>
<p>The <code>resolve</code> tag also supports dynamic styles, via template string interpolation:</p>
<pre class="jsx"><code>import React from &#39;react&#39;
import css from &#39;styled-jsx/css&#39;

function getLinkStyles(color) {
  return css.resolve`
    a { color: ${color} }
  `
}

export default (props) =&gt; {
  const { className, styles } = getLinkStyles(props.theme.color)

  return (
    &lt;div&gt;
      &lt;Link className={className}&gt;About&lt;/Link&gt;
      {styles}
    &lt;/div&gt;
  )
}</code></pre>
<h4 id="using-resolve-as-a-babel-macro">Using <code>resolve</code> as a Babel macro</h4>
<p>If you can’t (or would rather not) make changes to your <code>.babelrc</code>, the <code>resolve</code> tag can be used as a Babel macro, thanks to the <a href="https://github.com/kentcdodds/babel-plugin-macros"><code>babel-plugin-macros</code></a> system.</p>
<p>To set this up, first of all, install <code>styled-jsx</code> and <code>babel-plugin-macros</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb23-1" title="1"><span class="ex">npm</span> i --save styled-jsx</a>
<a class="sourceLine" id="cb23-2" title="2"><span class="ex">npm</span> i --save-dev babel-plugin-macros</a></code></pre></div>
<p>Next, add <code>babel-plugin-macros</code> to your Babel configuration:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb24-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb24-2" title="2">  <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb24-3" title="3">    <span class="st">&quot;babel-plugin-macros&quot;</span></a>
<a class="sourceLine" id="cb24-4" title="4">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="fu">}</span></a></code></pre></div>
<p>You can then use <code>resolve</code> by importing it from <code>styled-jsx/macro</code>.</p>
<pre class="jsx"><code>import css from &#39;styled-jsx/macro&#39;


const { className, styles } = css.resolve`
  a { color: green }
`

export default () =&gt; (
  &lt;div&gt;
    &lt;Link className={className}&gt;About&lt;/Link&gt;
    {styles}
  &lt;/div&gt;
)</code></pre>
<h5 id="usage-with-create-react-app">Usage with <a href="https://create-react-app.dev"><code>create-react-app</code></a></h5>
<p><a href="https://create-react-app.dev">Create React App</a> comes with <code>babel-plugin-macros</code> already installed, so the only thing that needs to be done is to install <code>styled-jsx</code>:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb26-1" title="1"><span class="ex">npm</span> i --save styled-jsx</a></code></pre></div>
<p>Then <code>resolve</code> can be imported from <code>styled-jsx/macro</code> and used the same way as in the example in the <a href="https://github.com/zeit/styled-jsx/blob/master/readme.md#using-resolve-as-a-babel-macro">Using <code>resolve</code> as a Babel macro</a> section above.</p>
<h4 id="styles-in-regular-css-files">Styles in regular CSS files</h4>
<p>styled-jsx v3 comes with a webpack loader that lets you write styles in regular <code>css</code> files and consume them in React.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="im">import</span> styles <span class="im">from</span> <span class="st">&#39;../components/button/styles.css&#39;</span></a>
<a class="sourceLine" id="cb27-2" title="2"></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="im">export</span> <span class="im">default</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb27-4" title="4">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb27-5" title="5">    <span class="op">&lt;</span>button<span class="op">&gt;</span>styled<span class="op">-</span>jsx&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb27-6" title="6">    <span class="op">&lt;</span>style jsx<span class="op">&gt;{</span>styles<span class="op">}</span>&lt;/style<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb27-7" title="7">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb27-8" title="8">)</a></code></pre></div>
<p>To consume the styles in your component you can import them from your CSS file and render them using a <code>&lt;style jsx&gt;</code> tag. Remember to add the <code>global</code> prop if you want your styles to be global.</p>
<p>To use this feature you need to register the loader in your webpack config file, before <code>babel-loader</code> which will then transpile the styles via <code>styled-jsx/babel</code></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1">config<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-2" title="2">  <span class="dt">module</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-3" title="3">    <span class="dt">rules</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb28-4" title="4">      <span class="op">{</span></a>
<a class="sourceLine" id="cb28-5" title="5">        <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">css</span><span class="sc">$</span><span class="ss">/</span><span class="op">,</span></a>
<a class="sourceLine" id="cb28-6" title="6">        <span class="dt">use</span><span class="op">:</span> [<span class="op">{</span></a>
<a class="sourceLine" id="cb28-7" title="7">          <span class="dt">loader</span><span class="op">:</span> <span class="at">require</span>(<span class="st">&#39;styled-jsx/webpack&#39;</span>).<span class="at">loader</span><span class="op">,</span></a>
<a class="sourceLine" id="cb28-8" title="8">          <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-9" title="9">            <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;scoped&#39;</span></a>
<a class="sourceLine" id="cb28-10" title="10">          <span class="op">}</span></a>
<a class="sourceLine" id="cb28-11" title="11">        <span class="op">}</span>]</a>
<a class="sourceLine" id="cb28-12" title="12">      <span class="op">}</span></a>
<a class="sourceLine" id="cb28-13" title="13">    ]</a>
<a class="sourceLine" id="cb28-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb28-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>The plugin accepts a <code>type</code> option to configure whether the styles should be <code>scoped</code>, <code>global</code> or <code>resolve</code> (see above). By default its values is set to <code>scoped</code>. <code>type</code> can also be a <code>function</code> which takes the <code>fileName</code> and the <code>fileNameQuery</code> that is being transpiled and must return a valid type.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1">type validTypes <span class="op">=</span> <span class="st">&#39;scoped&#39;</span> <span class="op">|</span> <span class="st">&#39;global&#39;</span> <span class="op">|</span> <span class="st">&#39;resolve&#39;</span></a>
<a class="sourceLine" id="cb29-2" title="2">type fileName <span class="op">=</span> string</a>
<a class="sourceLine" id="cb29-3" title="3">type Options <span class="op">=</span> <span class="op">{|</span></a>
<a class="sourceLine" id="cb29-4" title="4">  <span class="dt">type</span><span class="op">:</span> validTypes <span class="op">|</span> (fileName<span class="op">,</span> options) <span class="kw">=&gt;</span> validTypes</a>
<a class="sourceLine" id="cb29-5" title="5"><span class="op">|}</span></a></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="im">import</span> styles <span class="im">from</span> <span class="st">&#39;./styles.css?type=global&#39;</span></a>
<a class="sourceLine" id="cb30-2" title="2"></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="co">// webpack</span></a>
<a class="sourceLine" id="cb30-4" title="4">config<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-5" title="5">  <span class="dt">module</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-6" title="6">    <span class="dt">rules</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb30-7" title="7">      <span class="op">{</span></a>
<a class="sourceLine" id="cb30-8" title="8">        <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">css</span><span class="sc">$</span><span class="ss">/</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-9" title="9">        <span class="dt">use</span><span class="op">:</span> [<span class="op">{</span></a>
<a class="sourceLine" id="cb30-10" title="10">          <span class="dt">loader</span><span class="op">:</span> <span class="at">require</span>(<span class="st">&#39;styled-jsx/webpack&#39;</span>).<span class="at">loader</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-11" title="11">          <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-12" title="12">            <span class="dt">type</span><span class="op">:</span> (fileName<span class="op">,</span> options) <span class="kw">=&gt;</span> <span class="va">options</span>.<span class="va">query</span>.<span class="at">type</span> <span class="op">||</span> <span class="st">&#39;scoped&#39;</span></a>
<a class="sourceLine" id="cb30-13" title="13">          <span class="op">}</span></a>
<a class="sourceLine" id="cb30-14" title="14">        <span class="op">}</span>]</a>
<a class="sourceLine" id="cb30-15" title="15">      <span class="op">}</span></a>
<a class="sourceLine" id="cb30-16" title="16">    ]</a>
<a class="sourceLine" id="cb30-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb30-18" title="18"><span class="op">}</span></a></code></pre></div>
<p>The type can also be set per individual CSS file via CSS comment:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb31-1" title="1"><span class="co">/* @styled-jsx=scoped */</span></a>
<a class="sourceLine" id="cb31-2" title="2"></a>
<a class="sourceLine" id="cb31-3" title="3">button { <span class="kw">color</span>: <span class="cn">red</span> }</a></code></pre></div>
<p>The CSS comment option will override the one in the webpack configuration only for this specific file.</p>
<h5 id="next.js">Next.js</h5>
<p>Example of <code>next.config.js</code> to integrate <code>styled-jsx/webpack</code>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-2" title="2">  <span class="dt">webpack</span><span class="op">:</span> (config<span class="op">,</span> <span class="op">{</span> defaultLoaders <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-3" title="3">    <span class="va">config</span>.<span class="va">module</span>.<span class="va">rules</span>.<span class="at">push</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb32-4" title="4">      <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">css</span><span class="sc">$</span><span class="ss">/</span><span class="op">,</span></a>
<a class="sourceLine" id="cb32-5" title="5">      <span class="dt">use</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb32-6" title="6">        <span class="va">defaultLoaders</span>.<span class="at">babel</span><span class="op">,</span></a>
<a class="sourceLine" id="cb32-7" title="7">        <span class="op">{</span></a>
<a class="sourceLine" id="cb32-8" title="8">          <span class="dt">loader</span><span class="op">:</span> <span class="at">require</span>(<span class="st">&#39;styled-jsx/webpack&#39;</span>).<span class="at">loader</span><span class="op">,</span></a>
<a class="sourceLine" id="cb32-9" title="9">          <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-10" title="10">            <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;scoped&#39;</span></a>
<a class="sourceLine" id="cb32-11" title="11">          <span class="op">}</span></a>
<a class="sourceLine" id="cb32-12" title="12">        <span class="op">}</span></a>
<a class="sourceLine" id="cb32-13" title="13">      ]</a>
<a class="sourceLine" id="cb32-14" title="14">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb32-15" title="15"></a>
<a class="sourceLine" id="cb32-16" title="16">    <span class="cf">return</span> config</a>
<a class="sourceLine" id="cb32-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb32-18" title="18"><span class="op">}</span></a></code></pre></div>
<h2 id="css-preprocessing-via-plugins">CSS Preprocessing via Plugins</h2>
<p>Styles can be preprocessed via plugins.</p>
<p>Plugins are regular JavaScript modules that export a simple function with the following signature:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" title="1">(css<span class="op">:</span> string<span class="op">,</span> options<span class="op">:</span> Object) <span class="kw">=&gt;</span> string</a></code></pre></div>
<p>Basically they accept a CSS string in input, optionally modify it and finally return it.</p>
<p>Plugins make it possible to use popular preprocessors like SASS, Less, Stylus, PostCSS or apply custom transformations to the styles at <strong>compile time</strong>.</p>
<p>To register a plugin add an option <code>plugins</code> for <code>styled-jsx/babel</code> to your <code>.babelrc</code>. <code>plugins</code> must be an array of module names or <em>full</em> paths for local plugins.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb34-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb34-2" title="2">  <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb34-3" title="3">    <span class="ot">[</span></a>
<a class="sourceLine" id="cb34-4" title="4">      <span class="st">&quot;styled-jsx/babel&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb34-5" title="5">      <span class="fu">{</span> <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;my-styled-jsx-plugin-package&quot;</span><span class="ot">,</span> <span class="st">&quot;/full/path/to/local/plugin&quot;</span><span class="ot">]</span> <span class="fu">}</span></a>
<a class="sourceLine" id="cb34-6" title="6">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb34-7" title="7">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb34-8" title="8"><span class="fu">}</span></a></code></pre></div>
<details>
<p><summary>Instructions to integrate with Next.js</summary> In order to register styled-jsx plugins in a Next.js app you need to create a custom .babelrc file:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb35-1" title="1">  <span class="fu">{</span></a>
<a class="sourceLine" id="cb35-2" title="2">    <span class="dt">&quot;presets&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb35-3" title="3">      <span class="ot">[</span></a>
<a class="sourceLine" id="cb35-4" title="4">        <span class="st">&quot;next/babel&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb35-5" title="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb35-6" title="6">          <span class="dt">&quot;styled-jsx&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb35-7" title="7">            <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb35-8" title="8">              <span class="st">&quot;styled-jsx-plugin-postcss&quot;</span></a>
<a class="sourceLine" id="cb35-9" title="9">            <span class="ot">]</span></a>
<a class="sourceLine" id="cb35-10" title="10">          <span class="fu">}</span></a>
<a class="sourceLine" id="cb35-11" title="11">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb35-12" title="12">      <span class="ot">]</span></a>
<a class="sourceLine" id="cb35-13" title="13">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb35-14" title="14">  <span class="fu">}</span></a></code></pre></div>
This is a fairly new feature so make sure that you using a version of Next.js that supports passing options to <code>styled-jsx</code>.
</details>
<p><br></p>
<p>Plugins are applied in definition order left to right before styles are scoped.</p>
<p>In order to resolve local plugins paths you can use NodeJS’ <a href="https://nodejs.org/api/globals.html#globals_require_resolve">require.resolve</a>.</p>
<p>N.B. when applying the plugins styled-jsx replaces template literals expressions with placeholders because otherwise CSS parsers would get invalid CSS E.g.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb36-1" title="1"><span class="co">/* `ExprNumber` is a number */</span></a>
<a class="sourceLine" id="cb36-2" title="2">%%styled-jsx-placeholder-ExprNumber%%</a></code></pre></div>
<p><strong>Plugins won’t transform expressions</strong> (eg. dynamic styles).</p>
<p>When publishing a plugin you may want to add the keywords: <code>styled-jsx</code> and <code>styled-jsx-plugin</code>. We also encourage you to use the following naming convention for your plugins:</p>
<pre><code>styled-jsx-plugin-&lt;your-plugin-name&gt;</code></pre>
<h4 id="plugin-options">Plugin options</h4>
<p>Users can set plugin options by registering a plugin as an array that contains the plugin path and an options object.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb38-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb38-2" title="2">  <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb38-3" title="3">    <span class="ot">[</span></a>
<a class="sourceLine" id="cb38-4" title="4">      <span class="st">&quot;styled-jsx/babel&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb38-5" title="5">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb38-6" title="6">        <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb38-7" title="7">          <span class="ot">[</span><span class="st">&quot;my-styled-jsx-plugin-package&quot;</span><span class="ot">,</span> <span class="fu">{</span> <span class="dt">&quot;exampleOption&quot;</span><span class="fu">:</span>  <span class="kw">true</span> <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb38-8" title="8">        <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb38-9" title="9">        <span class="dt">&quot;sourceMaps&quot;</span><span class="fu">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb38-10" title="10">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb38-11" title="11">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb38-12" title="12">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb38-13" title="13"><span class="fu">}</span></a></code></pre></div>
<p>Each plugin receives a <code>options</code> object as second argument which contains the babel and user options:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb39-1" title="1">(css<span class="op">,</span> options) <span class="kw">=&gt;</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></a></code></pre></div>
<p>The <code>options</code> object has the following shape:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb40-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb40-2" title="2">  <span class="co">// user options go here</span></a>
<a class="sourceLine" id="cb40-3" title="3">  <span class="co">// eg. exampleOption: true</span></a>
<a class="sourceLine" id="cb40-4" title="4"></a>
<a class="sourceLine" id="cb40-5" title="5">  <span class="co">// babel options</span></a>
<a class="sourceLine" id="cb40-6" title="6">  <span class="dt">babel</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb40-7" title="7">    <span class="dt">sourceMaps</span><span class="op">:</span> boolean<span class="op">,</span></a>
<a class="sourceLine" id="cb40-8" title="8">    <span class="dt">vendorPrefixes</span><span class="op">:</span> boolean<span class="op">,</span></a>
<a class="sourceLine" id="cb40-9" title="9">    <span class="dt">isGlobal</span><span class="op">:</span> boolean<span class="op">,</span></a>
<a class="sourceLine" id="cb40-10" title="10">    <span class="dt">filename</span><span class="op">:</span> <span class="op">?</span>string<span class="op">,</span> <span class="co">// defined only when the filename option is passed to Babel, such as when using Babel CLI or Webpack</span></a>
<a class="sourceLine" id="cb40-11" title="11">    location: <span class="op">{</span> <span class="co">// the original location of the CSS block in the JavaScript file</span></a>
<a class="sourceLine" id="cb40-12" title="12">      <span class="dt">start</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb40-13" title="13">        <span class="dt">line</span><span class="op">:</span> number<span class="op">,</span></a>
<a class="sourceLine" id="cb40-14" title="14">        <span class="dt">column</span><span class="op">:</span> number<span class="op">,</span></a>
<a class="sourceLine" id="cb40-15" title="15">      <span class="op">},</span></a>
<a class="sourceLine" id="cb40-16" title="16">      <span class="dt">end</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb40-17" title="17">        <span class="dt">line</span><span class="op">:</span> number<span class="op">,</span></a>
<a class="sourceLine" id="cb40-18" title="18">        <span class="dt">column</span><span class="op">:</span> number<span class="op">,</span></a>
<a class="sourceLine" id="cb40-19" title="19">      <span class="op">}</span></a>
<a class="sourceLine" id="cb40-20" title="20">    <span class="op">}</span></a>
<a class="sourceLine" id="cb40-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb40-22" title="22"><span class="op">}</span></a></code></pre></div>
<h4 id="example-plugins">Example plugins</h4>
<p>The following plugins are proof of concepts/sample:</p>
<ul>
<li><a href="https://github.com/giuseppeg/styled-jsx-plugin-sass">styled-jsx-plugin-sass</a></li>
<li><a href="https://github.com/giuseppeg/styled-jsx-plugin-postcss">styled-jsx-plugin-postcss</a></li>
<li><a href="https://github.com/giuseppeg/styled-jsx-plugin-stylelint">styled-jsx-plugin-stylelint</a></li>
<li><a href="https://github.com/erasmo-marin/styled-jsx-plugin-less">styled-jsx-plugin-less</a></li>
<li><a href="https://github.com/omardelarosa/styled-jsx-plugin-stylus">styled-jsx-plugin-stylus</a></li>
</ul>
<h2 id="rendering-in-tests">Rendering in tests</h2>
<p>If you’re using a tool such as Enzyme, you might want to avoid compiling your styles in test renders. In general, styled-jsx artifacts like <code>jsx-123</code> classnames and vendor prefixing are not direct concerns of your component, and they generate a lot of snapshot noise.</p>
<p>One option is to exclude the <code>styled-jsx/babel</code> plugin from the <code>test</code> environment using <code>env</code> in your Babel config (see <a href="https://babeljs.io/docs/en/options#config-merging-options">Config Merging options</a>).</p>
<p>But this can cause noise in your terminal output when rendering:</p>
<pre><code>   console.error node_modules/react-dom/cjs/react-dom.development.js:527
      Warning: Received `true` for a non-boolean attribute `jsx`.</code></pre>
<p>The <code>styled-jsx/babel-test</code> solves this problem. It simply strips <code>jsx</code> attributes from all <code>&lt;style&gt;</code> tags. Be sure to target each environment with the appropriate plugin:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb42-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb42-2" title="2">  <span class="dt">&quot;env&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb42-3" title="3">    <span class="dt">&quot;production&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb42-4" title="4">      <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;styled-jsx/babel&quot;</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb42-5" title="5">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb42-6" title="6">    <span class="dt">&quot;development&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb42-7" title="7">      <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;styled-jsx/babel&quot;</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb42-8" title="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb42-9" title="9">    <span class="dt">&quot;test&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb42-10" title="10">      <span class="dt">&quot;plugins&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;styled-jsx/babel-test&quot;</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb42-11" title="11">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb42-12" title="12">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb42-13" title="13"><span class="fu">}</span></a></code></pre></div>
<h4 id="styled-jsxcss-in-tests">styled-jsx/css in tests</h4>
<p>When using <code>styled-jsx/babel-test</code>, <code>styled-jsx/css</code> throws the following error:</p>
<pre><code>styled-jsx/css: if you are getting this error it means that your `css` tagged template literals were not transpiled.</code></pre>
<p>to solve this issue you need to mock <code>styled-jsx/css</code>. You can find a guide at the following link https://kevinjalbert.com/jest-snapshots-reducing-styled-jsx-noise/</p>
<h2 id="faq">FAQ</h2>
<h3 id="warning-unknown-jsx-prop-on-style-tag">Warning: unknown <code>jsx</code> prop on &lt;style&gt; tag</h3>
<p>If you get this warning it means that your styles were not compiled by styled-jsx.</p>
<p>Please take a look at your setup and make sure that everything is correct and that the styled-jsx transformation is ran by Babel.</p>
<h3 id="can-i-return-an-array-of-components-when-using-react-16">Can I return an array of components when using React 16?</h3>
<p>No, this feature is not supported. However we support React Fragments, which are available in React <code>16.2.0</code> and above.</p>
<pre class="jsx"><code>const StyledImage = ({ src, alt = &#39;&#39; }) =&gt; (
  &lt;React.Fragment&gt;
   &lt;img src={src} alt={alt} /&gt;
   &lt;style jsx&gt;{`img { max-width: 100% }`}&lt;/style&gt;
  &lt;/React.Fragment&gt;
)</code></pre>
<h3 id="styling-third-parties-child-components-from-the-parent">Styling third parties / child components from the parent</h3>
<p>When the component accepts a <code>className</code> (or ad-hoc) prop as a way to allow customizations then you can use <a href="#the-resolve-tag">the <code>resolve</code> tag from <code>styled-jsx/css</code></a>.</p>
<p>When the component doesn’t accept any <code>className</code> or doesn’t expose any API to customize the component, then your only option is to use <code>:global()</code> styles:</p>
<pre class="jsx"><code>export default () =&gt; (
  &lt;div&gt;
    &lt;ExternalComponent /&gt;

    &lt;style jsx&gt;{`
      /* &quot;div&quot; will be prefixed, but &quot;.nested-element&quot; won&#39;t */

      div &gt; :global(.nested-element) {
        color: red
      }
    `}&lt;/style&gt;
  &lt;/div&gt;
)</code></pre>
<p>Please keep in mind that <code>:global()</code> styles will affect the entire subtree, so in many cases you may want to be careful and use the children (direct descendant) selector <code>&gt;</code>.</p>
<h3 id="build-a-component-library-with-styled-jsx">Build a component library with styled-jsx</h3>
<p>There’s an <a href="https://medium.com/@tomaszmularczyk89/guide-to-building-a-react-components-library-with-rollup-and-styled-jsx-694ec66bd2">article</a> explaining how to bundle React components with Rollup and styled-jsx as an external dependency.</p>
<h2 id="syntax-highlighting">Syntax Highlighting</h2>
<p>When working with template literals a common drawback is missing syntax highlighting. The following editors currently have support for highlighting CSS inside <code>&lt;style jsx&gt;</code> elements.</p>
<p><em>If you have a solution for an editor not on the list</em> <strong>please <a href="https://github.com/zeit/styled-jsx/pull/new/master">open a PR</a></strong> <em>and let us now.</em></p>
<h3 id="atom">Atom</h3>
<p>The <a href="https://github.com/gandm/language-babel"><code>language-babel</code></a> package for the <a href="https://atom.io/">Atom editor</a> has an option to <a href="https://github.com/gandm/language-babel#javascript-tagged-template-literal-grammar-extensions">extend the grammar for JavaScript tagged template literals</a>.</p>
<p>After <a href="https://github.com/gandm/language-babel#installation">installing the package</a> add the code below to the appropriate settings entry. In a few moments you should be blessed with proper CSS syntax highlighting. (<a href="https://github.com/gandm/language-babel/issues/324">source</a>)</p>
<pre><code>&quot;(?&lt;=&lt;style jsx&gt;{)|(?&lt;=&lt;style jsx global&gt;{)|(?&lt;=css)&quot;:source.css.styled</code></pre>
<figure>
<img src="https://cloud.githubusercontent.com/assets/2313237/22627258/6c97cb68-ebb7-11e6-82e1-60205f8b31e7.png" alt="babel-language settings entry" /><figcaption>babel-language settings entry</figcaption>
</figure>
<h3 id="webstormidea">Webstorm/Idea</h3>
<p>The IDE let you inject any language in place with <em>Inject language or reference</em> in an <em>Intention Actions</em> (default <em>alt+enter</em>). Simply perform the action in the string template and select CSS. You get full CSS highlighting and autocompletion and it will last until you close the IDE.</p>
<p>Additionally you can use language injection comments to enable all the IDE language features indefinitely using the language comment style:</p>
<pre class="jsx"><code>import { colors, spacing } from &#39;../theme&#39;
import { invertColor } from &#39;../theme/utils&#39;

const Button = ({ children }) =&gt; (
  &lt;button&gt;
     { children }

     { /*language=CSS*/ }
     &lt;style jsx&gt;{`
        button {
          padding: ${ spacing.medium };
          background: ${ colors.primary };
          color: ${ invertColor(colors.primary) };
        }
     `}&lt;/style&gt;
  &lt;/button&gt;
)</code></pre>
<h3 id="emmet">Emmet</h3>
<p>If you’re using Emmet you can add the following snippet to <code>~/emmet/snippets-styledjsx.json</code> This will allow you to expand <code>style-jsx</code> to a styled-jsx block.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb48-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb48-2" title="2"> <span class="dt">&quot;html&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb48-3" title="3">   <span class="dt">&quot;snippets&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb48-4" title="4">     <span class="dt">&quot;style-jsx&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;style jsx&gt;{`</span><span class="ch">\n\t</span><span class="st">$1</span><span class="ch">\n</span><span class="st">`}&lt;/style&gt;&quot;</span></a>
<a class="sourceLine" id="cb48-5" title="5">   <span class="fu">}</span></a>
<a class="sourceLine" id="cb48-6" title="6"> <span class="fu">}</span></a>
<a class="sourceLine" id="cb48-7" title="7"><span class="fu">}</span></a></code></pre></div>
<h3 id="syntax-highlighting-visual-studio-code-extension">Syntax Highlighting <a href="https://marketplace.visualstudio.com/items?itemName=blanu.vscode-styled-jsx">Visual Studio Code Extension</a></h3>
<p>Launch VS Code Quick Open (⌘+P), paste the following command, and press enter.</p>
<pre><code>ext install Divlo.vscode-styled-jsx-syntax</code></pre>
<p>If you use Stylus instead of plain CSS, install <a href="https://marketplace.visualstudio.com/items?itemName=samuelroy.vscode-styled-jsx-stylus">vscode-styled-jsx-stylus</a> or paste the command below.</p>
<pre><code>ext install vscode-styled-jsx-stylus</code></pre>
<h3 id="autocomplete-visual-studio-code-extension">Autocomplete <a href="https://marketplace.visualstudio.com/items?itemName=AndrewRazumovsky.vscode-styled-jsx-languageserver">Visual Studio Code Extension</a></h3>
<p>Launch VS Code Quick Open (⌘+P), paste the following command, and press enter.</p>
<pre><code>ext install Divlo.vscode-styled-jsx-languageserver</code></pre>
<h3 id="vim">Vim</h3>
<p>Install <a href="https://github.com/alampros/vim-styled-jsx">vim-styled-jsx</a> with your plugin manager of choice.</p>
<h2 id="eslint">ESLint</h2>
<p>If you’re using <code>eslint-plugin-import</code>, the <code>css</code> import will generate errors, being that it’s a “magic” import (not listed in package.json). To avoid these, simply add the following line to your eslint configuration:</p>
<pre><code>&quot;settings&quot;: {&quot;import/core-modules&quot;: [&quot;styled-jsx/css&quot;] }</code></pre>
<h2 id="credits">Credits</h2>
<ul>
<li><strong>Pedram Emrouznejad</strong> (<a href="https://github.com/rijs/fullstack">rijs</a>) suggested attribute selectors over my initial class prefixing idea.</li>
<li><strong>Sunil Pai</strong> (<a href="https://github.com/threepointone/glamor">glamor</a>) inspired the use of <code>murmurhash2</code> (minimal and fast hashing) and an efficient style injection logic.</li>
<li><strong>Sultan Tarimo</strong> built <a href="https://github.com/thysultan">stylis.js</a>, a super fast and tiny CSS parser and compiler.</li>
<li><strong>Max Stoiber</strong> (<a href="https://github.com/styled-components">styled-components</a>) proved the value of retaining the familiarity of CSS syntax and pointed me to the very efficient <a href="https://github.com/thysultan/stylis.js">stylis</a> compiler (which we forked to very efficiently append attribute selectors to the user’s css)</li>
<li><strong>Yehuda Katz</strong> (<a href="https://github.com/emberjs">ember</a>) convinced me on Twitter to transpile CSS as an alternative to CSS-in-JS.</li>
<li><strong>Evan You</strong> (<a href="https://github.com/vuejs">vuejs</a>) discussed his Vue.js CSS transformation with me.</li>
<li><strong>Henry Zhu</strong> (<a href="https://github.com/babel">babel</a>) helpfully pointed me to some important areas of the babel plugin API.</li>
</ul>
<h2 id="authors">Authors</h2>
<ul>
<li>Guillermo Rauch (<span class="citation" data-cites="rauchg">[@rauchg]</span>(https://twitter.com/rauchg)) - <a href="https://vercel.com">▲Vercel</a></li>
<li>Naoyuki Kanezawa (<span class="citation" data-cites="nkzawa">[@nkzawa]</span>(https://twitter.com/nkzawa)) - <a href="https://vercel.com">▲Vercel</a></li>
<li>Giuseppe Gurgone (<span class="citation" data-cites="giuseppegurgone">[@giuseppegurgone]</span>(https://twitter.com/giuseppegurgone))</li>
</ul>
</body>
</html>
