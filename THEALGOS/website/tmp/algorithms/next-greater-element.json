{
  "slug": "next-greater-element",
  "name": "Next Greater Element",
  "categories": ["datastructures", "stacks"],
  "body": {},
  "implementations": {
    "python": {
      "dir": "data_structures/stacks/next_greater_element.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/data_structures/stacks/next_greater_element.py",
      "code": "arr = [-<span class=\"hljs-number\">10</span>, -<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">5.1</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, -<span class=\"hljs-number\">21</span>, -<span class=\"hljs-number\">10</span>, -<span class=\"hljs-number\">5</span>, -<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>]\nexpect = [-<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">5.1</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">21</span>, -<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>, -<span class=\"hljs-number\">1</span>, -<span class=\"hljs-number\">10</span>, -<span class=\"hljs-number\">5</span>, -<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>]\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">next_greatest_element_slow</span>(<span class=\"hljs-params\">arr: <span class=\"hljs-built_in\">list</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Get the Next Greatest Element (NGE) for all elements in a list.\n    Maximum element present after the current one which is also greater than the\n    current one.\n    &gt;&gt;&gt; next_greatest_element_slow(arr) == expect\n    True\n    &quot;&quot;&quot;</span>\n    result = []\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-built_in\">len</span>(arr), <span class=\"hljs-number\">1</span>):\n        <span class=\"hljs-built_in\">next</span> = -<span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(i + <span class=\"hljs-number\">1</span>, <span class=\"hljs-built_in\">len</span>(arr), <span class=\"hljs-number\">1</span>):\n            <span class=\"hljs-keyword\">if</span> arr[i] &lt; arr[j]:\n                <span class=\"hljs-built_in\">next</span> = arr[j]\n                <span class=\"hljs-keyword\">break</span>\n        result.append(<span class=\"hljs-built_in\">next</span>)\n    <span class=\"hljs-keyword\">return</span> result\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">next_greatest_element_fast</span>(<span class=\"hljs-params\">arr: <span class=\"hljs-built_in\">list</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Like next_greatest_element_slow() but changes the loops to use\n    enumerate() instead of range(len()) for the outer loop and\n    for in a slice of arr for the inner loop.\n    &gt;&gt;&gt; next_greatest_element_fast(arr) == expect\n    True\n    &quot;&quot;&quot;</span>\n    result = []\n    <span class=\"hljs-keyword\">for</span> i, outer <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(arr):\n        <span class=\"hljs-built_in\">next</span> = -<span class=\"hljs-number\">1</span>\n        <span class=\"hljs-keyword\">for</span> inner <span class=\"hljs-keyword\">in</span> arr[i + <span class=\"hljs-number\">1</span> :]:\n            <span class=\"hljs-keyword\">if</span> outer &lt; inner:\n                <span class=\"hljs-built_in\">next</span> = inner\n                <span class=\"hljs-keyword\">break</span>\n        result.append(<span class=\"hljs-built_in\">next</span>)\n    <span class=\"hljs-keyword\">return</span> result\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">next_greatest_element</span>(<span class=\"hljs-params\">arr: <span class=\"hljs-built_in\">list</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Get the Next Greatest Element (NGE) for all elements in a list.\n    Maximum element present after the current one which is also greater than the\n    current one.\n\n    A naive way to solve this is to take two loops and check for the next bigger\n    number but that will make the time complexity as O(n^2). The better way to solve\n    this would be to use a stack to keep track of maximum number giving a linear time\n    solution.\n    &gt;&gt;&gt; next_greatest_element(arr) == expect\n    True\n    &quot;&quot;&quot;</span>\n    stack = []\n    result = [-<span class=\"hljs-number\">1</span>] * <span class=\"hljs-built_in\">len</span>(arr)\n\n    <span class=\"hljs-keyword\">for</span> index <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">reversed</span>(<span class=\"hljs-built_in\">range</span>(<span class=\"hljs-built_in\">len</span>(arr))):\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(stack):\n            <span class=\"hljs-keyword\">while</span> stack[-<span class=\"hljs-number\">1</span>] &lt;= arr[index]:\n                stack.pop()\n                <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(stack) == <span class=\"hljs-number\">0</span>:\n                    <span class=\"hljs-keyword\">break</span>\n\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(stack) != <span class=\"hljs-number\">0</span>:\n            result[index] = stack[-<span class=\"hljs-number\">1</span>]\n\n        stack.append(arr[index])\n\n    <span class=\"hljs-keyword\">return</span> result\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    <span class=\"hljs-keyword\">from</span> doctest <span class=\"hljs-keyword\">import</span> testmod\n    <span class=\"hljs-keyword\">from</span> timeit <span class=\"hljs-keyword\">import</span> timeit\n\n    testmod()\n    <span class=\"hljs-built_in\">print</span>(next_greatest_element_slow(arr))\n    <span class=\"hljs-built_in\">print</span>(next_greatest_element_fast(arr))\n    <span class=\"hljs-built_in\">print</span>(next_greatest_element(arr))\n\n    setup = (\n        <span class=\"hljs-string\">&quot;from __main__ import arr, next_greatest_element_slow, &quot;</span>\n        <span class=\"hljs-string\">&quot;next_greatest_element_fast, next_greatest_element&quot;</span>\n    )\n    <span class=\"hljs-built_in\">print</span>(\n        <span class=\"hljs-string\">&quot;next_greatest_element_slow():&quot;</span>,\n        timeit(<span class=\"hljs-string\">&quot;next_greatest_element_slow(arr)&quot;</span>, setup=setup),\n    )\n    <span class=\"hljs-built_in\">print</span>(\n        <span class=\"hljs-string\">&quot;next_greatest_element_fast():&quot;</span>,\n        timeit(<span class=\"hljs-string\">&quot;next_greatest_element_fast(arr)&quot;</span>, setup=setup),\n    )\n    <span class=\"hljs-built_in\">print</span>(\n        <span class=\"hljs-string\">&quot;     next_greatest_element():&quot;</span>,\n        timeit(<span class=\"hljs-string\">&quot;next_greatest_element(arr)&quot;</span>, setup=setup),\n    )\n"
    },
    "ruby": {
      "dir": "data_structures/arrays/next_greater_element.rb",
      "url": "https://github.com/TheAlgorithms/ruby/tree/master/data_structures/arrays/next_greater_element.rb",
      "code": "<span class=\"hljs-comment\"># You are given two integer arrays nums1 and nums2 both of unique elements, where nums1 is a subset of nums2.</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Find all the next greater numbers for nums1&#x27;s elements in the corresponding places of nums2.</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># The Next Greater Number of a number x in nums1 is the first greater number to its right in nums2. If it does not exist, return -1 for this number.</span>\n\n<span class=\"hljs-comment\"># Example 1:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Input: nums1 = [4,1,2], nums2 = [1,3,4,2]</span>\n<span class=\"hljs-comment\"># Output: [-1,3,-1]</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Explanation:</span>\n<span class=\"hljs-comment\"># For number 4 in the first array, you cannot find the next greater number for it in the second array, so output -1.</span>\n<span class=\"hljs-comment\"># For number 1 in the first array, the next greater number for it in the second array is 3.</span>\n<span class=\"hljs-comment\"># For number 2 in the first array, there is no next greater number for it in the second array, so output -1.</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Example 2:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Input: nums1 = [2,4], nums2 = [1,2,3,4]</span>\n<span class=\"hljs-comment\"># Output: [3,-1]</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Explanation:</span>\n<span class=\"hljs-comment\"># For number 2 in the first array, the next greater number for it in the second array is 3.</span>\n<span class=\"hljs-comment\"># For number 4 in the first array, there is no next greater number for it in the second array, so output -1.</span>\n\n<span class=\"hljs-comment\"># </span>\n<span class=\"hljs-comment\"># Approach: Brute Force</span>\n<span class=\"hljs-comment\"># </span>\n\n<span class=\"hljs-comment\"># Complexity Analysis</span>\n<span class=\"hljs-comment\"># </span>\n<span class=\"hljs-comment\"># Time complexity: O(m*n). The complete nums1 array (of size n) needs to be scanned for all the m elements of nums2 in the worst case.</span>\n<span class=\"hljs-comment\"># Space complexity: O(1). No additional space since we&#x27;re swapping elements in nums1 and returning the input array.</span>\n\n<span class=\"hljs-comment\"># <span class=\"hljs-doctag\">@param</span> {Integer[]} nums1</span>\n<span class=\"hljs-comment\"># <span class=\"hljs-doctag\">@param</span> {Integer[]} nums2</span>\n<span class=\"hljs-comment\"># <span class=\"hljs-doctag\">@return</span> {Integer[]}</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">next_greater_element</span><span class=\"hljs-params\">(nums1, nums2)</span></span>\n  nums1.each_with_index <span class=\"hljs-keyword\">do</span> <span class=\"hljs-params\">|nums1_value, pointer1|</span>\n    max = <span class=\"hljs-number\">0</span>\n    pos_nums2 = nums2.find_index(nums1_value)\n\n    nums2[pos_nums2..nums2.count].each <span class=\"hljs-keyword\">do</span> <span class=\"hljs-params\">|nums2_value|</span>\n      <span class=\"hljs-keyword\">if</span> nums2_value &gt; nums1_value\n        max = nums2_value\n        <span class=\"hljs-keyword\">break</span>\n      <span class=\"hljs-keyword\">end</span>\n    <span class=\"hljs-keyword\">end</span>\n\n    nums1[pointer1] = (nums1_value &lt; max ? max : -<span class=\"hljs-number\">1</span>)\n  <span class=\"hljs-keyword\">end</span>\n\n  nums1\n<span class=\"hljs-keyword\">end</span>\n\nnums1 = [<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>]\nnums2 = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">2</span>]\nprint next_greater_element(nums1, nums2)\n<span class=\"hljs-comment\"># Output: [-1,3,-1]</span>\n\nnums1 = [<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>]\nnums2 = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>]\nprint next_greater_element(nums1, nums2)\n<span class=\"hljs-comment\"># Output: [3,-1]</span>\n"
    }
  },
  "contributors": [
    {
      "name": "Vaibhav Singh",
      "email": "45447817+itsvaibhav01@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Jai Kumar Dewani",
      "email": "jai.dewani.99@gmail.com",
      "commits": 1
    },
    {
      "name": "William Zhang",
      "email": "39932068+WilliamHYZhang@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Christian Clauss",
      "email": "cclauss@me.com",
      "commits": 2
    },
    {
      "name": "Vitor Oliveira",
      "email": "vbrazo@gmail.com",
      "commits": 4
    }
  ],
  "explanationUrl": {}
}
