{
  "slug": "tokenize-string",
  "name": "Tokenize String",
  "categories": ["strings"],
  "body": {},
  "implementations": {
    "aarch64_assembly": {
      "dir": "string/tokenize_string.s",
      "url": "https://github.com/TheAlgorithms/aarch64_assembly/tree/master/string/tokenize_string.s",
      "code": "<span class=\"hljs-comment\">/* ARM assembly AARCH64 Raspberry PI 3B */</span>\n<span class=\"hljs-comment\">/*  program strTokenize64.s   */</span>\n \n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-comment\">/* Constantes file                         */</span>\n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-comment\">/* for this file see task include a file in language AArch64 assembly*/</span>\n<span class=\"hljs-symbol\">.include</span> <span class=\"hljs-string\">&quot;../includeConstantesARM64.inc&quot;</span>\n \n<span class=\"hljs-symbol\">.equ</span> NBPOSTESECLAT,          <span class=\"hljs-number\">20</span>\n \n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-comment\">/* Initialized data                        */</span>\n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-symbol\">.data</span>\n<span class=\"hljs-symbol\">szMessFinal:</span>         <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;Words are : \\n&quot;</span>\n \n<span class=\"hljs-symbol\">szString:</span>            <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;Hello,How,Are,You,Today&quot;</span>\n<span class=\"hljs-symbol\">szMessError:</span>         <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;Error tokenize !!\\n&quot;</span>\n<span class=\"hljs-symbol\">szCarriageReturn:</span>    <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;\\n&quot;</span>\n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-comment\">/* UnInitialized data                      */</span>\n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-symbol\">.bss</span> \n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-comment\">/*  code section                           */</span>\n<span class=\"hljs-comment\">/*******************************************/</span>\n<span class=\"hljs-symbol\">.text</span>\n<span class=\"hljs-symbol\">.global</span> main \n<span class=\"hljs-symbol\">main:</span> \n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszString                           <span class=\"hljs-comment\">// string address </span>\n    <span class=\"hljs-keyword\">mov</span> x1,<span class=\"hljs-string\">&#x27;,&#x27;</span>                                    <span class=\"hljs-comment\">// separator</span>\n    <span class=\"hljs-keyword\">bl</span> stTokenize\n    <span class=\"hljs-keyword\">cmp</span> x0,-<span class=\"hljs-number\">1</span>                                     <span class=\"hljs-comment\">// error ?</span>\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">99</span>f\n    <span class=\"hljs-keyword\">mov</span> x2,x0                                     <span class=\"hljs-comment\">// table address</span>\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszMessFinal                        <span class=\"hljs-comment\">// display message</span>\n    <span class=\"hljs-keyword\">bl</span> affichageMess\n    <span class=\"hljs-keyword\">ldr</span> x4,[x2]                                   <span class=\"hljs-comment\">// number of areas</span>\n    <span class=\"hljs-keyword\">add</span> x2,x2,<span class=\"hljs-number\">8</span>                                   <span class=\"hljs-comment\">// first area</span>\n    <span class=\"hljs-keyword\">mov</span> x3,<span class=\"hljs-number\">0</span>                                      <span class=\"hljs-comment\">// loop counter</span>\n    <span class=\"hljs-keyword\">mov</span> x0,x2\n<span class=\"hljs-number\">1</span>:                                                <span class=\"hljs-comment\">// display loop </span>\n    <span class=\"hljs-keyword\">ldr</span> x0,[x2,x3, <span class=\"hljs-keyword\">lsl</span> <span class=\"hljs-number\">3</span>]                         <span class=\"hljs-comment\">// address area</span>\n    <span class=\"hljs-keyword\">bl</span> affichageMess\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszCarriageReturn                   <span class=\"hljs-comment\">// display carriage return</span>\n    <span class=\"hljs-keyword\">bl</span> affichageMess\n    <span class=\"hljs-keyword\">add</span> x3,x3,<span class=\"hljs-number\">1</span>                                  <span class=\"hljs-comment\">// counter + 1</span>\n    <span class=\"hljs-keyword\">cmp</span> x3,x4                                     <span class=\"hljs-comment\">// end ?</span>\n    <span class=\"hljs-keyword\">blt</span> <span class=\"hljs-number\">1</span>b                                        <span class=\"hljs-comment\">// no -&gt; loop</span>\n \n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">100</span>f\n<span class=\"hljs-number\">99</span>:                                               <span class=\"hljs-comment\">// display error message</span>\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszMessError\n    <span class=\"hljs-keyword\">bl</span> affichageMess\n \n<span class=\"hljs-number\">100</span>:                                              <span class=\"hljs-comment\">// standard end of the program</span>\n    <span class=\"hljs-keyword\">mov</span> x0,<span class=\"hljs-number\">0</span>                                       <span class=\"hljs-comment\">// return code</span>\n    <span class=\"hljs-keyword\">mov</span> x8,EXIT                                   <span class=\"hljs-comment\">// request to exit program</span>\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">0</span>                                         <span class=\"hljs-comment\">// perform the system call</span>\n<span class=\"hljs-symbol\">qAdrszString:</span>             .quad szString\n<span class=\"hljs-comment\">//qAdrszFinalString:        .quad szFinalString</span>\n<span class=\"hljs-symbol\">qAdrszMessFinal:</span>          .quad szMessFinal\n<span class=\"hljs-symbol\">qAdrszMessError:</span>          .quad szMessError\n<span class=\"hljs-symbol\">qAdrszCarriageReturn:</span>     .quad szCarriageReturn\n \n<span class=\"hljs-comment\">/*******************************************************************/</span>\t   \n<span class=\"hljs-comment\">/* Separate string by separator into an array                     */</span>\n<span class=\"hljs-comment\">/* areas are store on the heap Linux                               */</span>\n<span class=\"hljs-comment\">/*******************************************************************/</span>\t  \n<span class=\"hljs-comment\">/* x0 contains string address */</span>\n<span class=\"hljs-comment\">/* x1 contains separator character (, or . or : )    */</span>\n<span class=\"hljs-comment\">/* x0 returns table address with first item = number areas */</span>\n<span class=\"hljs-comment\">/* and other items contains pointer of each string     */</span>\n<span class=\"hljs-symbol\">stTokenize:</span>\n    stp x1,<span class=\"hljs-built_in\">lr</span>,[<span class=\"hljs-built_in\">sp</span>,-<span class=\"hljs-number\">16</span>]!           <span class=\"hljs-comment\">// save  registers</span>\n    <span class=\"hljs-keyword\">mov</span> x16,x0\n    <span class=\"hljs-keyword\">mov</span> x9,x1                     <span class=\"hljs-comment\">// save separator</span>\n    <span class=\"hljs-keyword\">mov</span> x14,<span class=\"hljs-number\">0</span>          \n<span class=\"hljs-number\">1</span>:                                <span class=\"hljs-comment\">// compute length string for place reservation on the heap</span>\n    <span class=\"hljs-keyword\">ldrb</span> w12,[x0,x14]\n    <span class=\"hljs-keyword\">cbz</span> x12, <span class=\"hljs-number\">2</span>f\n    <span class=\"hljs-keyword\">add</span> x14,x14,<span class=\"hljs-number\">1</span>\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">1</span>b\n<span class=\"hljs-number\">2</span>:\n    <span class=\"hljs-keyword\">ldr</span> x12,qTailleTable\n    <span class=\"hljs-keyword\">add</span> x15,x12,x14\n    <span class=\"hljs-keyword\">and</span> x15,x15,<span class=\"hljs-number\">0xFFFFFFFFFFFFFFF0</span>\n    <span class=\"hljs-keyword\">add</span> x15,x15,<span class=\"hljs-number\">16</span>                 <span class=\"hljs-comment\">// align word on the heap</span>\n                                  <span class=\"hljs-comment\">// place reservation on the heap </span>\n    <span class=\"hljs-keyword\">mov</span> x0,<span class=\"hljs-number\">0</span>                      <span class=\"hljs-comment\">// heap address</span>\n    <span class=\"hljs-keyword\">mov</span> x8,BRK                    <span class=\"hljs-comment\">// call system linux &#x27;brk&#x27;</span>\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">0</span>                         <span class=\"hljs-comment\">// call system</span>\n    <span class=\"hljs-keyword\">cmp</span> x0,-<span class=\"hljs-number\">1</span>                     <span class=\"hljs-comment\">// error call system</span>\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">100</span>f\n    <span class=\"hljs-keyword\">mov</span> x14,x0                    <span class=\"hljs-comment\">// save address  heap begin = begin array</span>\n    <span class=\"hljs-keyword\">add</span> x0,x0,x15                 <span class=\"hljs-comment\">// reserve x15 byte on the heap</span>\n    <span class=\"hljs-keyword\">mov</span> x8,BRK                    <span class=\"hljs-comment\">// call system linux &#x27;brk&#x27;</span>\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-keyword\">cmp</span> x0,-<span class=\"hljs-number\">1</span>\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">100</span>f\n                                  <span class=\"hljs-comment\">// string copy on the heap</span>\n    <span class=\"hljs-keyword\">add</span> x13,x14,x12               <span class=\"hljs-comment\">// behind the array </span>\n    <span class=\"hljs-keyword\">mov</span> x0,x16\n    <span class=\"hljs-keyword\">mov</span> x1,x13\n<span class=\"hljs-number\">3</span>:                                <span class=\"hljs-comment\">// loop copy string</span>\n    <span class=\"hljs-keyword\">ldrb</span> w12,[x0],<span class=\"hljs-number\">1</span>               <span class=\"hljs-comment\">// read one byte and increment pointer one byte</span>\n    <span class=\"hljs-keyword\">strb</span> w12,[x1],<span class=\"hljs-number\">1</span>               <span class=\"hljs-comment\">// store one byte and increment pointer one byte</span>\n    <span class=\"hljs-keyword\">cbnz</span> x12,<span class=\"hljs-number\">3</span>b                   <span class=\"hljs-comment\">// end of string ? no -&gt; loop </span>\n \n    <span class=\"hljs-keyword\">mov</span> x0,<span class=\"hljs-number\">#0</span>\n    <span class=\"hljs-keyword\">str</span> x0,[x14]\n    <span class=\"hljs-keyword\">str</span> x13,[x14,<span class=\"hljs-number\">8</span>]\n    <span class=\"hljs-keyword\">mov</span> x12,<span class=\"hljs-number\">#1</span>                     <span class=\"hljs-comment\">// areas counter</span>\n<span class=\"hljs-number\">4</span>:                                <span class=\"hljs-comment\">// loop load string character </span>\n    <span class=\"hljs-keyword\">ldrb</span> w0,[x13]\n    <span class=\"hljs-keyword\">cbz</span> x0,<span class=\"hljs-number\">5</span>f                     <span class=\"hljs-comment\">// end string </span>\n    <span class=\"hljs-keyword\">cmp</span> x0,x9                     <span class=\"hljs-comment\">// separator ?</span>\n    cinc x13,x13,ne               <span class=\"hljs-comment\">// no -&gt; next location </span>\n    <span class=\"hljs-keyword\">bne</span> <span class=\"hljs-number\">4</span>b                        <span class=\"hljs-comment\">// and loop</span>\n    <span class=\"hljs-keyword\">strb</span> wzr,[x13]                <span class=\"hljs-comment\">// store zero final of string</span>\n    <span class=\"hljs-keyword\">add</span> x13,x13,<span class=\"hljs-number\">1</span>                 <span class=\"hljs-comment\">// next character</span>\n    <span class=\"hljs-keyword\">add</span> x12,x12,<span class=\"hljs-number\">1</span>                 <span class=\"hljs-comment\">// areas counter + 1</span>\n    <span class=\"hljs-keyword\">str</span> x13,[x14,x12, <span class=\"hljs-keyword\">lsl</span> <span class=\"hljs-number\">#3</span>]     <span class=\"hljs-comment\">// store address area in the table at index x2</span>\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">4</span>b                          <span class=\"hljs-comment\">// and loop</span>\n \n<span class=\"hljs-number\">5</span>:\n    <span class=\"hljs-keyword\">str</span> x12,[x14]                 <span class=\"hljs-comment\">// store number areas</span>\n    <span class=\"hljs-keyword\">mov</span> x0,x14                    <span class=\"hljs-comment\">// returns array address</span>\n<span class=\"hljs-number\">100</span>:\n    ldp x1,<span class=\"hljs-built_in\">lr</span>,[<span class=\"hljs-built_in\">sp</span>],<span class=\"hljs-number\">16</span>             <span class=\"hljs-comment\">// restaur  2 registers</span>\n    ret                           <span class=\"hljs-comment\">// return to address lr x30</span>\n<span class=\"hljs-symbol\">qTailleTable:</span>      .quad <span class=\"hljs-number\">8</span> * NBPOSTESECLAT\n \n<span class=\"hljs-comment\">/********************************************************/</span>\n<span class=\"hljs-comment\">/*        File Include fonctions                        */</span>\n<span class=\"hljs-comment\">/********************************************************/</span>\n<span class=\"hljs-comment\">/* for this file see task include a file in language AArch64 assembly */</span>\n<span class=\"hljs-symbol\">.include</span> <span class=\"hljs-string\">&quot;../includeARM64.inc&quot;</span>\n"
    }
  },
  "contributors": [
    {
      "name": "Mertcan Davulcu",
      "email": "54983926+mertcandav@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}
