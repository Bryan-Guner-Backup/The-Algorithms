<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="rushstackeslint-patch"><span class="citation" data-cites="rushstack/eslint-patch">@rushstack/eslint-patch</span></h1>
<p>A patch that improves how ESLint loads plugins when working in a monorepo with a reusable toolchain</p>
<h2 id="what-it-does">What it does</h2>
<p>This patch is a workaround for a longstanding <a href="https://github.com/eslint/eslint/issues/3458">ESLint feature request</a> that would allow a shared ESLint config to bring along its own plugins, rather than imposing peer dependencies on every consumer of the config. In a monorepo scenario, this enables your lint setup to be consolidated in a single NPM package. Doing so greatly reduces the copy+pasting and version management for all the other projects that use your standard lint rule set, but don’t want to be bothered with the details.</p>
<p>ESLint provides partial solutions such as the <code>--resolve-plugins-relative-to</code> CLI option, however they are awkward to use. For example, the VS Code extension for ESLint must be manually configured with this CLI option. If some developers use other editors such as WebStorm, a different manual configuration is needed. Also, the <code>--resolve-plugins-relative-to</code> parameter does not support multiple paths, for example if a config package builds upon another package that also provides plugins. See <a href="https://github.com/eslint/eslint/issues/3458#issuecomment-516666620">this discussion</a> for additional technical background.</p>
<h2 id="why-its-a-patch">Why it’s a patch</h2>
<p>ESLint’s long awaited module resolver overhaul still has not materialized as of ESLint 7. As a stopgap, we created a small <strong>.eslintrc.js</strong> patch that solves the problem adequately for most real world scenarios. This patch was proposed as an ESLint feature with <a href="https://github.com/eslint/eslint/pull/12460">PR 12460</a>, however the maintainers were not able to accept it unless it is reworked into a fully correct design. Such a requirement would impose the same hurdles as the original GitHub issue; thus, it seems best to stay with the patch approach.</p>
<p>Since the patch is now in wide use, we’ve converted it into a proper NPM package to simplify maintenance.</p>
<h2 id="how-to-use-it">How to use it</h2>
<p>Add a <code>require()</code> call to the to top of the <strong>.eslintrc.js</strong> file for each project that depends on your shared ESLint config, for example:</p>
<p><strong>.eslintrc.js</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">require</span>(<span class="st">&quot;@rushstack/eslint-patch/modern-module-resolution&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">// Add your &quot;extends&quot; boilerplate here, for example:</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="im">module</span>.<span class="dt">exports</span> = <span class="op">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">  extends<span class="op">:</span> <span class="op">[</span><span class="st">&#39;@your-company/eslint-config&#39;</span><span class="op">],</span></a>
<a class="sourceLine" id="cb1-6" title="6">  parserOptions<span class="op">:</span> <span class="op">{</span> tsconfigRootDir<span class="op">:</span> __dirname <span class="op">}</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="op">};</span></a></code></pre></div>
<p>With this change, the local project no longer needs any ESLint plugins in its <strong>package.json</strong> file. Instead, the hypothetical <code>@your-company/eslint-config</code> NPM package would declare the plugins as its own dependencies.</p>
<p>This patch works by modifying the ESLint engine so that its module resolver will load relative to the folder of the referencing config file, rather than the project folder. The patch is compatible with ESLint 6 and 7. It also works with any editor extensions that load ESLint as a library.</p>
<p>For an even leaner setup, <code>@your-company/eslint-config</code> can provide the patch as its own dependency. See <span class="citation" data-cites="rushstack/eslint-config">[@rushstack/eslint-config]</span>(https://www.npmjs.com/package/<span class="citation" data-cites="rushstack/eslint-config">@rushstack/eslint-config</span>) for a real world example and recommended approach.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://github.com/microsoft/rushstack/blob/master/stack/eslint-patch/CHANGELOG.md">CHANGELOG.md</a> - Find out what’s new in the latest version</li>
</ul>
<p><code>@rushstack/eslint-patch</code> is part of the <a href="https://rushstack.io/">Rush Stack</a> family of projects.</p>
</body>
</html>
