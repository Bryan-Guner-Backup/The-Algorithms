<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="stylis">STYLIS</h1>
<p><a href="https://github.com/thysultan/stylis.js"><img src="https://stylis.js.org/assets/logo.svg" alt="stylis" /></a></p>
<p>light – weight css preprocessor</p>
<ul>
<li>3Kb</li>
</ul>
<p><a href="https://www.npmjs.com/package/stylis"><img src="https://img.shields.io/npm/v/stylis.svg?style=flat" alt="npm" /></a> <a href="https://github.com/thysultan/stylis.js/blob/master/LICENSE.md"><img src="https://img.shields.io/badge/licence-MIT-blue.svg?style=flat" alt="licence" /></a> <a href="https://semaphoreci.com/thysultan/stylis-js"><img src="https://semaphoreci.com/api/v1/thysultan/stylis-js/branches/master/shields_badge.svg" alt="Build Status" /></a> <img src="https://img.shields.io/badge/dependencies-none-green.svg?style=flat" alt="dependencies" /></p>
<h2 id="supports">Supports</h2>
<ul>
<li>Edge</li>
<li>IE 8+</li>
<li>Chrome</li>
<li>Firefox</li>
<li>Safari</li>
<li>Node</li>
</ul>
<hr />
<h2 id="installation">Installation</h2>
<h4 id="direct-download">direct download</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">stylis.min.js</span><span class="kw">&gt;&lt;/script&gt;</span></a></code></pre></div>
<h4 id="cdn">CDN</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">https://unpkg.com/stylis@latest/stylis.min.js</span><span class="kw">&gt;&lt;/script&gt;</span></a></code></pre></div>
<h4 id="npm">npm</h4>
<pre><code>npm install stylis --save</code></pre>
<h2 id="features">Features</h2>
<ul>
<li>selector namespacing/isolation</li>
<li>inline global injection ex. <code>:global(selector)</code></li>
<li>nesting <code>a { &amp;:hover {} }</code></li>
<li>vendor prefixing (flex-box, etc…)</li>
<li>flat stylesheets <code>color: red; h1 { color: red; }</code></li>
<li>keyframe and animation namespacing</li>
<li>plugins</li>
<li>minification</li>
<li>built to support <a href="https://developers.google.com/closure/compiler">closure-compiler advanced mode</a></li>
</ul>
<hr />
<h2 id="input">Input</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="at">stylis</span>(<span class="st">&#39;#id&#39;</span><span class="op">,</span> <span class="vs">`</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="vs">font-size: 2em;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="vs">// line comments</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="vs">/* block comments */</span></a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="vs">:global(body) {background:red}</span></a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="vs">h1 {</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="vs">    h2 {</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="vs">        h3 {</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="vs">            content:&#39;nesting&#39;</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="vs">        }</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="vs">    }</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="vs">}</span></a>
<a class="sourceLine" id="cb4-16" title="16"></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="vs">@media (max-width: 600px) {</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="vs">    &amp; {display:none}</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="vs">}</span></a>
<a class="sourceLine" id="cb4-20" title="20"></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="vs">&amp;:before {</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="vs">    animation: slide 3s ease infinite</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="vs">}</span></a>
<a class="sourceLine" id="cb4-24" title="24"></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="vs">@keyframes slide {</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="vs">    from { opacity: 0}</span></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="vs">    to { opacity: 1}</span></a>
<a class="sourceLine" id="cb4-28" title="28"><span class="vs">}</span></a>
<a class="sourceLine" id="cb4-29" title="29"></a>
<a class="sourceLine" id="cb4-30" title="30"><span class="vs">&amp; {</span></a>
<a class="sourceLine" id="cb4-31" title="31"><span class="vs">    display: flex</span></a>
<a class="sourceLine" id="cb4-32" title="32"><span class="vs">}</span></a>
<a class="sourceLine" id="cb4-33" title="33"></a>
<a class="sourceLine" id="cb4-34" title="34"><span class="vs">&amp;::placeholder {</span></a>
<a class="sourceLine" id="cb4-35" title="35"><span class="vs">    color:red</span></a>
<a class="sourceLine" id="cb4-36" title="36"><span class="vs">}</span></a>
<a class="sourceLine" id="cb4-37" title="37"><span class="vs">`</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="output">Output</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb5-1" title="1"><span class="pp">#id</span> {<span class="kw">font-size</span>: <span class="dv">2</span><span class="dt">em</span><span class="op">;</span>}</a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3">body {<span class="kw">background</span>:<span class="cn">red</span>}</a>
<a class="sourceLine" id="cb5-4" title="4">h1 h2 h3 {<span class="kw">content</span>: <span class="st">&#39;nesting&#39;</span>}</a>
<a class="sourceLine" id="cb5-5" title="5"></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="im">@media</span> (<span class="kw">max-width</span>: <span class="dv">600</span><span class="dt">px</span>) {</a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="pp">#id</span> {<span class="kw">display</span>:<span class="dv">none</span>}</a>
<a class="sourceLine" id="cb5-8" title="8">}</a>
<a class="sourceLine" id="cb5-9" title="9"></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="pp">#id</span><span class="in">:before</span> {</a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="kw">-webkit-animation</span>: slide-id <span class="dv">3</span><span class="dt">s</span> <span class="dv">ease</span> <span class="dv">infinite</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-12" title="12">    <span class="kw">animation</span>: slide-id <span class="dv">3</span><span class="dt">s</span> <span class="dv">ease</span> <span class="dv">infinite</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-13" title="13">}</a>
<a class="sourceLine" id="cb5-14" title="14"></a>
<a class="sourceLine" id="cb5-15" title="15"></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="im">@-webkit-keyframes</span> slide-id {</a>
<a class="sourceLine" id="cb5-17" title="17">    from { <span class="kw">opacity</span>: <span class="dv">0</span>}</a>
<a class="sourceLine" id="cb5-18" title="18">    to { <span class="kw">opacity</span>: <span class="dv">1</span>}</a>
<a class="sourceLine" id="cb5-19" title="19">}</a>
<a class="sourceLine" id="cb5-20" title="20"><span class="im">@keyframes</span> slide-id {</a>
<a class="sourceLine" id="cb5-21" title="21">    <span class="dv">from</span> { <span class="kw">opacity</span>: <span class="dv">0</span>}</a>
<a class="sourceLine" id="cb5-22" title="22">    <span class="dv">to</span> { <span class="kw">opacity</span>: <span class="dv">1</span>}</a>
<a class="sourceLine" id="cb5-23" title="23">}</a>
<a class="sourceLine" id="cb5-24" title="24"></a>
<a class="sourceLine" id="cb5-25" title="25"><span class="pp">#id</span> {</a>
<a class="sourceLine" id="cb5-26" title="26">    <span class="kw">display</span>:-webkit-box<span class="op">;</span></a>
<a class="sourceLine" id="cb5-27" title="27">    <span class="kw">display</span>:-webkit-flex<span class="op">;</span></a>
<a class="sourceLine" id="cb5-28" title="28">    <span class="kw">display</span>:-ms-flexbox<span class="op">;</span></a>
<a class="sourceLine" id="cb5-29" title="29">    <span class="kw">display</span>:flex<span class="op">;</span></a>
<a class="sourceLine" id="cb5-30" title="30">}</a>
<a class="sourceLine" id="cb5-31" title="31"></a>
<a class="sourceLine" id="cb5-32" title="32"><span class="pp">#id</span><span class="in">::-webkit-input-placeholder</span> {<span class="kw">color</span>:<span class="cn">red</span><span class="op">;</span>}</a>
<a class="sourceLine" id="cb5-33" title="33"><span class="pp">#id</span><span class="in">::-moz-placeholder</span> {<span class="kw">color</span>:<span class="cn">red</span><span class="op">;</span>}</a>
<a class="sourceLine" id="cb5-34" title="34"><span class="pp">#id</span><span class="in">:-ms-input-placeholder</span> {<span class="kw">color</span>:<span class="cn">red</span><span class="op">;</span>}</a>
<a class="sourceLine" id="cb5-35" title="35"><span class="pp">#id</span><span class="in">::placeholder</span> {<span class="kw">color</span>:<span class="cn">red</span><span class="op">;</span>}</a></code></pre></div>
<h2 id="api">API</h2>
<h4 id="stylis-1">Stylis</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">stylis</span>(selector<span class="op">:</span> <span class="op">{</span>String<span class="op">},</span> css<span class="op">:</span> <span class="op">{</span>String<span class="op">}</span>)</a></code></pre></div>
<h4 id="factory">Factory</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// factory pattern</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">var</span> stylis <span class="op">=</span> <span class="kw">new</span> <span class="at">stylis</span>(options)</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">// singleton pattern</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="kw">var</span> stylis <span class="op">=</span> stylis</a></code></pre></div>
<p>When using the factory pattern the if an object is passed as optional <code>options</code> argument, this will be passed to <code>stylis.set(options)</code></p>
<h4 id="set">Set</h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="co">// all options except compress and cascade are enabled by default</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="va">stylis</span>.<span class="at">set</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb8-3" title="3">    <span class="co">// (dis/en)able :global selectors</span></a>
<a class="sourceLine" id="cb8-4" title="4">    <span class="dt">global</span><span class="op">:</span> <span class="op">{</span>Boolean<span class="op">}</span></a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6">    <span class="co">// (dis/en)able aggressive cascade isolation</span></a>
<a class="sourceLine" id="cb8-7" title="7">    <span class="co">// true for normal cascade(default) false for no cascading</span></a>
<a class="sourceLine" id="cb8-8" title="8">    <span class="dt">cascade</span><span class="op">:</span> <span class="op">{</span>Boolean<span class="op">}</span></a>
<a class="sourceLine" id="cb8-9" title="9"></a>
<a class="sourceLine" id="cb8-10" title="10">    <span class="co">// (dis/en)able namespace keyframes + animations</span></a>
<a class="sourceLine" id="cb8-11" title="11">    <span class="dt">keyframe</span><span class="op">:</span> <span class="op">{</span>Boolean<span class="op">}</span></a>
<a class="sourceLine" id="cb8-12" title="12"></a>
<a class="sourceLine" id="cb8-13" title="13">    <span class="co">// (dis/en)able vendor prefixing</span></a>
<a class="sourceLine" id="cb8-14" title="14">    <span class="dt">prefix</span><span class="op">:</span> <span class="op">{</span>Boolean<span class="op">|</span><span class="at">Function</span>(<span class="dt">key</span><span class="op">:</span> string<span class="op">,</span> <span class="dt">value</span><span class="op">:</span> string<span class="op">,</span> <span class="dt">context</span><span class="op">:</span> number)<span class="op">}</span></a>
<a class="sourceLine" id="cb8-15" title="15"></a>
<a class="sourceLine" id="cb8-16" title="16">    <span class="co">// (dis/en)able aggressive minification</span></a>
<a class="sourceLine" id="cb8-17" title="17">    <span class="dt">compress</span><span class="op">:</span> <span class="op">{</span>Boolean<span class="op">}</span></a>
<a class="sourceLine" id="cb8-18" title="18"></a>
<a class="sourceLine" id="cb8-19" title="19">    <span class="co">// (dis/en)able (no)semicolon support</span></a>
<a class="sourceLine" id="cb8-20" title="20">    <span class="co">// false to enable no-semicolons (default)</span></a>
<a class="sourceLine" id="cb8-21" title="21">    <span class="dt">semicolon</span><span class="op">:</span> <span class="op">{</span>Boolean<span class="op">},</span></a>
<a class="sourceLine" id="cb8-22" title="22"></a>
<a class="sourceLine" id="cb8-23" title="23">    <span class="co">// tell stylis to make an effort to preserve empty rules,</span></a>
<a class="sourceLine" id="cb8-24" title="24">    <span class="co">// i.e `.selector{ }`</span></a>
<a class="sourceLine" id="cb8-25" title="25">    <span class="dt">preserve</span><span class="op">:</span> <span class="op">{</span>Boolean<span class="op">}</span></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="op">}</span>)</a></code></pre></div>
<h4 id="vendor-prefixing">Vendor Prefixing</h4>
<p>By default vendor is enabled, however there is an option to disable vendor prefixing, either completely or dynamically.</p>
<p>The following would disable prefixing.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="va">stylis</span>.<span class="at">set</span>(<span class="op">{</span><span class="dt">prefix</span><span class="op">:</span> <span class="kw">false</span><span class="op">}</span>)</a></code></pre></div>
<p>Alternatively you can disable prefixing on a case by case basis by providing a function that returns a <code>boolean</code> indiciating whether to prefixing that particular rule.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="va">stylis</span>.<span class="at">set</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">    <span class="dt">prefix</span><span class="op">:</span> (key<span class="op">,</span> value<span class="op">,</span> context) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-3" title="3">        <span class="cf">return</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="op">}</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="op">}</span>)</a></code></pre></div>
<p>The arguments correspond to the rule that is about to be vendor prefixed. For example:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="co">// transform: none;</span></a>
<a class="sourceLine" id="cb11-2" title="2">key <span class="op">=</span> <span class="st">&#39;transform&#39;</span></a>
<a class="sourceLine" id="cb11-3" title="3">value <span class="op">=</span> <span class="st">&#39;none&#39;</span></a>
<a class="sourceLine" id="cb11-4" title="4">context <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">// :read-only {...}</span></a>
<a class="sourceLine" id="cb11-7" title="7">key <span class="op">=</span> <span class="st">&#39;:read-only&#39;</span></a>
<a class="sourceLine" id="cb11-8" title="8">value <span class="op">=</span> <span class="st">&#39;...&#39;</span></a>
<a class="sourceLine" id="cb11-9" title="9">context <span class="op">=</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb11-10" title="10"></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">// @keyframes {...}</span></a>
<a class="sourceLine" id="cb11-12" title="12">key <span class="op">=</span> <span class="st">&#39;@keyframes&#39;</span></a>
<a class="sourceLine" id="cb11-13" title="13">value <span class="op">=</span> <span class="st">&#39;...&#39;</span></a>
<a class="sourceLine" id="cb11-14" title="14">context <span class="op">=</span> <span class="dv">3</span></a></code></pre></div>
<h4 id="use">Use</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="va">stylis</span>.<span class="at">use</span>(plugin<span class="op">:</span> <span class="op">{</span>Function<span class="op">|</span>Array<span class="op">&lt;</span>Function<span class="op">&gt;|</span><span class="kw">null</span><span class="op">}</span>)</a></code></pre></div>
<p>The use function is chainable ex. <code>stylis.use()()()</code></p>
<h2 id="plugins">Plugins</h2>
<p>The optional middleware function accepts four arguments with <code>this</code> pointing to a reference of the current stylis instance.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1">(context<span class="op">,</span> content<span class="op">,</span> selectors<span class="op">,</span> parent<span class="op">,</span> line<span class="op">,</span> column<span class="op">,</span> length)</a></code></pre></div>
<p>Plugins are executed in stages identified by an <code>context</code> interger value.</p>
<pre><code>-2 /* post-process context */
-1 /* preparation context */
0  /* newline context */

1  /* property context */
2  /* selector block context */
3  /* @at-rule block context */</code></pre>
<blockquote>
<p>Note: Since the newline context is intended for source-map plugins by default stylis will not execute plugins in this context unless enabled, this can be done through <code>stylis.use(true)</code> or disabled after that through <code>stylis.use(false)</code>.</p>
</blockquote>
<ul>
<li><code>-2</code> post processed context, before the compiled css output is returned</li>
<li><code>-1</code> preparation context, before the compiler starts</li>
<li><code>0</code> after every newline</li>
<li><code>1</code> on a property declaration ex. <code>color: red;</code></li>
<li><code>2</code> after a selector block of css has been processed ex. <code>.foo {color:red;}</code></li>
<li><code>3</code> after a <code>@at-rule</code> block of css has been processed ex. <code>@media {h1{color:red;}}</code></li>
</ul>
<p>If at any context(except 0) that the middleware returns a different string the content of css will be replaced with the return value.</p>
<p>To remove all plugins just call <code>.use</code> with null/no arguments.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="co">// removes all previously added plugins, then adds one</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="va">stylis</span>.<span class="at">use</span>(<span class="kw">null</span>)(ctx <span class="kw">=&gt;</span> <span class="op">{}</span>)</a></code></pre></div>
<p>For example we can add a feature <code>random()</code> to our css that when used prints a random number.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="co"> * plugin</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co"> *</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co"> * </span><span class="an">@param</span><span class="co">  </span><span class="cv">{number}</span><span class="co"> context</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co"> * </span><span class="an">@param</span><span class="co">  </span><span class="cv">{Array&lt;string&gt;}</span><span class="co"> selector</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co"> * </span><span class="an">@param</span><span class="co">  </span><span class="cv">{Array&lt;string&gt;}</span><span class="co"> parent</span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co"> * </span><span class="an">@param</span><span class="co">  </span><span class="cv">{string}</span><span class="co"> content</span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="co"> * </span><span class="an">@param</span><span class="co">  </span><span class="cv">{number}</span><span class="co"> line</span></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co"> * </span><span class="an">@param</span><span class="co">  </span><span class="cv">{number}</span><span class="co"> column</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co"> * </span><span class="an">@param</span><span class="co">  </span><span class="cv">{number}</span><span class="co"> length</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co"> * </span><span class="an">@return</span><span class="co"> {(string|void)?}</span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="co"> */</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="kw">const</span> plugin <span class="op">=</span> (context<span class="op">,</span> content<span class="op">,</span> selectors<span class="op">,</span> parent<span class="op">,</span> line<span class="op">,</span> column<span class="op">,</span> length) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-14" title="14">    <span class="cf">switch</span> (context) <span class="op">{</span></a>
<a class="sourceLine" id="cb16-15" title="15">        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> <span class="va">content</span>.<span class="at">replace</span>(<span class="ss">/random</span><span class="sc">\(\)</span><span class="ss">/g</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">random</span>())</a>
<a class="sourceLine" id="cb16-16" title="16">    <span class="op">}</span></a>
<a class="sourceLine" id="cb16-17" title="17"><span class="op">}</span></a>
<a class="sourceLine" id="cb16-18" title="18"></a>
<a class="sourceLine" id="cb16-19" title="19"><span class="co">/**</span></a>
<a class="sourceLine" id="cb16-20" title="20"><span class="co"> * use</span></a>
<a class="sourceLine" id="cb16-21" title="21"><span class="co"> *</span></a>
<a class="sourceLine" id="cb16-22" title="22"><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">{</span><span class="co">(Array</span><span class="kw">&lt;function&gt;</span><span class="co">|function|null|boolean)} plugin</span></a>
<a class="sourceLine" id="cb16-23" title="23"><span class="co"> * </span><span class="an">@return</span><span class="co"> {Function} use</span></a>
<a class="sourceLine" id="cb16-24" title="24"><span class="co"> */</span></a>
<a class="sourceLine" id="cb16-25" title="25"><span class="va">stylis</span>.<span class="at">use</span>(plugin)</a>
<a class="sourceLine" id="cb16-26" title="26"></a>
<a class="sourceLine" id="cb16-27" title="27"><span class="at">stylis</span>(<span class="vs">``</span><span class="op">,</span> <span class="vs">`h1 { width: calc(random()*10); }`</span>)</a></code></pre></div>
<p>This will replace all instances of <code>random()</code> with a random number.</p>
<p>Internally Before stylis processes <code>calc(random()*10);</code> it passes it to the plugin if a plugin exists; If in turn the plugin returns something different from what it received stylis will replace the content of the property with the return value and continue processing that.</p>
<p>The same can be said for a selector block, in both contexts an argument <code>selector</code> is passed that contains the current array of selectors that the block of css/property stylis is working on.</p>
<p>This array of selectors is mutable and will reflect the output of selectors if changed.</p>
<h2 id="benchmark">Benchmark</h2>
<p>Stylis is fast, and though it does not generate an AST you can with a plugin create an AST out of the resulting input, this and other aspects allow it to be very small(3KB).</p>
<p>The benchmark results are using <a href="https://github.com/postcss/benchmark">https://github.com/postcss/benchmark</a></p>
<blockquote>
<p>Note that the benchmark is not a one-2-one comparison because each library was developed for different goals and different set of features.</p>
</blockquote>
<p>Stylis appears in all the benchmarks because by default stylis both parsers, processes and auto prefixes in one pass.</p>
<h4 id="parsers">Parsers</h4>
<pre><code>Stylis       x 54.28 ops/sec ±4.45% (58 runs sampled)
CSSTree      x 39.73 ops/sec ±9.18% (56 runs sampled)
PostCSS      x 21.11 ops/sec ±8.46% (57 runs sampled)
CSSOM        x 19.20 ops/sec ±6.53% (36 runs sampled)
Mensch       x 17.85 ops/sec ±13.39% (37 runs sampled)
Rework       x 12.80 ops/sec ±4.42% (36 runs sampled)
PostCSS Full x 8.15 ops/sec ±7.79% (45 runs sampled)
Gonzales     x 5.21 ops/sec ±7.75% (18 runs sampled)
Gonzales PE  x 3.99 ops/sec ±10.37% (15 runs sampled)
Stylecow     x 3.97 ops/sec ±9.48% (15 runs sampled)
ParserLib    x 1.79 ops/sec ±8.58% (9 runs sampled)

Fastest test is Stylis at 1.37x faster than CSSTree</code></pre>
<hr />
<h4 id="preprocessors">Preprocessors</h4>
<pre><code>Stylis    x 26.26 ops/sec ±5.95% (49 runs sampled)
PostCSS   x 16.23 ops/sec ±11.21% (47 runs sampled)
Rework    x 10.65 ops/sec ±3.86% (55 runs sampled)
libsass   x 6.83 ops/sec ±2.29% (22 runs sampled)
Less      x 4.75 ops/sec ±9.14% (29 runs sampled)
Stylus    x 3.67 ops/sec ±28.12% (25 runs sampled)
Stylecow  x 2.15 ops/sec ±6.36% (15 runs sampled)
Ruby Sass x 0.31 ops/sec ±8.12% (6 runs sampled)

Fastest test is Stylis at 1.62x faster than PostCSS</code></pre>
<hr />
<h4 id="prefixers">Prefixers</h4>
<pre><code>Stylis       x 45.52 ops/sec ±14.61% (77 runs sampled)
Autoprefixer x 13.32 ops/sec ±6.51% (67 runs sampled)
Stylecow     x 2.28 ops/sec ±5.97% (16 runs sampled)
nib          x 1.79 ops/sec ±25.32% (15 runs sampled)
Compass      x 0.15 ops/sec ±9.34% (5 runs sampled)

Fastest test is Stylis at 3.4x faster than Autoprefixer</code></pre>
</body>
</html>
