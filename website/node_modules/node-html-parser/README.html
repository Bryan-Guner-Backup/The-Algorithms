<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="fast-html-parser-npm-version-build-status">Fast HTML Parser <a href="http://badge.fury.io/js/node-html-parser"><img src="https://badge.fury.io/js/node-html-parser.png" alt="NPM version" /></a> <a href="https://travis-ci.org/taoqf/node-html-parser"><img src="https://travis-ci.org/taoqf/node-html-parser.svg?branch=master" alt="Build Status" /></a></h1>
<p>Fast HTML Parser is a <em>very fast</em> HTML parser. Which will generate a simplified DOM tree, with basic element query support.</p>
<p>Per the design, it intends to parse massive HTML files in lowest price, thus the performance is the top priority. For this reason, some malformatted HTML may not be able to parse correctly, but most usual errors are covered (eg. HTML4 style no closing <code>&lt;li&gt;</code>, <code>&lt;td&gt;</code> etc).</p>
<h2 id="install">Install</h2>
<pre class="shell"><code>npm install --save node-html-parser</code></pre>
<h2 id="performance">Performance</h2>
<p>Faster than htmlparser2!</p>
<pre class="shell"><code>node-html-parser:2.02346 ms/file ± 2.21481
htmlparser      :26.0810 ms/file ± 171.313
htmlparser2     :4.49111 ms/file ± 6.85512
parse5          :14.8590 ms/file ± 10.9427
high5           :7.71818 ms/file ± 4.88375</code></pre>
<p>Tested with <a href="https://github.com/AndreasMadsen/htmlparser-benchmark">htmlparser-benchmark</a>.</p>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb3-1" title="1"><span class="im">import</span> <span class="op">{</span> parse <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;node-html-parser&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">const</span> root <span class="op">=</span> <span class="fu">parse</span>(<span class="st">&#39;&lt;ul id=&quot;list&quot;&gt;&lt;li&gt;Hello World&lt;/li&gt;&lt;/ul&gt;&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">root</span><span class="op">.</span><span class="va">firstChild</span><span class="op">.</span><span class="at">structure</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">// ul#list</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">//   li</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">//     #text</span></a>
<a class="sourceLine" id="cb3-9" title="9"></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">root</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&#39;#list&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">// { tagName: &#39;ul&#39;,</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">//   rawAttrs: &#39;id=&quot;list&quot;&#39;,</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">//   childNodes:</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">//    [ { tagName: &#39;li&#39;,</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">//        rawAttrs: &#39;&#39;,</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">//        childNodes: [Object],</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">//        classNames: [] } ],</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">//   id: &#39;list&#39;,</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="co">//   classNames: [] }</span></a>
<a class="sourceLine" id="cb3-20" title="20"><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">root</span><span class="op">.</span><span class="fu">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co">// &lt;ul id=&quot;list&quot;&gt;&lt;li&gt;Hello World&lt;/li&gt;&lt;/ul&gt;</span></a>
<a class="sourceLine" id="cb3-22" title="22"><span class="va">root</span><span class="op">.</span><span class="fu">set_content</span>(<span class="st">&#39;&lt;li&gt;Hello World&lt;/li&gt;&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="va">root</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">;</span>    <span class="co">// &lt;li&gt;Hello World&lt;/li&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> HTMLParser <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;node-html-parser&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">var</span> root <span class="op">=</span> <span class="va">HTMLParser</span>.<span class="at">parse</span>(<span class="st">&#39;&lt;ul id=&quot;list&quot;&gt;&lt;li&gt;Hello World&lt;/li&gt;&lt;/ul&gt;&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="global-methods">Global Methods</h2>
<h3 id="parsedata-options">parse(data[, options])</h3>
<p>Parse given data, and return root of the generated DOM.</p>
<ul>
<li><strong>data</strong>, data to parse</li>
<li><p><strong>options</strong>, parse options</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">lowerCaseTagName</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span>  <span class="co">// convert tag name to lower case (hurt performance heavily)</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="dt">comment</span><span class="op">:</span> <span class="kw">false</span>            <span class="co">// retrieve comments (hurt performance slightly)</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="dt">blockTextElements</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="dt">script</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="co">// keep text content when parsing</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="dt">noscript</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>   <span class="co">// keep text content when parsing</span></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="dt">style</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>      <span class="co">// keep text content when parsing</span></a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="dt">pre</span><span class="op">:</span> <span class="kw">true</span>         <span class="co">// keep text content when parsing</span></a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="op">}</span></a></code></pre></div></li>
</ul>
<h2 id="htmlelement-methods">HTMLElement Methods</h2>
<h3 id="htmlelementtrimright">HTMLElement#trimRight()</h3>
<p>Trim element from right (in block) after seeing pattern in a TextNode.</p>
<h3 id="htmlelementremovewhitespace">HTMLElement#removeWhitespace()</h3>
<p>Remove whitespaces in this sub tree.</p>
<h3 id="htmlelementqueryselectorallselector">HTMLElement#querySelectorAll(selector)</h3>
<p>Query CSS selector to find matching nodes.</p>
<p>Note: only <code>tagName</code>, <code>#id</code>, <code>.class</code> selectors supported. And not behave the same as standard <code>querySelectorAll()</code> as it will <em>stop</em> searching sub tree after find a match.</p>
<h3 id="htmlelementqueryselectorselector">HTMLElement#querySelector(selector)</h3>
<p>Query CSS Selector to find matching node.</p>
<h3 id="htmlelementappendchildnode">HTMLElement#appendChild(node)</h3>
<p>Append a child node to childNodes</p>
<h3 id="htmlelementinsertadjacenthtmlwhere-html">HTMLElement#insertAdjacentHTML(where, html)</h3>
<p>parses the specified text as HTML and inserts the resulting nodes into the DOM tree at a specified position.</p>
<h3 id="htmlelementsetattributekey-string-value-string">HTMLElement#setAttribute(key: string, value: string)</h3>
<p>Set <code>value</code> to <code>key</code> attribute.</p>
<h3 id="htmlelementremoveattributekey-string">HTMLElement#removeAttribute(key: string)</h3>
<p>Remove <code>key</code> attribute.</p>
<h3 id="htmlelementgetattributekey-string">HTMLElement#getAttribute(key: string)</h3>
<p>Get <code>key</code> attribute.</p>
<h3 id="htmlelementexchangechildoldnode-node-newnode-node">HTMLElement#exchangeChild(oldNode: Node, newNode: Node)</h3>
<p>Exchanges given child with new child.</p>
<h3 id="htmlelementremovechildnode-node">HTMLElement#removeChild(node: Node)</h3>
<p>Remove child node.</p>
<h3 id="htmlelementtostring">HTMLElement#toString()</h3>
<p>Same as <a href="#htmlelementouterhtml">outerHTML</a></p>
<h3 id="htmlelementset_contentcontent-string-node-node">HTMLElement#set_content(content: string | Node | Node[])</h3>
<p>Set content. <strong>Notice</strong>: Do not set content of the <strong>root</strong> node.</p>
<h3 id="htmlelementremove">HTMLElement#remove()</h3>
<p>Remove current element.</p>
<h2 id="htmlelement-properties">HTMLElement Properties</h2>
<h3 id="htmlelementtext">HTMLElement#text</h3>
<p>Get unescaped text value of current node and its children. Like <code>innerText</code>. (slow for the first time)</p>
<h3 id="htmlelementrawtext">HTMLElement#rawText</h3>
<p>Get escpaed (as-it) text value of current node and its children. May have <code>&amp;amp;</code> in it. (fast)</p>
<h3 id="htmlelementstructuredtext">HTMLElement#structuredText</h3>
<p>Get structured Text</p>
<h3 id="htmlelementstructure">HTMLElement#structure</h3>
<p>Get DOM structure</p>
<h3 id="htmlelementfirstchild">HTMLElement#firstChild</h3>
<p>Get first child node</p>
<h3 id="htmlelementlastchild">HTMLElement#lastChild</h3>
<p>Get last child node</p>
<h3 id="htmlelementinnerhtml">HTMLElement#innerHTML</h3>
<p>Get innerHTML.</p>
<h3 id="htmlelementouterhtml">HTMLElement#outerHTML</h3>
<p>Get outerHTML.</p>
<h3 id="htmlelementnextsibling">HTMLElement#nextSibling</h3>
<p>Returns a reference to the next child node of the current element’s parent.</p>
<h3 id="htmlelementnextelementsibling">HTMLElement#nextElementSibling</h3>
<p>Returns a reference to the next child element of the current element’s parent.</p>
</body>
</html>
