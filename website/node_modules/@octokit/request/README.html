<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="request.js">request.js</h1>
<blockquote>
<p>Send parameterized requests to GitHub‚Äôs APIs with sensible defaults in browsers and Node</p>
</blockquote>
<p><span class="citation" data-cites="octokit/request.svg">[![@latest](https://img.shields.io/npm/v/@octokit/request.svg)]</span>(https://www.npmjs.com/package/<span class="citation" data-cites="octokit/request">@octokit/request</span>) <a href="https://github.com/octokit/request.js/actions?query=workflow%3ATest+branch%3Amaster"><img src="https://github.com/octokit/request.js/workflows/Test/badge.svg" alt="Build Status" /></a></p>
<p><code>@octokit/request</code> is a request library for browsers &amp; node that makes it easier to interact with <a href="https://developer.github.com/v3/">GitHub‚Äôs REST API</a> and <a href="https://developer.github.com/v4/guides/forming-calls/#the-graphql-endpoint">GitHub‚Äôs GraphQL API</a>.</p>
<p>It uses <a href="https://github.com/octokit/endpoint.js"><code>@octokit/endpoint</code></a> to parse the passed options and sends the request using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch</a> (<a href="https://github.com/bitinn/node-fetch">node-fetch</a> in Node).</p>
<!-- update table of contents by running `npx markdown-toc README.md -i` -->
<!-- toc -->
<ul>
<li><a href="#features">Features</a></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#rest-api-example">REST API example</a></li>
<li><a href="#graphql-example">GraphQL example</a></li>
<li><a href="#alternative-pass-method--url-as-part-of-options">Alternative: pass <code>method</code> &amp; <code>url</code> as part of options</a></li>
</ul></li>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#request">request()</a></li>
<li><a href="#requestdefaults"><code>request.defaults()</code></a></li>
<li><a href="#requestendpoint"><code>request.endpoint</code></a></li>
<li><a href="#special-cases">Special cases</a>
<ul>
<li><a href="#the-data-parameter-%E2%80%93-set-request-body-directly">The <code>data</code> parameter ‚Äì set request body directly</a></li>
<li><a href="#set-parameters-for-both-the-urlquery-and-the-request-body">Set parameters for both the URL/query and the request body</a></li>
</ul></li>
<li><a href="#license">LICENSE</a></li>
</ul>
<!-- tocstop -->
<h2 id="features">Features</h2>
<p>ü§© 1:1 mapping of REST API endpoint documentation, e.g.¬†<a href="https://developer.github.com/v3/issues/labels/#add-labels-to-an-issue">Add labels to an issue</a> becomes</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">request</span>(<span class="st">&quot;POST /repos/{owner}/{repo}/issues/{number}/labels&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">mediaType</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="dt">previews</span><span class="op">:</span> [<span class="st">&quot;symmetra&quot;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="dt">owner</span><span class="op">:</span> <span class="st">&quot;octokit&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="dt">repo</span><span class="op">:</span> <span class="st">&quot;request.js&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="dt">number</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="dt">labels</span><span class="op">:</span> [<span class="st">&quot;üêõ bug&quot;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>üë∂ <a href="https://bundlephobia.com/result?p=@octokit/request@5.0.3">Small bundle size</a> (&lt;4kb minified + gzipped)</p>
<p>üòé <a href="#authentication">Authenticate</a> with any of <a href="https://github.com/octokit/auth.js">GitHubs Authentication Strategies</a>.</p>
<p>üëç Sensible defaults</p>
<ul>
<li><code>baseUrl</code>: <code>https://api.github.com</code></li>
<li><code>headers.accept</code>: <code>application/vnd.github.v3+json</code></li>
<li><code>headers.agent</code>: <code>octokit-request.js/&lt;current version&gt; &lt;OS information&gt;</code>, e.g.¬†<code>octokit-request.js/1.2.3 Node.js/10.15.0 (macOS Mojave; x64)</code></li>
</ul>
<p>üëå Simple to test: mock requests by passing a custom fetch method.</p>
<p>üßê Simple to debug: Sets <code>error.request</code> to request options causing the error (with redacted credentials).</p>
<h2 id="usage">Usage</h2>
<table>
<tbody valign="top" align="left">
<tr>
<th>
Browsers
</th>
<td width="100%">
<p>Load <code><span class="citation" data-cites="octokit/request">@octokit/request</span></code> directly from <a href="https://cdn.skypack.dev">cdn.skypack.dev</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;module&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="im">import</span> <span class="op">{</span> request <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;https://cdn.skypack.dev/@octokit/request&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">&lt;/script&gt;</span></a></code></pre></div>
</td>
</tr>
<tr>
<th>
Node
</th>
<td>
<p>Install with <code>npm install <span class="citation" data-cites="octokit/request">@octokit/request</span></code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> <span class="op">{</span> request <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;@octokit/request&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">// or: import { request } from &quot;@octokit/request&quot;;</span></a></code></pre></div>
</td>
</tr>
</tbody>
</table>
<h3 id="rest-api-example">REST API example</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">// Following GitHub docs formatting:</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">// https://developer.github.com/v3/repos/#list-organization-repositories</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="at">request</span>(<span class="st">&quot;GET /orgs/{org}/repos&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="dt">authorization</span><span class="op">:</span> <span class="st">&quot;token 0000000000000000000000000000000000000001&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="dt">org</span><span class="op">:</span> <span class="st">&quot;octokit&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;private&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10"></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span><span class="va">result</span>.<span class="va">data</span>.<span class="at">length</span><span class="sc">}</span><span class="vs"> repos found.`</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="graphql-example">GraphQL example</h3>
<p>For GraphQL request we recommend using <a href="https://github.com/octokit/graphql.js#readme"><code>@octokit/graphql</code></a></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="at">request</span>(<span class="st">&quot;POST /graphql&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="dt">authorization</span><span class="op">:</span> <span class="st">&quot;token 0000000000000000000000000000000000000001&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">query</span><span class="op">:</span> <span class="vs">`query ($login: String!) {</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="vs">    organization(login: $login) {</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="vs">      repositories(privacy: PRIVATE) {</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="vs">        totalCount</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="vs">      }</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="vs">    }</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="vs">  }`</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="dt">variables</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-13" title="13">    <span class="dt">login</span><span class="op">:</span> <span class="st">&quot;octokit&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-14" title="14">  <span class="op">},</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="alternative-pass-method-url-as-part-of-options">Alternative: pass <code>method</code> &amp; <code>url</code> as part of options</h3>
<p>Alternatively, pass in a method and a url</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="at">request</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">method</span><span class="op">:</span> <span class="st">&quot;GET&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="dt">url</span><span class="op">:</span> <span class="st">&quot;/orgs/{org}/repos&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="dt">authorization</span><span class="op">:</span> <span class="st">&quot;token 0000000000000000000000000000000000000001&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="dt">org</span><span class="op">:</span> <span class="st">&quot;octokit&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;private&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="authentication">Authentication</h2>
<p>The simplest way to authenticate a request is to set the <code>Authorization</code> header directly, e.g.¬†to a <a href="https://github.com/settings/tokens/">personal access token</a>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> requestWithAuth <span class="op">=</span> <span class="va">request</span>.<span class="at">defaults</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="dt">authorization</span><span class="op">:</span> <span class="st">&quot;token 0000000000000000000000000000000000000001&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="at">requestWithAuth</span>(<span class="st">&quot;GET /user&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>For more complex authentication strategies such as GitHub Apps or Basic, we recommend the according authentication library exported by <a href="https://github.com/octokit/auth.js"><code>@octokit/auth</code></a>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> <span class="op">{</span> createAppAuth <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;@octokit/auth-app&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">const</span> auth <span class="op">=</span> <span class="at">createAppAuth</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="dt">appId</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">APP_ID</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="dt">privateKey</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">PRIVATE_KEY</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="dt">installationId</span><span class="op">:</span> <span class="dv">123</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="kw">const</span> requestWithAuth <span class="op">=</span> <span class="va">request</span>.<span class="at">defaults</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="dt">request</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-9" title="9">    <span class="dt">hook</span><span class="op">:</span> <span class="va">auth</span>.<span class="at">hook</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-10" title="10">  <span class="op">},</span></a>
<a class="sourceLine" id="cb8-11" title="11">  <span class="dt">mediaType</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-12" title="12">    <span class="dt">previews</span><span class="op">:</span> [<span class="st">&quot;machine-man&quot;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb8-13" title="13">  <span class="op">},</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-15" title="15"></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="kw">const</span> <span class="op">{</span> <span class="dt">data</span><span class="op">:</span> app <span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="at">requestWithAuth</span>(<span class="st">&quot;GET /app&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="kw">const</span> <span class="op">{</span> <span class="dt">data</span><span class="op">:</span> app <span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="at">requestWithAuth</span>(</a>
<a class="sourceLine" id="cb8-18" title="18">  <span class="st">&quot;POST /repos/{owner}/{repo}/issues&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-19" title="19">  <span class="op">{</span></a>
<a class="sourceLine" id="cb8-20" title="20">    <span class="dt">owner</span><span class="op">:</span> <span class="st">&quot;octocat&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-21" title="21">    <span class="dt">repo</span><span class="op">:</span> <span class="st">&quot;hello-world&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-22" title="22">    <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Hello from the engine room&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-23" title="23">  <span class="op">}</span></a>
<a class="sourceLine" id="cb8-24" title="24">)<span class="op">;</span></a></code></pre></div>
<h2 id="request">request()</h2>
<p><code>request(route, options)</code> or <code>request(options)</code>.</p>
<p><strong>Options</strong></p>
<table>
<thead>
<tr>
<th align="left">
name
</th>
<th align="left">
type
</th>
<th align="left">
description
</th>
</tr>
</thead>
<tr>
<th align="left">
<code>route</code>
</th>
<td>
String
</td>
<td>
If <code>route</code> is set it has to be a string consisting of the request method and URL, e.g.¬†<code>GET /orgs/{org}</code>
</td>
</tr>
<tr>
<th align="left">
<code>options.baseUrl</code>
</th>
<td>
String
</td>
<td>
<strong>Required.</strong> Any supported <a href="https://developer.github.com/v3/#http-verbs">http verb</a>, case insensitive. <em>Defaults to <code>https://api.github.com</code></em>.
</td>
</tr>
<th align="left">
<code>options.headers</code>
</th>
<td>
Object
</td>
<td>
Custom headers. Passed headers are merged with defaults:<br> <em><code>headers[‚Äòuser-agent‚Äô]</code> defaults to <code>octokit-rest.js/1.2.3</code> (where <code>1.2.3</code> is the released version)</em>.<br> <em><code>headers[‚Äòaccept‚Äô]</code> defaults to <code>application/vnd.github.v3+json</code>.<br> Use <code>options.mediaType.{format,previews}</code> to request API previews and custom media types.
</td>
</tr>
<tr>
<th align="left">
<code>options.mediaType.format</code>
</th>
<td>
String
</td>
<td>
Media type param, such as <code>raw</code>, <code>html</code>, or <code>full</code>. See <a href="https://developer.github.com/v3/media/">Media Types</a>.
</td>
</tr>
<tr>
<th align="left">
<code>options.mediaType.previews</code>
</th>
<td>
Array of strings
</td>
<td>
Name of previews, such as <code>mercy</code>, <code>symmetra</code>, or <code>scarlet-witch</code>. See <a href="https://developer.github.com/v3/previews/">API Previews</a>.
</td>
</tr>
<tr>
<th align="left">
<code>options.method</code>
</th>
<td>
String
</td>
<td>
<strong>Required.</strong> Any supported <a href="https://developer.github.com/v3/#http-verbs">http verb</a>, case insensitive. <em>Defaults to <code>Get</code></em>.
</td>
</tr>
<tr>
<th align="left">
<code>options.url</code>
</th>
<td>
String
</td>
<td>
<strong>Required.</strong> A path or full URL which may contain <code>:variable</code> or <code>{variable}</code> placeholders, e.g.¬†<code>/orgs/{org}/repos</code>. The <code>url</code> is parsed using <a href="https://github.com/bramstein/url-template">url-template</a>.
</td>
</tr>
<tr>
<th align="left">
<code>options.data</code>
</th>
<td>
Any
</td>
<td>
Set request body directly instead of setting it to JSON based on additional parameters. See <a href="#data-parameter">‚ÄúThe <code>data</code> parameter‚Äù</a> below.
</td>
</tr>
<tr>
<th align="left">
<code>options.request.agent</code>
</th>
<td>
<a href="https://nodejs.org/api/http.html#http_class_http_agent">http(s).Agent</a> instance
</td>
<td>
Node only. Useful for custom proxy, certificate, or dns lookup.
</td>
</tr>
<tr>
<th align="left">
<code>options.request.fetch</code>
</th>
<td>
Function
</td>
<td>
Custom replacement for <a href="https://github.com/bitinn/node-fetch">built-in fetch method</a>. Useful for testing or request hooks.
</td>
</tr>
<tr>
<th align="left">
<code>options.request.hook</code>
</th>
<td>
Function
</td>
<td>
Function with the signature <code>hook(request, endpointOptions)</code>, where <code>endpointOptions</code> are the parsed options as returned by <a href="https://github.com/octokit/endpoint.js#endpointmergeroute-options-or-endpointmergeoptions"><code>endpoint.merge()</code></a>, and <code>request</code> is <a href="https://github.com/octokit/request.js#request"><code>request()</code></a>. This option works great in conjuction with <a href="https://github.com/gr2m/before-after-hook">before-after-hook</a>.
</td>
</tr>
<tr>
<th align="left">
<a name="options-request-signal"></a><code>options.request.signal</code>
</th>
<td>
<a href="https://github.com/bitinn/node-fetch/tree/e996bdab73baf996cf2dbf25643c8fe2698c3249#request-cancellation-with-abortsignal">new AbortController().signal</a>
</td>
<td>
Use an <code>AbortController</code> instance to cancel a request. In node you can only cancel streamed requests.
</td>
</tr>
<th align="left">
<code>options.request.log</code>
</th>
<th>
<code>object</code>
</th>
<td>
Used for internal logging. Defaults to <a href="https://developer.mozilla.org/en-US/docs/Web/API/console"><code>console</code></a>.
</td>
</tr>
<tr>
<th align="left">
<code>options.request.timeout</code>
</th>
<td>
Number
</td>
<td>
Node only. Request/response timeout in ms, it resets on redirect. 0 to disable (OS limit applies). <a href="#options-request-signal">options.request.signal</a> is recommended instead.
</td>
</tr>
</table>
<p>All other options except <code>options.request.*</code> will be passed depending on the <code>method</code> and <code>url</code> options.</p>
<ol type="1">
<li>If the option key is a placeholder in the <code>url</code>, it will be used as replacement. For example, if the passed options are <code>{url: '/orgs/{org}/repos', org: 'foo'}</code> the returned <code>options.url</code> is <code>https://api.github.com/orgs/foo/repos</code></li>
<li>If the <code>method</code> is <code>GET</code> or <code>HEAD</code>, the option is passed as query parameter</li>
<li>Otherwise the parameter is passed in the request body as JSON key.</li>
</ol>
<p><strong>Result</strong></p>
<p><code>request</code> returns a promise and resolves with 4 keys</p>
<table>
<thead>
<tr>
<th align="left">
key
</th>
<th align="left">
type
</th>
<th align="left">
description
</th>
</tr>
</thead>
<tr>
<th align="left">
<code>status</code>
</th>
<td>
Integer
</td>
<td>
Response status status
</td>
</tr>
<tr>
<th align="left">
<code>url</code>
</th>
<td>
String
</td>
<td>
URL of response. If a request results in redirects, this is the final URL. You can send a <code>HEAD</code> request to retrieve it without loading the full response body.
</td>
</tr>
<tr>
<th align="left">
<code>headers</code>
</th>
<td>
Object
</td>
<td>
All response headers
</td>
</tr>
<tr>
<th align="left">
<code>data</code>
</th>
<td>
Any
</td>
<td>
The response body as returned from server. If the response is JSON then it will be parsed into an object
</td>
</tr>
</table>
<p>If an error occurs, the <code>error</code> instance has additional properties to help with debugging</p>
<ul>
<li><code>error.status</code> The http response status code</li>
<li><code>error.request</code> The request options such as <code>method</code>, <code>url</code> and <code>data</code></li>
<li><code>error.response</code> The http response object with <code>url</code>, <code>headers</code>, and <code>data</code></li>
</ul>
<h2 id="request.defaults"><code>request.defaults()</code></h2>
<p>Override or set default options. Example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">const</span> myrequest <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;@octokit/request&quot;</span>).<span class="at">defaults</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&quot;https://github-enterprise.acme-inc.com/api/v3&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="st">&quot;user-agent&quot;</span><span class="op">:</span> <span class="st">&quot;myApp/1.2.3&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-5" title="5">    <span class="dt">authorization</span><span class="op">:</span> <span class="vs">`token 0000000000000000000000000000000000000001`</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="dt">org</span><span class="op">:</span> <span class="st">&quot;my-project&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-8" title="8">  <span class="dt">per_page</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-10" title="10"></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="at">myrequest</span>(<span class="vs">`GET /orgs/{org}/repos`</span>)<span class="op">;</span></a></code></pre></div>
<p>You can call <code>.defaults()</code> again on the returned method, the defaults will cascade.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">const</span> myProjectRequest <span class="op">=</span> <span class="va">request</span>.<span class="at">defaults</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&quot;https://github-enterprise.acme-inc.com/api/v3&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-3" title="3">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="st">&quot;user-agent&quot;</span><span class="op">:</span> <span class="st">&quot;myApp/1.2.3&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-5" title="5">  <span class="op">},</span></a>
<a class="sourceLine" id="cb10-6" title="6">  <span class="dt">org</span><span class="op">:</span> <span class="st">&quot;my-project&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="kw">const</span> myProjectRequestWithAuth <span class="op">=</span> <span class="va">myProjectRequest</span>.<span class="at">defaults</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb10-9" title="9">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-10" title="10">    <span class="dt">authorization</span><span class="op">:</span> <span class="vs">`token 0000000000000000000000000000000000000001`</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-11" title="11">  <span class="op">},</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><code>myProjectRequest</code> now defaults the <code>baseUrl</code>, <code>headers['user-agent']</code>, <code>org</code> and <code>headers['authorization']</code> on top of <code>headers['accept']</code> that is set by the global default.</p>
<h2 id="request.endpoint"><code>request.endpoint</code></h2>
<p>See https://github.com/octokit/endpoint.js. Example</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> options <span class="op">=</span> <span class="va">request</span>.<span class="at">endpoint</span>(<span class="st">&quot;GET /orgs/{org}/repos&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="dt">org</span><span class="op">:</span> <span class="st">&quot;my-project&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;private&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">// {</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">//   method: &#39;GET&#39;,</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">//   url: &#39;https://api.github.com/orgs/my-project/repos?type=private&#39;,</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">//   headers: {</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">//     accept: &#39;application/vnd.github.v3+json&#39;,</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">//     authorization: &#39;token 0000000000000000000000000000000000000001&#39;,</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co">//     &#39;user-agent&#39;: &#39;octokit/endpoint.js v1.2.3&#39;</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">//   }</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">// }</span></a></code></pre></div>
<p>All of the <a href="https://github.com/octokit/endpoint.js"><code>@octokit/endpoint</code></a> API can be used:</p>
<ul>
<li><a href="#endpoint"><code>octokitRequest.endpoint()</code></a></li>
<li><a href="#endpointdefaults"><code>octokitRequest.endpoint.defaults()</code></a></li>
<li><a href="#endpointdefaults"><code>octokitRequest.endpoint.merge()</code></a></li>
<li><a href="#endpointmerge"><code>octokitRequest.endpoint.parse()</code></a></li>
</ul>
<h2 id="special-cases">Special cases</h2>
<p><a name="data-parameter"></a></p>
<h3 id="the-data-parameter-set-request-body-directly">The <code>data</code> parameter ‚Äì set request body directly</h3>
<p>Some endpoints such as <a href="https://developer.github.com/v3/markdown/#render-a-markdown-document-in-raw-mode">Render a Markdown document in raw mode</a> don‚Äôt have parameters that are sent as request body keys, instead the request body needs to be set directly. In these cases, set the <code>data</code> parameter.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">request</span>(<span class="st">&quot;POST /markdown/raw&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">data</span><span class="op">:</span> <span class="st">&quot;Hello world github/linguist#1 **cool**, and #1!&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="dt">accept</span><span class="op">:</span> <span class="st">&quot;text/html;charset=utf-8&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="st">&quot;content-type&quot;</span><span class="op">:</span> <span class="st">&quot;text/plain&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-8" title="8"></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">// Request is sent as</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">//</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">//     {</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">//       method: &#39;post&#39;,</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">//       url: &#39;https://api.github.com/markdown/raw&#39;,</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">//       headers: {</span></a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co">//         accept: &#39;text/html;charset=utf-8&#39;,</span></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co">//         &#39;content-type&#39;: &#39;text/plain&#39;,</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co">//         &#39;user-agent&#39;: userAgent</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">//       },</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co">//       body: &#39;Hello world github/linguist#1 **cool**, and #1!&#39;</span></a>
<a class="sourceLine" id="cb12-20" title="20"><span class="co">//     }</span></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="co">//</span></a>
<a class="sourceLine" id="cb12-22" title="22"><span class="co">// not as</span></a>
<a class="sourceLine" id="cb12-23" title="23"><span class="co">//</span></a>
<a class="sourceLine" id="cb12-24" title="24"><span class="co">//     {</span></a>
<a class="sourceLine" id="cb12-25" title="25"><span class="co">//       ...</span></a>
<a class="sourceLine" id="cb12-26" title="26"><span class="co">//       body: &#39;{&quot;data&quot;: &quot;Hello world github/linguist#1 **cool**, and #1!&quot;}&#39;</span></a>
<a class="sourceLine" id="cb12-27" title="27"><span class="co">//     }</span></a></code></pre></div>
<h3 id="set-parameters-for-both-the-urlquery-and-the-request-body">Set parameters for both the URL/query and the request body</h3>
<p>There are API endpoints that accept both query parameters as well as a body. In that case you need to add the query parameters as templates to <code>options.url</code>, as defined in the <a href="https://tools.ietf.org/html/rfc6570">RFC 6570 URI Template specification</a>.</p>
<p>Example</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="at">request</span>(</a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="st">&quot;POST https://uploads.github.com/repos/octocat/Hello-World/releases/1/assets{?name,label}&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-3" title="3">  <span class="op">{</span></a>
<a class="sourceLine" id="cb13-4" title="4">    <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;example.zip&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-5" title="5">    <span class="dt">label</span><span class="op">:</span> <span class="st">&quot;short description&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-6" title="6">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-7" title="7">      <span class="st">&quot;content-type&quot;</span><span class="op">:</span> <span class="st">&quot;text/plain&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-8" title="8">      <span class="st">&quot;content-length&quot;</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-9" title="9">      <span class="dt">authorization</span><span class="op">:</span> <span class="vs">`token 0000000000000000000000000000000000000001`</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-10" title="10">    <span class="op">},</span></a>
<a class="sourceLine" id="cb13-11" title="11">    <span class="dt">data</span><span class="op">:</span> <span class="st">&quot;Hello, world!&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-13" title="13">)<span class="op">;</span></a></code></pre></div>
<h2 id="license">LICENSE</h2>
<p><a href="LICENSE">MIT</a></p>
</body>
</html>
