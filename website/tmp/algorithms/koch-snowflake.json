{
  "slug": "koch-snowflake",
  "name": "Koch Snowflake",
  "categories": ["fractals"],
  "body": {},
  "implementations": {
    "python": {
      "dir": "fractals/koch_snowflake.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/fractals/koch_snowflake.py",
      "code": "<span class=\"hljs-string\">&quot;&quot;&quot;\nDescription\n    The Koch snowflake is a fractal curve and one of the earliest fractals to\n    have been described. The Koch snowflake can be built up iteratively, in a\n    sequence of stages. The first stage is an equilateral triangle, and each\n    successive stage is formed by adding outward bends to each side of the\n    previous stage, making smaller equilateral triangles.\n    This can be achieved through the following steps for each line:\n        1. divide the line segment into three segments of equal length.\n        2. draw an equilateral triangle that has the middle segment from step 1\n        as its base and points outward.\n        3. remove the line segment that is the base of the triangle from step 2.\n    (description adapted from https://en.wikipedia.org/wiki/Koch_snowflake )\n    (for a more detailed explanation and an implementation in the\n    Processing language, see  https://natureofcode.com/book/chapter-8-fractals/\n    #84-the-koch-curve-and-the-arraylist-technique )\n\nRequirements (pip):\n    - matplotlib\n    - numpy\n&quot;&quot;&quot;</span>\n\n\n<span class=\"hljs-keyword\">from</span> __future__ <span class=\"hljs-keyword\">import</span> annotations\n\n<span class=\"hljs-keyword\">import</span> matplotlib.pyplot <span class=\"hljs-keyword\">as</span> plt  <span class=\"hljs-comment\"># type: ignore</span>\n<span class=\"hljs-keyword\">import</span> numpy\n\n<span class=\"hljs-comment\"># initial triangle of Koch snowflake</span>\nVECTOR_1 = numpy.array([<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>])\nVECTOR_2 = numpy.array([<span class=\"hljs-number\">0.5</span>, <span class=\"hljs-number\">0.8660254</span>])\nVECTOR_3 = numpy.array([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>])\nINITIAL_VECTORS = [VECTOR_1, VECTOR_2, VECTOR_3, VECTOR_1]\n\n<span class=\"hljs-comment\"># uncomment for simple Koch curve instead of Koch snowflake</span>\n<span class=\"hljs-comment\"># INITIAL_VECTORS = [VECTOR_1, VECTOR_3]</span>\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">iterate</span>(<span class=\"hljs-params\">initial_vectors: <span class=\"hljs-built_in\">list</span>[numpy.ndarray], steps: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>[numpy.ndarray]:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Go through the number of iterations determined by the argument &quot;steps&quot;.\n    Be careful with high values (above 5) since the time to calculate increases\n    exponentially.\n    &gt;&gt;&gt; iterate([numpy.array([0, 0]), numpy.array([1, 0])], 1)\n    [array([0, 0]), array([0.33333333, 0.        ]), array([0.5       , \\\n0.28867513]), array([0.66666667, 0.        ]), array([1, 0])]\n    &quot;&quot;&quot;</span>\n    vectors = initial_vectors\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(steps):\n        vectors = iteration_step(vectors)\n    <span class=\"hljs-keyword\">return</span> vectors\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">iteration_step</span>(<span class=\"hljs-params\">vectors: <span class=\"hljs-built_in\">list</span>[numpy.ndarray]</span>) -&gt; <span class=\"hljs-built_in\">list</span>[numpy.ndarray]:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Loops through each pair of adjacent vectors. Each line between two adjacent\n    vectors is divided into 4 segments by adding 3 additional vectors in-between\n    the original two vectors. The vector in the middle is constructed through a\n    60 degree rotation so it is bent outwards.\n    &gt;&gt;&gt; iteration_step([numpy.array([0, 0]), numpy.array([1, 0])])\n    [array([0, 0]), array([0.33333333, 0.        ]), array([0.5       , \\\n0.28867513]), array([0.66666667, 0.        ]), array([1, 0])]\n    &quot;&quot;&quot;</span>\n    new_vectors = []\n    <span class=\"hljs-keyword\">for</span> i, start_vector <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(vectors[:-<span class=\"hljs-number\">1</span>]):\n        end_vector = vectors[i + <span class=\"hljs-number\">1</span>]\n        new_vectors.append(start_vector)\n        difference_vector = end_vector - start_vector\n        new_vectors.append(start_vector + difference_vector / <span class=\"hljs-number\">3</span>)\n        new_vectors.append(\n            start_vector + difference_vector / <span class=\"hljs-number\">3</span> + rotate(difference_vector / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">60</span>)\n        )\n        new_vectors.append(start_vector + difference_vector * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>)\n    new_vectors.append(vectors[-<span class=\"hljs-number\">1</span>])\n    <span class=\"hljs-keyword\">return</span> new_vectors\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">rotate</span>(<span class=\"hljs-params\">vector: numpy.ndarray, angle_in_degrees: <span class=\"hljs-built_in\">float</span></span>) -&gt; numpy.ndarray:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Standard rotation of a 2D vector with a rotation matrix\n    (see https://en.wikipedia.org/wiki/Rotation_matrix )\n    &gt;&gt;&gt; rotate(numpy.array([1, 0]), 60)\n    array([0.5      , 0.8660254])\n    &gt;&gt;&gt; rotate(numpy.array([1, 0]), 90)\n    array([6.123234e-17, 1.000000e+00])\n    &quot;&quot;&quot;</span>\n    theta = numpy.radians(angle_in_degrees)\n    c, s = numpy.cos(theta), numpy.sin(theta)\n    rotation_matrix = numpy.array(((c, -s), (s, c)))\n    <span class=\"hljs-keyword\">return</span> numpy.dot(rotation_matrix, vector)\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">plot</span>(<span class=\"hljs-params\">vectors: <span class=\"hljs-built_in\">list</span>[numpy.ndarray]</span>) -&gt; <span class=\"hljs-literal\">None</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Utility function to plot the vectors using matplotlib.pyplot\n    No doctest was implemented since this function does not have a return value\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-comment\"># avoid stretched display of graph</span>\n    axes = plt.gca()\n    axes.set_aspect(<span class=\"hljs-string\">&quot;equal&quot;</span>)\n\n    <span class=\"hljs-comment\"># matplotlib.pyplot.plot takes a list of all x-coordinates and a list of all</span>\n    <span class=\"hljs-comment\"># y-coordinates as inputs, which are constructed from the vector-list using</span>\n    <span class=\"hljs-comment\"># zip()</span>\n    x_coordinates, y_coordinates = <span class=\"hljs-built_in\">zip</span>(*vectors)\n    plt.plot(x_coordinates, y_coordinates)\n    plt.show()\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    <span class=\"hljs-keyword\">import</span> doctest\n\n    doctest.testmod()\n\n    processed_vectors = iterate(INITIAL_VECTORS, <span class=\"hljs-number\">5</span>)\n    plot(processed_vectors)\n"
    },
    "javascript": {
      "dir": "Recursive/KochSnowflake.js",
      "url": "https://github.com/TheAlgorithms/javascript/tree/master/Recursive/KochSnowflake.js",
      "code": "<span class=\"hljs-comment\">/**\n * The Koch snowflake is a fractal curve and one of the earliest fractals to have been described.\n * The Koch snowflake can be built up iteratively, in a sequence of stages. The first stage is an\n * equilateral triangle, and each successive stage is formed by adding outward bends to each side of\n * the previous stage, making smaller equilateral triangles. This can be achieved through the\n * following steps for each line: 1. divide the line segment into three segments of equal length. 2.\n * draw an equilateral triangle that has the middle segment from step 1 as its base and points\n * outward. 3. remove the line segment that is the base of the triangle from step 2. (description\n * adapted from https://en.wikipedia.org/wiki/Koch_snowflake ) (for a more detailed explanation and\n * an implementation in the Processing language, see\n * https://natureofcode.com/book/chapter-8-fractals/ #84-the-koch-curve-and-the-arraylist-technique\n * ).\n */</span>\n\n<span class=\"hljs-comment\">/*\nDoctests\nTest iterate-method\n&gt; iterate([new Vector2(0, 0), new Vector2(1, 0)], 1)[0];\n{&quot;x&quot;: 0, &quot;y&quot;: 0}\n&gt; iterate([new Vector2(0, 0), new Vector2(1, 0)], 1)[1];\n{&quot;x&quot;: 1/3, &quot;y&quot;: 0}\n&gt; iterate([new Vector2(0, 0), new Vector2(1, 0)], 1)[2];\n{&quot;x&quot;: 1/2, &quot;y&quot;: Math.sin(Math.PI / 3) / 3}\n&gt; iterate([new Vector2(0, 0), new Vector2(1, 0)], 1)[3];\n{&quot;x&quot;: 2/3, &quot;y&quot;: 0}\n&gt; iterate([new Vector2(0, 0), new Vector2(1, 0)], 1)[4];\n{&quot;x&quot;: 1, &quot;y&quot;: 0}\n*/</span>\n\n<span class=\"hljs-comment\">/** Class to handle the vector calculations. */</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Vector2</span> {\n  <span class=\"hljs-title function_\">constructor</span> (x, y) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">x</span> = x\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">y</span> = y\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Vector addition\n   *\n   * <span class=\"hljs-doctag\">@param</span> vector The vector to be added.\n   * <span class=\"hljs-doctag\">@returns</span> The sum-vector.\n   */</span>\n  add (vector) {\n    <span class=\"hljs-keyword\">const</span> x = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">x</span> + vector.<span class=\"hljs-property\">x</span>\n    <span class=\"hljs-keyword\">const</span> y = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">y</span> + vector.<span class=\"hljs-property\">y</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector</span>2(x, y)\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Vector subtraction\n   *\n   * <span class=\"hljs-doctag\">@param</span> vector The vector to be subtracted.\n   * <span class=\"hljs-doctag\">@returns</span> The difference-vector.\n   */</span>\n  subtract (vector) {\n    <span class=\"hljs-keyword\">const</span> x = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">x</span> - vector.<span class=\"hljs-property\">x</span>\n    <span class=\"hljs-keyword\">const</span> y = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">y</span> - vector.<span class=\"hljs-property\">y</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector</span>2(x, y)\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Vector scalar multiplication\n   *\n   * <span class=\"hljs-doctag\">@param</span> scalar The factor by which to multiply the vector.\n   * <span class=\"hljs-doctag\">@returns</span> The scaled vector.\n   */</span>\n  multiply (scalar) {\n    <span class=\"hljs-keyword\">const</span> x = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">x</span> * scalar\n    <span class=\"hljs-keyword\">const</span> y = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">y</span> * scalar\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector</span>2(x, y)\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Vector rotation (see https://en.wikipedia.org/wiki/Rotation_matrix)\n   *\n   * <span class=\"hljs-doctag\">@param</span> angleInDegrees The angle by which to rotate the vector.\n   * <span class=\"hljs-doctag\">@returns</span> The rotated vector.\n   */</span>\n  rotate (angleInDegrees) {\n    <span class=\"hljs-keyword\">const</span> radians = angleInDegrees * <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-property\">PI</span> / <span class=\"hljs-number\">180</span>\n    <span class=\"hljs-keyword\">const</span> ca = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">cos</span>(radians)\n    <span class=\"hljs-keyword\">const</span> sa = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">sin</span>(radians)\n    <span class=\"hljs-keyword\">const</span> x = ca * <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">x</span> - sa * <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">y</span>\n    <span class=\"hljs-keyword\">const</span> y = sa * <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">x</span> + ca * <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">y</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector</span>2(x, y)\n  }\n}\n\n<span class=\"hljs-comment\">/**\n * Method to render the Koch snowflake to a canvas.\n *\n * <span class=\"hljs-doctag\">@param</span> canvasWidth The width of the canvas.\n * <span class=\"hljs-doctag\">@param</span> steps The number of iterations.\n * <span class=\"hljs-doctag\">@returns</span> The canvas of the rendered Koch snowflake.\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getKochSnowflake</span> (canvasWidth = <span class=\"hljs-number\">600</span>, steps = <span class=\"hljs-number\">5</span>) {\n  <span class=\"hljs-keyword\">if</span> (canvasWidth &lt;= <span class=\"hljs-number\">0</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&#x27;canvasWidth should be greater than zero&#x27;</span>)\n  }\n\n  <span class=\"hljs-keyword\">const</span> offsetX = canvasWidth / <span class=\"hljs-number\">10.0</span>\n  <span class=\"hljs-keyword\">const</span> offsetY = canvasWidth / <span class=\"hljs-number\">3.7</span>\n  <span class=\"hljs-keyword\">const</span> vector1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector</span>2(offsetX, offsetY)\n  <span class=\"hljs-keyword\">const</span> vector2 =\n      <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector</span>2(canvasWidth / <span class=\"hljs-number\">2</span>, <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">sin</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-property\">PI</span> / <span class=\"hljs-number\">3</span>) * canvasWidth * <span class=\"hljs-number\">0.8</span> + offsetY)\n  <span class=\"hljs-keyword\">const</span> vector3 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector</span>2(canvasWidth - offsetX, offsetY)\n  <span class=\"hljs-keyword\">const</span> initialVectors = []\n  initialVectors.<span class=\"hljs-title function_\">push</span>(vector1)\n  initialVectors.<span class=\"hljs-title function_\">push</span>(vector2)\n  initialVectors.<span class=\"hljs-title function_\">push</span>(vector3)\n  initialVectors.<span class=\"hljs-title function_\">push</span>(vector1)\n  <span class=\"hljs-keyword\">const</span> vectors = <span class=\"hljs-title function_\">iterate</span>(initialVectors, steps)\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">drawToCanvas</span>(vectors, canvasWidth, canvasWidth)\n}\n\n<span class=\"hljs-comment\">/**\n * Utility-method to render the Koch snowflake to a canvas.\n *\n * <span class=\"hljs-doctag\">@param</span> vectors The vectors defining the edges to be rendered.\n * <span class=\"hljs-doctag\">@param</span> canvasWidth The width of the canvas.\n * <span class=\"hljs-doctag\">@param</span> canvasHeight The height of the canvas.\n * <span class=\"hljs-doctag\">@returns</span> The canvas of the rendered edges.\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">drawToCanvas</span> (vectors, canvasWidth, canvasHeight) {\n  <span class=\"hljs-keyword\">const</span> canvas = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&#x27;canvas&#x27;</span>)\n  canvas.<span class=\"hljs-property\">width</span> = canvasWidth\n  canvas.<span class=\"hljs-property\">height</span> = canvasHeight\n\n  <span class=\"hljs-comment\">// Draw the edges</span>\n  <span class=\"hljs-keyword\">const</span> ctx = canvas.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&#x27;2d&#x27;</span>)\n  ctx.<span class=\"hljs-title function_\">beginPath</span>()\n  ctx.<span class=\"hljs-title function_\">moveTo</span>(vectors[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">x</span>, vectors[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">y</span>)\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">1</span>; i &lt; vectors.<span class=\"hljs-property\">length</span>; i++) {\n    ctx.<span class=\"hljs-title function_\">lineTo</span>(vectors[i].<span class=\"hljs-property\">x</span>, vectors[i].<span class=\"hljs-property\">y</span>)\n  }\n  ctx.<span class=\"hljs-title function_\">stroke</span>()\n\n  <span class=\"hljs-keyword\">return</span> canvas\n}\n\n<span class=\"hljs-comment\">/**\n * Go through the number of iterations determined by the argument &quot;steps&quot;. Be careful with high\n * values (above 5) since the time to calculate increases exponentially.\n *\n * <span class=\"hljs-doctag\">@param</span> initialVectors The vectors composing the shape to which the algorithm is applied.\n * <span class=\"hljs-doctag\">@param</span> steps The number of iterations.\n * <span class=\"hljs-doctag\">@returns</span> The transformed vectors after the iteration-steps.\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">iterate</span> (initialVectors, steps) {\n  <span class=\"hljs-keyword\">let</span> vectors = initialVectors\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; steps; i++) {\n    vectors = <span class=\"hljs-title function_\">iterationStep</span>(vectors)\n  }\n\n  <span class=\"hljs-keyword\">return</span> vectors\n}\n\n<span class=\"hljs-comment\">/**\n * Loops through each pair of adjacent vectors. Each line between two adjacent vectors is divided\n * into 4 segments by adding 3 additional vectors in-between the original two vectors. The vector\n * in the middle is constructed through a 60 degree rotation so it is bent outwards.\n *\n * <span class=\"hljs-doctag\">@param</span> vectors The vectors composing the shape to which the algorithm is applied.\n * <span class=\"hljs-doctag\">@returns</span> The transformed vectors after the iteration-step.\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">iterationStep</span> (vectors) {\n  <span class=\"hljs-keyword\">const</span> newVectors = []\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; vectors.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>; i++) {\n    <span class=\"hljs-keyword\">const</span> startVector = vectors[i]\n    <span class=\"hljs-keyword\">const</span> endVector = vectors[i + <span class=\"hljs-number\">1</span>]\n    newVectors.<span class=\"hljs-title function_\">push</span>(startVector)\n    <span class=\"hljs-keyword\">const</span> differenceVector = endVector.<span class=\"hljs-title function_\">subtract</span>(startVector).<span class=\"hljs-title function_\">multiply</span>(<span class=\"hljs-number\">1</span> / <span class=\"hljs-number\">3</span>)\n    newVectors.<span class=\"hljs-title function_\">push</span>(startVector.<span class=\"hljs-title function_\">add</span>(differenceVector))\n    newVectors.<span class=\"hljs-title function_\">push</span>(startVector.<span class=\"hljs-title function_\">add</span>(differenceVector).<span class=\"hljs-title function_\">add</span>(differenceVector.<span class=\"hljs-title function_\">rotate</span>(<span class=\"hljs-number\">60</span>)))\n    newVectors.<span class=\"hljs-title function_\">push</span>(startVector.<span class=\"hljs-title function_\">add</span>(differenceVector.<span class=\"hljs-title function_\">multiply</span>(<span class=\"hljs-number\">2</span>)))\n  }\n\n  newVectors.<span class=\"hljs-title function_\">push</span>(vectors[vectors.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>])\n  <span class=\"hljs-keyword\">return</span> newVectors\n}\n\n<span class=\"hljs-comment\">// plot the results if the script is executed in a browser with a window-object</span>\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-variable language_\">window</span> !== <span class=\"hljs-string\">&#x27;undefined&#x27;</span>) {\n  <span class=\"hljs-keyword\">const</span> canvas = <span class=\"hljs-title function_\">getKochSnowflake</span>()\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">append</span>(canvas)\n}\n"
    },
    "java": {
      "dir": "Others/KochSnowflake.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/Others/KochSnowflake.java",
      "code": "<span class=\"hljs-keyword\">package</span> Others;\n\n<span class=\"hljs-keyword\">import</span> java.awt.*;\n<span class=\"hljs-keyword\">import</span> java.awt.image.BufferedImage;\n<span class=\"hljs-keyword\">import</span> java.io.File;\n<span class=\"hljs-keyword\">import</span> java.io.IOException;\n<span class=\"hljs-keyword\">import</span> java.util.ArrayList;\n<span class=\"hljs-keyword\">import</span> javax.imageio.ImageIO;\n\n<span class=\"hljs-comment\">/**\n * The Koch snowflake is a fractal curve and one of the earliest fractals to have been described.\n * The Koch snowflake can be built up iteratively, in a sequence of stages. The first stage is an\n * equilateral triangle, and each successive stage is formed by adding outward bends to each side of\n * the previous stage, making smaller equilateral triangles. This can be achieved through the\n * following steps for each line: 1. divide the line segment into three segments of equal length. 2.\n * draw an equilateral triangle that has the middle segment from step 1 as its base and points\n * outward. 3. remove the line segment that is the base of the triangle from step 2. (description\n * adapted from https://en.wikipedia.org/wiki/Koch_snowflake ) (for a more detailed explanation and\n * an implementation in the Processing language, see\n * https://natureofcode.com/book/chapter-8-fractals/ #84-the-koch-curve-and-the-arraylist-technique\n * ).\n */</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">KochSnowflake</span> {\n\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n    <span class=\"hljs-comment\">// Test Iterate-method</span>\n    ArrayList&lt;Vector2&gt; vectors = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;Vector2&gt;();\n    vectors.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>));\n    vectors.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>));\n    ArrayList&lt;Vector2&gt; result = Iterate(vectors, <span class=\"hljs-number\">1</span>);\n\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">0</span>).x == <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">0</span>).y == <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">1</span>).x == <span class=\"hljs-number\">1.</span> / <span class=\"hljs-number\">3</span>;\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">1</span>).y == <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">2</span>).x == <span class=\"hljs-number\">1.</span> / <span class=\"hljs-number\">2</span>;\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">2</span>).y == Math.sin(Math.PI / <span class=\"hljs-number\">3</span>) / <span class=\"hljs-number\">3</span>;\n\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">3</span>).x == <span class=\"hljs-number\">2.</span> / <span class=\"hljs-number\">3</span>;\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">3</span>).y == <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">4</span>).x == <span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">assert</span> result.get(<span class=\"hljs-number\">4</span>).y == <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-comment\">// Test GetKochSnowflake-method</span>\n    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">imageWidth</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">600</span>;\n    <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">offsetX</span> <span class=\"hljs-operator\">=</span> imageWidth / <span class=\"hljs-number\">10.</span>;\n    <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">offsetY</span> <span class=\"hljs-operator\">=</span> imageWidth / <span class=\"hljs-number\">3.7</span>;\n    <span class=\"hljs-type\">BufferedImage</span> <span class=\"hljs-variable\">image</span> <span class=\"hljs-operator\">=</span> GetKochSnowflake(imageWidth, <span class=\"hljs-number\">5</span>);\n\n    <span class=\"hljs-comment\">// The background should be white</span>\n    <span class=\"hljs-keyword\">assert</span> image.getRGB(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>) == <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Color</span>(<span class=\"hljs-number\">255</span>, <span class=\"hljs-number\">255</span>, <span class=\"hljs-number\">255</span>).getRGB();\n\n    <span class=\"hljs-comment\">// The snowflake is drawn in black and this is the position of the first vector</span>\n    <span class=\"hljs-keyword\">assert</span> image.getRGB((<span class=\"hljs-type\">int</span>) offsetX, (<span class=\"hljs-type\">int</span>) offsetY) == <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Color</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>).getRGB();\n\n    <span class=\"hljs-comment\">// Save image</span>\n    <span class=\"hljs-keyword\">try</span> {\n      ImageIO.write(image, <span class=\"hljs-string\">&quot;png&quot;</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;KochSnowflake.png&quot;</span>));\n    } <span class=\"hljs-keyword\">catch</span> (IOException e) {\n      e.printStackTrace();\n    }\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Go through the number of iterations determined by the argument &quot;steps&quot;. Be careful with high\n   * values (above 5) since the time to calculate increases exponentially.\n   *\n   * <span class=\"hljs-doctag\">@param</span> initialVectors The vectors composing the shape to which the algorithm is applied.\n   * <span class=\"hljs-doctag\">@param</span> steps The number of iterations.\n   * <span class=\"hljs-doctag\">@return</span> The transformed vectors after the iteration-steps.\n   */</span>\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> ArrayList&lt;Vector2&gt; <span class=\"hljs-title function_\">Iterate</span><span class=\"hljs-params\">(ArrayList&lt;Vector2&gt; initialVectors, <span class=\"hljs-type\">int</span> steps)</span> {\n    ArrayList&lt;Vector2&gt; vectors = initialVectors;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; steps; i++) {\n      vectors = IterationStep(vectors);\n    }\n\n    <span class=\"hljs-keyword\">return</span> vectors;\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Method to render the Koch snowflake to a image.\n   *\n   * <span class=\"hljs-doctag\">@param</span> imageWidth The width of the rendered image.\n   * <span class=\"hljs-doctag\">@param</span> steps The number of iterations.\n   * <span class=\"hljs-doctag\">@return</span> The image of the rendered Koch snowflake.\n   */</span>\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> BufferedImage <span class=\"hljs-title function_\">GetKochSnowflake</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> imageWidth, <span class=\"hljs-type\">int</span> steps)</span> {\n    <span class=\"hljs-keyword\">if</span> (imageWidth &lt;= <span class=\"hljs-number\">0</span>) {\n      <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IllegalArgumentException</span>(<span class=\"hljs-string\">&quot;imageWidth should be greater than zero&quot;</span>);\n    }\n\n    <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">offsetX</span> <span class=\"hljs-operator\">=</span> imageWidth / <span class=\"hljs-number\">10.</span>;\n    <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">offsetY</span> <span class=\"hljs-operator\">=</span> imageWidth / <span class=\"hljs-number\">3.7</span>;\n    <span class=\"hljs-type\">Vector2</span> <span class=\"hljs-variable\">vector1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(offsetX, offsetY);\n    <span class=\"hljs-type\">Vector2</span> <span class=\"hljs-variable\">vector2</span> <span class=\"hljs-operator\">=</span>\n        <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(imageWidth / <span class=\"hljs-number\">2</span>, Math.sin(Math.PI / <span class=\"hljs-number\">3</span>) * imageWidth * <span class=\"hljs-number\">0.8</span> + offsetY);\n    <span class=\"hljs-type\">Vector2</span> <span class=\"hljs-variable\">vector3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(imageWidth - offsetX, offsetY);\n    ArrayList&lt;Vector2&gt; initialVectors = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;Vector2&gt;();\n    initialVectors.add(vector1);\n    initialVectors.add(vector2);\n    initialVectors.add(vector3);\n    initialVectors.add(vector1);\n    ArrayList&lt;Vector2&gt; vectors = Iterate(initialVectors, steps);\n    <span class=\"hljs-keyword\">return</span> GetImage(vectors, imageWidth, imageWidth);\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Loops through each pair of adjacent vectors. Each line between two adjacent vectors is divided\n   * into 4 segments by adding 3 additional vectors in-between the original two vectors. The vector\n   * in the middle is constructed through a 60 degree rotation so it is bent outwards.\n   *\n   * <span class=\"hljs-doctag\">@param</span> vectors The vectors composing the shape to which the algorithm is applied.\n   * <span class=\"hljs-doctag\">@return</span> The transformed vectors after the iteration-step.\n   */</span>\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> ArrayList&lt;Vector2&gt; <span class=\"hljs-title function_\">IterationStep</span><span class=\"hljs-params\">(ArrayList&lt;Vector2&gt; vectors)</span> {\n    ArrayList&lt;Vector2&gt; newVectors = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;Vector2&gt;();\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; vectors.size() - <span class=\"hljs-number\">1</span>; i++) {\n      <span class=\"hljs-type\">Vector2</span> <span class=\"hljs-variable\">startVector</span> <span class=\"hljs-operator\">=</span> vectors.get(i);\n      <span class=\"hljs-type\">Vector2</span> <span class=\"hljs-variable\">endVector</span> <span class=\"hljs-operator\">=</span> vectors.get(i + <span class=\"hljs-number\">1</span>);\n      newVectors.add(startVector);\n      <span class=\"hljs-type\">Vector2</span> <span class=\"hljs-variable\">differenceVector</span> <span class=\"hljs-operator\">=</span> endVector.subtract(startVector).multiply(<span class=\"hljs-number\">1.</span> / <span class=\"hljs-number\">3</span>);\n      newVectors.add(startVector.add(differenceVector));\n      newVectors.add(startVector.add(differenceVector).add(differenceVector.rotate(<span class=\"hljs-number\">60</span>)));\n      newVectors.add(startVector.add(differenceVector.multiply(<span class=\"hljs-number\">2</span>)));\n    }\n\n    newVectors.add(vectors.get(vectors.size() - <span class=\"hljs-number\">1</span>));\n    <span class=\"hljs-keyword\">return</span> newVectors;\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Utility-method to render the Koch snowflake to an image.\n   *\n   * <span class=\"hljs-doctag\">@param</span> vectors The vectors defining the edges to be rendered.\n   * <span class=\"hljs-doctag\">@param</span> imageWidth The width of the rendered image.\n   * <span class=\"hljs-doctag\">@param</span> imageHeight The height of the rendered image.\n   * <span class=\"hljs-doctag\">@return</span> The image of the rendered edges.\n   */</span>\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> BufferedImage <span class=\"hljs-title function_\">GetImage</span><span class=\"hljs-params\">(\n      ArrayList&lt;Vector2&gt; vectors, <span class=\"hljs-type\">int</span> imageWidth, <span class=\"hljs-type\">int</span> imageHeight)</span> {\n    <span class=\"hljs-type\">BufferedImage</span> <span class=\"hljs-variable\">image</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BufferedImage</span>(imageWidth, imageHeight, BufferedImage.TYPE_INT_RGB);\n    <span class=\"hljs-type\">Graphics2D</span> <span class=\"hljs-variable\">g2d</span> <span class=\"hljs-operator\">=</span> image.createGraphics();\n\n    <span class=\"hljs-comment\">// Set the background white</span>\n    g2d.setBackground(Color.WHITE);\n    g2d.fillRect(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, imageWidth, imageHeight);\n\n    <span class=\"hljs-comment\">// Draw the edges</span>\n    g2d.setColor(Color.BLACK);\n    <span class=\"hljs-type\">BasicStroke</span> <span class=\"hljs-variable\">bs</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BasicStroke</span>(<span class=\"hljs-number\">1</span>);\n    g2d.setStroke(bs);\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; vectors.size() - <span class=\"hljs-number\">1</span>; i++) {\n      <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">x1</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-type\">int</span>) vectors.get(i).x;\n      <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">y1</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-type\">int</span>) vectors.get(i).y;\n      <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">x2</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-type\">int</span>) vectors.get(i + <span class=\"hljs-number\">1</span>).x;\n      <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">y2</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-type\">int</span>) vectors.get(i + <span class=\"hljs-number\">1</span>).y;\n\n      g2d.drawLine(x1, y1, x2, y2);\n    }\n\n    <span class=\"hljs-keyword\">return</span> image;\n  }\n\n  <span class=\"hljs-comment\">/** Inner class to handle the vector calculations. */</span>\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Vector2</span> {\n\n    <span class=\"hljs-type\">double</span> x, y;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Vector2</span><span class=\"hljs-params\">(<span class=\"hljs-type\">double</span> x, <span class=\"hljs-type\">double</span> y)</span> {\n      <span class=\"hljs-built_in\">this</span>.x = x;\n      <span class=\"hljs-built_in\">this</span>.y = y;\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> {\n      <span class=\"hljs-keyword\">return</span> String.format(<span class=\"hljs-string\">&quot;[%f, %f]&quot;</span>, <span class=\"hljs-built_in\">this</span>.x, <span class=\"hljs-built_in\">this</span>.y);\n    }\n\n    <span class=\"hljs-comment\">/**\n     * Vector addition\n     *\n     * <span class=\"hljs-doctag\">@param</span> vector The vector to be added.\n     * <span class=\"hljs-doctag\">@return</span> The sum-vector.\n     */</span>\n    <span class=\"hljs-keyword\">public</span> Vector2 <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">(Vector2 vector)</span> {\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">x</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">this</span>.x + vector.x;\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">y</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">this</span>.y + vector.y;\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(x, y);\n    }\n\n    <span class=\"hljs-comment\">/**\n     * Vector subtraction\n     *\n     * <span class=\"hljs-doctag\">@param</span> vector The vector to be subtracted.\n     * <span class=\"hljs-doctag\">@return</span> The difference-vector.\n     */</span>\n    <span class=\"hljs-keyword\">public</span> Vector2 <span class=\"hljs-title function_\">subtract</span><span class=\"hljs-params\">(Vector2 vector)</span> {\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">x</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">this</span>.x - vector.x;\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">y</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">this</span>.y - vector.y;\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(x, y);\n    }\n\n    <span class=\"hljs-comment\">/**\n     * Vector scalar multiplication\n     *\n     * <span class=\"hljs-doctag\">@param</span> scalar The factor by which to multiply the vector.\n     * <span class=\"hljs-doctag\">@return</span> The scaled vector.\n     */</span>\n    <span class=\"hljs-keyword\">public</span> Vector2 <span class=\"hljs-title function_\">multiply</span><span class=\"hljs-params\">(<span class=\"hljs-type\">double</span> scalar)</span> {\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">x</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">this</span>.x * scalar;\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">y</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">this</span>.y * scalar;\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(x, y);\n    }\n\n    <span class=\"hljs-comment\">/**\n     * Vector rotation (see https://en.wikipedia.org/wiki/Rotation_matrix)\n     *\n     * <span class=\"hljs-doctag\">@param</span> angleInDegrees The angle by which to rotate the vector.\n     * <span class=\"hljs-doctag\">@return</span> The rotated vector.\n     */</span>\n    <span class=\"hljs-keyword\">public</span> Vector2 <span class=\"hljs-title function_\">rotate</span><span class=\"hljs-params\">(<span class=\"hljs-type\">double</span> angleInDegrees)</span> {\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">radians</span> <span class=\"hljs-operator\">=</span> angleInDegrees * Math.PI / <span class=\"hljs-number\">180</span>;\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">ca</span> <span class=\"hljs-operator\">=</span> Math.cos(radians);\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">sa</span> <span class=\"hljs-operator\">=</span> Math.sin(radians);\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">x</span> <span class=\"hljs-operator\">=</span> ca * <span class=\"hljs-built_in\">this</span>.x - sa * <span class=\"hljs-built_in\">this</span>.y;\n      <span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">y</span> <span class=\"hljs-operator\">=</span> sa * <span class=\"hljs-built_in\">this</span>.x + ca * <span class=\"hljs-built_in\">this</span>.y;\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vector2</span>(x, y);\n    }\n  }\n}\n"
    },
    "c-sharp": {
      "dir": "Algorithms/Other/KochSnowflake.cs",
      "url": "https://github.com/TheAlgorithms/C-Sharp/blob/master/Algorithms/Other/KochSnowflake.cs",
      "code": "<span class=\"hljs-keyword\">using</span> System;\n<span class=\"hljs-keyword\">using</span> System.Collections.Generic;\n<span class=\"hljs-keyword\">using</span> System.Drawing;\n<span class=\"hljs-keyword\">using</span> System.Numerics;\n\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">Algorithms.Other</span>\n{\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span></span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     The Koch snowflake is a fractal curve and one of the earliest fractals to</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     have been described. The Koch snowflake can be built up iteratively, in a</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     sequence of stages. The first stage is an equilateral triangle, and each</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     successive stage is formed by adding outward bends to each side of the</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     previous stage, making smaller equilateral triangles.</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     This can be achieved through the following steps for each line:</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     1. divide the line segment into three segments of equal length.</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     2. draw an equilateral triangle that has the middle segment from step 1</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     as its base and points outward.</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     3. remove the line segment that is the base of the triangle from step 2.</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     (description adapted from https://en.wikipedia.org/wiki/Koch_snowflake )</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     (for a more detailed explanation and an implementation in the</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     Processing language, see  https://natureofcode.com/book/chapter-8-fractals/</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     #84-the-koch-curve-and-the-arraylist-technique ).</span>\n    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/summary&gt;</span></span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">KochSnowflake</span>\n    {\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     Go through the number of iterations determined by the argument &quot;steps&quot;.</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     Be careful with high values (above 5) since the time to calculate increases</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     exponentially.</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;initialVectors&quot;&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     The vectors composing the shape to which</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     the algorithm is applied.</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;steps&quot;&gt;</span>The number of iterations.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;returns&gt;</span>The transformed vectors after the iteration-steps.<span class=\"hljs-doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> List&lt;Vector2&gt; <span class=\"hljs-title\">Iterate</span>(<span class=\"hljs-params\">List&lt;Vector2&gt; initialVectors, <span class=\"hljs-built_in\">int</span> steps = <span class=\"hljs-number\">5</span></span>)</span>\n        {\n            List&lt;Vector2&gt; vectors = initialVectors;\n            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; steps; i++)\n            {\n                vectors = IterationStep(vectors);\n            }\n\n            <span class=\"hljs-keyword\">return</span> vectors;\n        }\n\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     Method to render the Koch snowflake to a bitmap. To save the</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     bitmap the command &#x27;GetKochSnowflake().Save(&quot;KochSnowflake.png&quot;)&#x27; can be used.</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;bitmapWidth&quot;&gt;</span>The width of the rendered bitmap.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;steps&quot;&gt;</span>The number of iterations.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;returns&gt;</span>The bitmap of the rendered Koch snowflake.<span class=\"hljs-doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Bitmap <span class=\"hljs-title\">GetKochSnowflake</span>(<span class=\"hljs-params\">\n            <span class=\"hljs-built_in\">int</span> bitmapWidth = <span class=\"hljs-number\">600</span>,\n            <span class=\"hljs-built_in\">int</span> steps = <span class=\"hljs-number\">5</span></span>)</span>\n        {\n            <span class=\"hljs-keyword\">if</span> (bitmapWidth &lt;= <span class=\"hljs-number\">0</span>)\n            {\n                <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> ArgumentOutOfRangeException(\n                    <span class=\"hljs-keyword\">nameof</span>(bitmapWidth),\n                    <span class=\"hljs-string\">$&quot;<span class=\"hljs-subst\">{<span class=\"hljs-keyword\">nameof</span>(bitmapWidth)}</span> should be greater than zero&quot;</span>);\n            }\n\n            <span class=\"hljs-keyword\">var</span> offsetX = bitmapWidth / <span class=\"hljs-number\">10f</span>;\n            <span class=\"hljs-keyword\">var</span> offsetY = bitmapWidth / <span class=\"hljs-number\">3.7f</span>;\n            <span class=\"hljs-keyword\">var</span> vector1 = <span class=\"hljs-keyword\">new</span> Vector2(offsetX, offsetY);\n            <span class=\"hljs-keyword\">var</span> vector2 = <span class=\"hljs-keyword\">new</span> Vector2(bitmapWidth / <span class=\"hljs-number\">2</span>, (<span class=\"hljs-built_in\">float</span>)Math.Sin(Math.PI / <span class=\"hljs-number\">3</span>) * bitmapWidth * <span class=\"hljs-number\">0.8f</span> + offsetY);\n            <span class=\"hljs-keyword\">var</span> vector3 = <span class=\"hljs-keyword\">new</span> Vector2(bitmapWidth - offsetX, offsetY);\n            List&lt;Vector2&gt; initialVectors = <span class=\"hljs-keyword\">new</span>() { vector1, vector2, vector3, vector1 };\n            List&lt;Vector2&gt; vectors = Iterate(initialVectors, steps);\n            <span class=\"hljs-keyword\">return</span> GetBitmap(vectors, bitmapWidth, bitmapWidth);\n        }\n\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     Loops through each pair of adjacent vectors. Each line between two adjacent</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     vectors is divided into 4 segments by adding 3 additional vectors in-between</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     the original two vectors. The vector in the middle is constructed through a</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     60 degree rotation so it is bent outwards.</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;vectors&quot;&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     The vectors composing the shape to which</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     the algorithm is applied.</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;returns&gt;</span>The transformed vectors after the iteration-step.<span class=\"hljs-doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> List&lt;Vector2&gt; <span class=\"hljs-title\">IterationStep</span>(<span class=\"hljs-params\">List&lt;Vector2&gt; vectors</span>)</span>\n        {\n            List&lt;Vector2&gt; newVectors = <span class=\"hljs-keyword\">new</span>();\n            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; vectors.Count - <span class=\"hljs-number\">1</span>; i++)\n            {\n                <span class=\"hljs-keyword\">var</span> startVector = vectors[i];\n                <span class=\"hljs-keyword\">var</span> endVector = vectors[i + <span class=\"hljs-number\">1</span>];\n                newVectors.Add(startVector);\n                <span class=\"hljs-keyword\">var</span> differenceVector = endVector - startVector;\n                newVectors.Add(startVector + differenceVector / <span class=\"hljs-number\">3</span>);\n                newVectors.Add(startVector + differenceVector / <span class=\"hljs-number\">3</span> + Rotate(differenceVector / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">60</span>));\n                newVectors.Add(startVector + differenceVector * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>);\n            }\n\n            newVectors.Add(vectors[^<span class=\"hljs-number\">1</span>]);\n            <span class=\"hljs-keyword\">return</span> newVectors;\n        }\n\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     Standard rotation of a 2D vector with a rotation matrix</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     (see https://en.wikipedia.org/wiki/Rotation_matrix ).</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;vector&quot;&gt;</span>The vector to be rotated.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;angleInDegrees&quot;&gt;</span>The angle by which to rotate the vector.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;returns&gt;</span>The rotated vector.<span class=\"hljs-doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> Vector2 <span class=\"hljs-title\">Rotate</span>(<span class=\"hljs-params\">Vector2 vector, <span class=\"hljs-built_in\">float</span> angleInDegrees</span>)</span>\n        {\n            <span class=\"hljs-keyword\">var</span> radians = angleInDegrees * (<span class=\"hljs-built_in\">float</span>)Math.PI / <span class=\"hljs-number\">180</span>;\n            <span class=\"hljs-keyword\">var</span> ca = (<span class=\"hljs-built_in\">float</span>)Math.Cos(radians);\n            <span class=\"hljs-keyword\">var</span> sa = (<span class=\"hljs-built_in\">float</span>)Math.Sin(radians);\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> Vector2(ca * vector.X - sa * vector.Y, sa * vector.X + ca * vector.Y);\n        }\n\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span>     Utility-method to render the Koch snowflake to a bitmap.</span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;vectors&quot;&gt;</span>The vectors defining the edges to be rendered.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;bitmapWidth&quot;&gt;</span>The width of the rendered bitmap.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;param name=&quot;bitmapHeight&quot;&gt;</span>The height of the rendered bitmap.<span class=\"hljs-doctag\">&lt;/param&gt;</span></span>\n        <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;returns&gt;</span>The bitmap of the rendered edges.<span class=\"hljs-doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> Bitmap <span class=\"hljs-title\">GetBitmap</span>(<span class=\"hljs-params\">\n            List&lt;Vector2&gt; vectors,\n            <span class=\"hljs-built_in\">int</span> bitmapWidth,\n            <span class=\"hljs-built_in\">int</span> bitmapHeight</span>)</span>\n        {\n            Bitmap bitmap = <span class=\"hljs-keyword\">new</span>(bitmapWidth, bitmapHeight);\n\n            <span class=\"hljs-keyword\">using</span> (Graphics graphics = Graphics.FromImage(bitmap))\n            {\n                <span class=\"hljs-comment\">// Set the background white</span>\n                <span class=\"hljs-keyword\">var</span> imageSize = <span class=\"hljs-keyword\">new</span> Rectangle(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, bitmapWidth, bitmapHeight);\n                graphics.FillRectangle(Brushes.White, imageSize);\n\n                <span class=\"hljs-comment\">// Draw the edges</span>\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; vectors.Count - <span class=\"hljs-number\">1</span>; i++)\n                {\n                    Pen blackPen = <span class=\"hljs-keyword\">new</span>(Color.Black, <span class=\"hljs-number\">1</span>);\n\n                    <span class=\"hljs-keyword\">var</span> x1 = vectors[i].X;\n                    <span class=\"hljs-keyword\">var</span> y1 = vectors[i].Y;\n                    <span class=\"hljs-keyword\">var</span> x2 = vectors[i + <span class=\"hljs-number\">1</span>].X;\n                    <span class=\"hljs-keyword\">var</span> y2 = vectors[i + <span class=\"hljs-number\">1</span>].Y;\n\n                    graphics.DrawLine(blackPen, x1, y1, x2, y2);\n                }\n            }\n\n            <span class=\"hljs-keyword\">return</span> bitmap;\n        }\n    }\n}\n"
    }
  },
  "contributors": [
    {
      "name": "Andrii Siriak",
      "email": "siryaka@gmail.com",
      "commits": 1
    },
    {
      "name": "algobytewise",
      "email": "algobytewise@gmail.com",
      "commits": 4
    }
  ],
  "explanationUrl": {}
}
