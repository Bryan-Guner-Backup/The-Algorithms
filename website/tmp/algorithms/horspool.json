{
  "slug": "horspool",
  "name": "Horspool",
  "categories": ["strings"],
  "body": {},
  "implementations": {
    "c-plus-plus": {
      "dir": "strings/horspool.cpp",
      "url": "https://github.com/TheAlgorithms/c-plus-plus/tree/master/strings/horspool.cpp",
      "code": "<span class=\"hljs-comment\">/**\n * @file\n * @brief Horspool&#x27;s algorithm that finds if a string contains a substring (https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore%E2%80%93Horspool_algorithm)\n * @author [Harry Kontakis](https://github.com/ckontakis)\n */</span>\n\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span></span>\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;unordered_map&gt;</span></span>\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cassert&gt;</span></span>\n\n<span class=\"hljs-comment\">/**\n * @namespace strings\n * @brief Algorithms with strings\n */</span>\n<span class=\"hljs-keyword\">namespace</span> strings {\n<span class=\"hljs-comment\">/**\n * @namespace horspool\n * @brief Functions for [Horspool&#x27;s](https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore%E2%80%93Horspool_algorithm) algorithm\n */</span>\n<span class=\"hljs-keyword\">namespace</span> horspool {\n<span class=\"hljs-comment\">/**\n * A function that finds the shift table of the given prototype string that we need in Horpool&#x27;s algorithm.\n * @param prototype is the substring that we use to find shift table\n * @return Shift Table of Horspool&#x27;s algorithm\n */</span>\n<span class=\"hljs-function\">std::unordered_map&lt;<span class=\"hljs-type\">char</span>, <span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">findShiftTable</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">const</span> std::string &amp;prototype)</span> </span>{\n    std::unordered_map&lt;<span class=\"hljs-type\">char</span>, <span class=\"hljs-type\">int</span>&gt;\n        shiftTable;  <span class=\"hljs-comment\">// A HashMap for shift table that has characters for keys and integers for values</span>\n\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; prototype.<span class=\"hljs-built_in\">size</span>();\n         i++) {  <span class=\"hljs-comment\">// Checking all characters of prototype string</span>\n        <span class=\"hljs-keyword\">if</span> (shiftTable.<span class=\"hljs-built_in\">find</span>(prototype[i]) ==\n            shiftTable.<span class=\"hljs-built_in\">end</span>()) {  <span class=\"hljs-comment\">// If character does not exist in HashMap</span>\n            <span class=\"hljs-keyword\">if</span> (i != prototype.<span class=\"hljs-built_in\">size</span>() - <span class=\"hljs-number\">1</span>) {\n                shiftTable.<span class=\"hljs-built_in\">insert</span>(std::<span class=\"hljs-built_in\">make_pair</span>(\n                    prototype[i], prototype.<span class=\"hljs-built_in\">size</span>() - i -\n                                      <span class=\"hljs-number\">1</span>));  <span class=\"hljs-comment\">// Insert the character as key and the size of prototype string - index of character - 1 as value</span>\n            } <span class=\"hljs-keyword\">else</span> {\n                shiftTable.<span class=\"hljs-built_in\">insert</span>(std::<span class=\"hljs-built_in\">make_pair</span>(\n                    prototype[i],\n                    prototype.<span class=\"hljs-built_in\">size</span>()));  <span class=\"hljs-comment\">// Insert the character as key and the size of prototype string as value</span>\n            }\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">if</span> (i != prototype.<span class=\"hljs-built_in\">size</span>() - <span class=\"hljs-number\">1</span>) {\n                shiftTable[prototype[i]] = prototype.<span class=\"hljs-built_in\">size</span>() - i - <span class=\"hljs-number\">1</span>;\n            }\n        }\n    }\n    <span class=\"hljs-keyword\">return</span> shiftTable;\n}\n\n<span class=\"hljs-comment\">/**\n * A function that implements Horspool&#x27;s algorithm.\n * @param text is the string that we are searching if there is a substring\n * @param prototype is the substring that we are searching in text\n * @returns true if text string contains prototype string\n * @returns false if text string does not contain prototype string\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">horspool</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">const</span> std::string &amp;text, <span class=\"hljs-keyword\">const</span> std::string &amp;prototype)</span> </span>{\n    std::unordered_map&lt;<span class=\"hljs-type\">char</span>, <span class=\"hljs-type\">int</span>&gt; shiftTable = <span class=\"hljs-built_in\">findShiftTable</span>(\n        prototype);  <span class=\"hljs-comment\">// Initialise shift table calling findShiftTable function</span>\n\n    <span class=\"hljs-type\">int</span> i = <span class=\"hljs-built_in\">static_cast</span>&lt;<span class=\"hljs-type\">int</span>&gt;(\n        prototype.<span class=\"hljs-built_in\">size</span>() -\n        <span class=\"hljs-number\">1</span>);  <span class=\"hljs-comment\">// Index that we shift in text to find the substring</span>\n    <span class=\"hljs-keyword\">while</span> (i &lt; text.<span class=\"hljs-built_in\">size</span>()) {\n        <span class=\"hljs-type\">int</span> j = i, k = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-type\">bool</span> flag = <span class=\"hljs-literal\">true</span>;\n\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> z = <span class=\"hljs-built_in\">static_cast</span>&lt;<span class=\"hljs-type\">int</span>&gt;(prototype.<span class=\"hljs-built_in\">size</span>() - <span class=\"hljs-number\">1</span>); z &gt;= <span class=\"hljs-number\">0</span> &amp;&amp; flag;\n             z--) {  <span class=\"hljs-comment\">// Checking if all characters of substring are equal with all characters of string</span>\n            <span class=\"hljs-keyword\">if</span> (text[j] == prototype[z]) {\n                k++;\n                j--;\n            } <span class=\"hljs-keyword\">else</span> {\n                flag = <span class=\"hljs-literal\">false</span>;  <span class=\"hljs-comment\">// If two characters are not equal set flag to false and break from loop</span>\n            }\n        }\n\n        <span class=\"hljs-keyword\">if</span> (k ==\n            prototype.<span class=\"hljs-built_in\">size</span>()) {  <span class=\"hljs-comment\">// If all characters match then return true</span>\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">if</span> (shiftTable.<span class=\"hljs-built_in\">find</span>(text[i]) != shiftTable.<span class=\"hljs-built_in\">end</span>()) {\n                i += shiftTable[text[i]];  <span class=\"hljs-comment\">// If shift table contains the character then shift index as many steps as value</span>\n            } <span class=\"hljs-keyword\">else</span> {\n                i += prototype.<span class=\"hljs-built_in\">size</span>();  <span class=\"hljs-comment\">// If character does not exist in shift table then shift index as many steps as size of prototype string</span>\n            }\n        }\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n}\n} <span class=\"hljs-comment\">// namespace horspool</span>\n} <span class=\"hljs-comment\">// namespace strings</span>\n\n<span class=\"hljs-comment\">/**\n * @brief Function with test cases for Horspool&#x27;s algorithm\n * @returns void\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">test</span><span class=\"hljs-params\">()</span></span>{\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;Hello World&quot;</span>,<span class=\"hljs-string\">&quot;World&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;Hello World&quot;</span>,<span class=\"hljs-string\">&quot; World&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;Hello World&quot;</span>,<span class=\"hljs-string\">&quot;ello&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;Hello World&quot;</span>,<span class=\"hljs-string\">&quot;rld&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;Hello&quot;</span>,<span class=\"hljs-string\">&quot;Helo&quot;</span>) == <span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;c++_algorithms&quot;</span>,<span class=\"hljs-string\">&quot;c++_algorithms&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;c++_algorithms&quot;</span>,<span class=\"hljs-string\">&quot;c++_&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;Hello&quot;</span>,<span class=\"hljs-string\">&quot;Hello World&quot;</span>) == <span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;c++_algorithms&quot;</span>,<span class=\"hljs-string\">&quot;&quot;</span>) == <span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;c++&quot;</span>,<span class=\"hljs-string\">&quot;c&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;3458934793&quot;</span>,<span class=\"hljs-string\">&quot;4793&quot;</span>) == <span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-built_in\">assert</span>(strings::horspool::<span class=\"hljs-built_in\">horspool</span>(<span class=\"hljs-string\">&quot;3458934793&quot;</span>,<span class=\"hljs-string\">&quot;123&quot;</span>) == <span class=\"hljs-literal\">false</span>);\n}\n\n<span class=\"hljs-comment\">/**\n * @brief Main Function that calls test function\n * @returns 0 on exit\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span>{\n    <span class=\"hljs-built_in\">test</span>();\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n}\n"
    },
    "go": {
      "dir": "strings/single-string-matching/horspool/horspool.go",
      "url": "https://github.com/TheAlgorithms/go/tree/master/strings/single-string-matching/horspool/horspool.go",
      "code": "<span class=\"hljs-keyword\">package</span> horspool\n\n<span class=\"hljs-comment\">// User defined.</span>\n<span class=\"hljs-comment\">// Set to true to read input from two command line arguments</span>\n<span class=\"hljs-comment\">// Set to false to read input from two files &quot;pattern.txt&quot; and &quot;text.txt&quot;</span>\n<span class=\"hljs-comment\">// const commandLineInput bool = false</span>\n\n<span class=\"hljs-comment\">// Implementation of Boyer-Moore-Horspool algorithm (Suffix based approach).</span>\n<span class=\"hljs-comment\">// Requires either a two command line arguments separated by a single space,</span>\n<span class=\"hljs-comment\">// or two files in the same folder: &quot;pattern.txt&quot; containing the string to</span>\n<span class=\"hljs-comment\">// be searched for, &quot;text.txt&quot; containing the text to be searched in.</span>\n<span class=\"hljs-comment\">// func main() {</span>\n<span class=\"hljs-comment\">// \tif commandLineInput == true { // case of command line input</span>\n<span class=\"hljs-comment\">// \t\targs := os.Args</span>\n<span class=\"hljs-comment\">// \t\tif len(args) &lt;= 2 {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(&quot;Not enough arguments. Two string arguments separated by spaces are required!&quot;)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tpattern := args[1]</span>\n<span class=\"hljs-comment\">// \t\ts := args[2]</span>\n<span class=\"hljs-comment\">// \t\tfor i := 3; i &lt; len(args); i++ {</span>\n<span class=\"hljs-comment\">// \t\t\ts = s + &quot; &quot; + args[i]</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tif len(args[1]) &gt; len(s) {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(&quot;Pattern  is longer than text!&quot;)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;\\nRunning: Horspool algorithm.\\n\\n&quot;)</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;Search word (%d chars long): %q.\\n&quot;, len(args[1]), pattern)</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;Text        (%d chars long): %q.\\n\\n&quot;, len(s), s)</span>\n<span class=\"hljs-comment\">// \t\thorspool(s, pattern)</span>\n<span class=\"hljs-comment\">// \t} else if commandLineInput == false { // case of file line input</span>\n<span class=\"hljs-comment\">// \t\tpatFile, err := ioutil.ReadFile(&quot;pattern.txt&quot;)</span>\n<span class=\"hljs-comment\">// \t\tif err != nil {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(err)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\ttextFile, err := ioutil.ReadFile(&quot;text.txt&quot;)</span>\n<span class=\"hljs-comment\">// \t\tif err != nil {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(err)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tif len(patFile) &gt; len(textFile) {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(&quot;Pattern  is longer than text!&quot;)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;\\nRunning: Horspool algorithm.\\n\\n&quot;)</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;Search word (%d chars long): %q.\\n&quot;, len(patFile), patFile)</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;Text        (%d chars long): %q.\\n\\n&quot;, len(textFile), textFile)</span>\n<span class=\"hljs-comment\">// \t\thorspool(string(textFile), string(patFile))</span>\n<span class=\"hljs-comment\">// \t}</span>\n<span class=\"hljs-comment\">// }</span>\n\n<span class=\"hljs-comment\">// // Function horspool performing the Horspool algorithm.</span>\n<span class=\"hljs-comment\">// // Prints whether the word/pattern was found and on what position in the text or not.</span>\n<span class=\"hljs-comment\">// func horspool(t, p string) {</span>\n<span class=\"hljs-comment\">// \tm, n, c, pos := len(p), len(t), 0, 0</span>\n<span class=\"hljs-comment\">// \t//Perprocessing</span>\n<span class=\"hljs-comment\">// \td := preprocess(t, p)</span>\n<span class=\"hljs-comment\">// \t//Map output</span>\n<span class=\"hljs-comment\">// \tfmt.Printf(&quot;Precomputed shifts per symbol: &quot;)</span>\n<span class=\"hljs-comment\">// \tfor key, value := range d {</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;%c:%d; &quot;, key, value)</span>\n<span class=\"hljs-comment\">// \t}</span>\n<span class=\"hljs-comment\">// \tfmt.Println()</span>\n<span class=\"hljs-comment\">// \t//Searching</span>\n<span class=\"hljs-comment\">// \tfor pos &lt;= n-m {</span>\n<span class=\"hljs-comment\">// \t\tj := m</span>\n<span class=\"hljs-comment\">// \t\tif t[pos+j-1] != p[j-1] {</span>\n<span class=\"hljs-comment\">// \t\t\tfmt.Printf(&quot;\\n   comparing characters %c %c at positions %d %d&quot;, t[pos+j-1], p[j-1], pos+j-1, j-1)</span>\n<span class=\"hljs-comment\">// \t\t\tc++</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tfor j &gt; 0 &amp;&amp; t[pos+j-1] == p[j-1] {</span>\n<span class=\"hljs-comment\">// \t\t\tfmt.Printf(&quot;\\n   comparing characters %c %c at positions %d %d&quot;, t[pos+j-1], p[j-1], pos+j-1, j-1)</span>\n<span class=\"hljs-comment\">// \t\t\tc++</span>\n<span class=\"hljs-comment\">// \t\t\tfmt.Printf(&quot; - match&quot;)</span>\n<span class=\"hljs-comment\">// \t\t\tj--</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tif j == 0 {</span>\n<span class=\"hljs-comment\">// \t\t\tfmt.Printf(&quot;\\n\\nWord %q was found at position %d in %q. \\n%d comparisons were done.&quot;, p, pos, t, c)</span>\n<span class=\"hljs-comment\">// \t\t\treturn</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tpos = pos + d[t[pos+m]]</span>\n<span class=\"hljs-comment\">// \t}</span>\n<span class=\"hljs-comment\">// \tfmt.Printf(&quot;\\n\\nWord was not found.\\n%d comparisons were done.&quot;, c)</span>\n<span class=\"hljs-comment\">// \treturn</span>\n<span class=\"hljs-comment\">// }</span>\n\n<span class=\"hljs-comment\">// // Function that pre-computes map with Key: uint8 (char) Value: int.</span>\n<span class=\"hljs-comment\">// // Values determine safe shifting of search window.</span>\n<span class=\"hljs-comment\">// func preprocess(t, p string) (d map[uint8]int) {</span>\n<span class=\"hljs-comment\">// \td = make(map[uint8]int)</span>\n<span class=\"hljs-comment\">// \tfor i := 0; i &lt; len(t); i++ {</span>\n<span class=\"hljs-comment\">// \t\td[t[i]] = len(p)</span>\n<span class=\"hljs-comment\">// \t}</span>\n<span class=\"hljs-comment\">// \tfor i := 0; i &lt; len(p); i++ {</span>\n<span class=\"hljs-comment\">// \t\td[p[i]] = len(p) - i</span>\n<span class=\"hljs-comment\">// \t}</span>\n<span class=\"hljs-comment\">// \treturn d</span>\n<span class=\"hljs-comment\">// }</span>\n"
    }
  },
  "contributors": [
    {
      "name": "Taj",
      "email": "tjgurwara99@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "halafi",
      "email": "filiphalas74@gmail.com",
      "commits": 1
    },
    {
      "name": "ckontakis",
      "email": "36933662+ckontakis@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}
