{
  "slug": "hill-climbing",
  "name": "Hill Climbing",
  "categories": ["searches"],
  "body": {},
  "implementations": {
    "python": {
      "dir": "searches/hill_climbing.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/searches/hill_climbing.py",
      "code": "<span class=\"hljs-comment\"># https://en.wikipedia.org/wiki/Hill_climbing</span>\n<span class=\"hljs-keyword\">import</span> math\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SearchProblem</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    An interface to define search problems.\n    The interface will be illustrated using the example of mathematical function.\n    &quot;&quot;&quot;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, x: <span class=\"hljs-built_in\">int</span>, y: <span class=\"hljs-built_in\">int</span>, step_size: <span class=\"hljs-built_in\">int</span>, function_to_optimize</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        The constructor of the search problem.\n\n        x: the x coordinate of the current search state.\n        y: the y coordinate of the current search state.\n        step_size: size of the step to take when looking for neighbors.\n        function_to_optimize: a function to optimize having the signature f(x, y).\n        &quot;&quot;&quot;</span>\n        self.x = x\n        self.y = y\n        self.step_size = step_size\n        self.function = function_to_optimize\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">score</span>(<span class=\"hljs-params\">self</span>) -&gt; <span class=\"hljs-built_in\">int</span>:\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Returns the output of the function called with current x and y coordinates.\n        &gt;&gt;&gt; def test_function(x, y):\n        ...     return x + y\n        &gt;&gt;&gt; SearchProblem(0, 0, 1, test_function).score()  # 0 + 0 = 0\n        0\n        &gt;&gt;&gt; SearchProblem(5, 7, 1, test_function).score()  # 5 + 7 = 12\n        12\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">return</span> self.function(self.x, self.y)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_neighbors</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Returns a list of coordinates of neighbors adjacent to the current coordinates.\n\n        Neighbors:\n        | 0 | 1 | 2 |\n        | 3 | _ | 4 |\n        | 5 | 6 | 7 |\n        &quot;&quot;&quot;</span>\n        step_size = self.step_size\n        <span class=\"hljs-keyword\">return</span> [\n            SearchProblem(x, y, step_size, self.function)\n            <span class=\"hljs-keyword\">for</span> x, y <span class=\"hljs-keyword\">in</span> (\n                (self.x - step_size, self.y - step_size),\n                (self.x - step_size, self.y),\n                (self.x - step_size, self.y + step_size),\n                (self.x, self.y - step_size),\n                (self.x, self.y + step_size),\n                (self.x + step_size, self.y - step_size),\n                (self.x + step_size, self.y),\n                (self.x + step_size, self.y + step_size),\n            )\n        ]\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__hash__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        hash the string representation of the current search state.\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">hash</span>(<span class=\"hljs-built_in\">str</span>(self))\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__eq__</span>(<span class=\"hljs-params\">self, obj</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Check if the 2 objects are equal.\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">isinstance</span>(obj, SearchProblem):\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">hash</span>(<span class=\"hljs-built_in\">str</span>(self)) == <span class=\"hljs-built_in\">hash</span>(<span class=\"hljs-built_in\">str</span>(obj))\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__str__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        string representation of the current search state.\n        &gt;&gt;&gt; str(SearchProblem(0, 0, 1, None))\n        &#x27;x: 0 y: 0&#x27;\n        &gt;&gt;&gt; str(SearchProblem(2, 5, 1, None))\n        &#x27;x: 2 y: 5&#x27;\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">f&quot;x: <span class=\"hljs-subst\">{self.x}</span> y: <span class=\"hljs-subst\">{self.y}</span>&quot;</span>\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">hill_climbing</span>(<span class=\"hljs-params\">\n    search_prob,\n    find_max: <span class=\"hljs-built_in\">bool</span> = <span class=\"hljs-literal\">True</span>,\n    max_x: <span class=\"hljs-built_in\">float</span> = math.inf,\n    min_x: <span class=\"hljs-built_in\">float</span> = -math.inf,\n    max_y: <span class=\"hljs-built_in\">float</span> = math.inf,\n    min_y: <span class=\"hljs-built_in\">float</span> = -math.inf,\n    visualization: <span class=\"hljs-built_in\">bool</span> = <span class=\"hljs-literal\">False</span>,\n    max_iter: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">10000</span>,\n</span>) -&gt; SearchProblem:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Implementation of the hill climbling algorithm.\n    We start with a given state, find all its neighbors,\n    move towards the neighbor which provides the maximum (or minimum) change.\n    We keep doing this until we are at a state where we do not have any\n    neighbors which can improve the solution.\n        Args:\n            search_prob: The search state at the start.\n            find_max: If True, the algorithm should find the maximum else the minimum.\n            max_x, min_x, max_y, min_y: the maximum and minimum bounds of x and y.\n            visualization: If True, a matplotlib graph is displayed.\n            max_iter: number of times to run the iteration.\n        Returns a search state having the maximum (or minimum) score.\n    &quot;&quot;&quot;</span>\n    current_state = search_prob\n    scores = []  <span class=\"hljs-comment\"># list to store the current score at each iteration</span>\n    iterations = <span class=\"hljs-number\">0</span>\n    solution_found = <span class=\"hljs-literal\">False</span>\n    visited = <span class=\"hljs-built_in\">set</span>()\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-keyword\">not</span> solution_found <span class=\"hljs-keyword\">and</span> iterations &lt; max_iter:\n        visited.add(current_state)\n        iterations += <span class=\"hljs-number\">1</span>\n        current_score = current_state.score()\n        scores.append(current_score)\n        neighbors = current_state.get_neighbors()\n        max_change = -math.inf\n        min_change = math.inf\n        next_state = <span class=\"hljs-literal\">None</span>  <span class=\"hljs-comment\"># to hold the next best neighbor</span>\n        <span class=\"hljs-keyword\">for</span> neighbor <span class=\"hljs-keyword\">in</span> neighbors:\n            <span class=\"hljs-keyword\">if</span> neighbor <span class=\"hljs-keyword\">in</span> visited:\n                <span class=\"hljs-keyword\">continue</span>  <span class=\"hljs-comment\"># do not want to visit the same state again</span>\n            <span class=\"hljs-keyword\">if</span> (\n                neighbor.x &gt; max_x\n                <span class=\"hljs-keyword\">or</span> neighbor.x &lt; min_x\n                <span class=\"hljs-keyword\">or</span> neighbor.y &gt; max_y\n                <span class=\"hljs-keyword\">or</span> neighbor.y &lt; min_y\n            ):\n                <span class=\"hljs-keyword\">continue</span>  <span class=\"hljs-comment\"># neighbor outside our bounds</span>\n            change = neighbor.score() - current_score\n            <span class=\"hljs-keyword\">if</span> find_max:  <span class=\"hljs-comment\"># finding max</span>\n                <span class=\"hljs-comment\"># going to direction with greatest ascent</span>\n                <span class=\"hljs-keyword\">if</span> change &gt; max_change <span class=\"hljs-keyword\">and</span> change &gt; <span class=\"hljs-number\">0</span>:\n                    max_change = change\n                    next_state = neighbor\n            <span class=\"hljs-keyword\">else</span>:  <span class=\"hljs-comment\"># finding min</span>\n                <span class=\"hljs-comment\"># to direction with greatest descent</span>\n                <span class=\"hljs-keyword\">if</span> change &lt; min_change <span class=\"hljs-keyword\">and</span> change &lt; <span class=\"hljs-number\">0</span>:\n                    min_change = change\n                    next_state = neighbor\n        <span class=\"hljs-keyword\">if</span> next_state <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-literal\">None</span>:\n            <span class=\"hljs-comment\"># we found at least one neighbor which improved the current state</span>\n            current_state = next_state\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-comment\"># since we have no neighbor that improves the solution we stop the search</span>\n            solution_found = <span class=\"hljs-literal\">True</span>\n\n    <span class=\"hljs-keyword\">if</span> visualization:\n        <span class=\"hljs-keyword\">from</span> matplotlib <span class=\"hljs-keyword\">import</span> pyplot <span class=\"hljs-keyword\">as</span> plt\n\n        plt.plot(<span class=\"hljs-built_in\">range</span>(iterations), scores)\n        plt.xlabel(<span class=\"hljs-string\">&quot;Iterations&quot;</span>)\n        plt.ylabel(<span class=\"hljs-string\">&quot;Function values&quot;</span>)\n        plt.show()\n\n    <span class=\"hljs-keyword\">return</span> current_state\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    <span class=\"hljs-keyword\">import</span> doctest\n\n    doctest.testmod()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_f1</span>(<span class=\"hljs-params\">x, y</span>):\n        <span class=\"hljs-keyword\">return</span> (x ** <span class=\"hljs-number\">2</span>) + (y ** <span class=\"hljs-number\">2</span>)\n\n    <span class=\"hljs-comment\"># starting the problem with initial coordinates (3, 4)</span>\n    prob = SearchProblem(x=<span class=\"hljs-number\">3</span>, y=<span class=\"hljs-number\">4</span>, step_size=<span class=\"hljs-number\">1</span>, function_to_optimize=test_f1)\n    local_min = hill_climbing(prob, find_max=<span class=\"hljs-literal\">False</span>)\n    <span class=\"hljs-built_in\">print</span>(\n        <span class=\"hljs-string\">&quot;The minimum score for f(x, y) = x^2 + y^2 found via hill climbing: &quot;</span>\n        <span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{local_min.score()}</span>&quot;</span>\n    )\n\n    <span class=\"hljs-comment\"># starting the problem with initial coordinates (12, 47)</span>\n    prob = SearchProblem(x=<span class=\"hljs-number\">12</span>, y=<span class=\"hljs-number\">47</span>, step_size=<span class=\"hljs-number\">1</span>, function_to_optimize=test_f1)\n    local_min = hill_climbing(\n        prob, find_max=<span class=\"hljs-literal\">False</span>, max_x=<span class=\"hljs-number\">100</span>, min_x=<span class=\"hljs-number\">5</span>, max_y=<span class=\"hljs-number\">50</span>, min_y=-<span class=\"hljs-number\">5</span>, visualization=<span class=\"hljs-literal\">True</span>\n    )\n    <span class=\"hljs-built_in\">print</span>(\n        <span class=\"hljs-string\">&quot;The minimum score for f(x, y) = x^2 + y^2 with the domain 100 &gt; x &gt; 5 &quot;</span>\n        <span class=\"hljs-string\">f&quot;and 50 &gt; y &gt; - 5 found via hill climbing: <span class=\"hljs-subst\">{local_min.score()}</span>&quot;</span>\n    )\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_f2</span>(<span class=\"hljs-params\">x, y</span>):\n        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-number\">3</span> * x ** <span class=\"hljs-number\">2</span>) - (<span class=\"hljs-number\">6</span> * y)\n\n    prob = SearchProblem(x=<span class=\"hljs-number\">3</span>, y=<span class=\"hljs-number\">4</span>, step_size=<span class=\"hljs-number\">1</span>, function_to_optimize=test_f1)\n    local_min = hill_climbing(prob, find_max=<span class=\"hljs-literal\">True</span>)\n    <span class=\"hljs-built_in\">print</span>(\n        <span class=\"hljs-string\">&quot;The maximum score for f(x, y) = x^2 + y^2 found via hill climbing: &quot;</span>\n        <span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{local_min.score()}</span>&quot;</span>\n    )\n"
    }
  },
  "contributors": [
    {
      "name": "onlinejudge95",
      "email": "44158581+onlinejudge95@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Faraz Ahmed Khan",
      "email": "31242842+fk03983@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Christian Clauss",
      "email": "cclauss@me.com",
      "commits": 4
    }
  ],
  "explanationUrl": {}
}
