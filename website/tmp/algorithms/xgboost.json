{
  "slug": "xgboost",
  "name": "Xgboost",
  "categories": ["classificationalgorithms"],
  "body": {},
  "implementations": {
    "r": {
      "dir": "Classification-Algorithms/xgboost.R",
      "url": "https://github.com/TheAlgorithms/r/tree/master/Classification-Algorithms/xgboost.R",
      "code": "library<span class=\"hljs-punctuation\">(</span>tidyverse<span class=\"hljs-punctuation\">)</span>\nlibrary<span class=\"hljs-punctuation\">(</span>xgboost<span class=\"hljs-punctuation\">)</span>\n\nind<span class=\"hljs-operator\">&lt;-</span>sample<span class=\"hljs-punctuation\">(</span><span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">,</span>nrow<span class=\"hljs-punctuation\">(</span>diamonds<span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>replace <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">T</span><span class=\"hljs-punctuation\">,</span>prob <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">c</span><span class=\"hljs-punctuation\">(</span><span class=\"hljs-number\">0.7</span><span class=\"hljs-punctuation\">,</span><span class=\"hljs-number\">0.3</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">)</span>\ntrain.set<span class=\"hljs-operator\">&lt;-</span>diamonds<span class=\"hljs-punctuation\">[</span>ind<span class=\"hljs-operator\">==</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span><span class=\"hljs-punctuation\">]</span>\ntest.set<span class=\"hljs-operator\">&lt;-</span>diamonds<span class=\"hljs-punctuation\">[</span>ind<span class=\"hljs-operator\">==</span><span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">,</span><span class=\"hljs-punctuation\">]</span>\n\nxgb.train<span class=\"hljs-operator\">&lt;-</span>bind_cols<span class=\"hljs-punctuation\">(</span>select_if<span class=\"hljs-punctuation\">(</span>train.set<span class=\"hljs-punctuation\">,</span><span class=\"hljs-built_in\">is.numeric</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>model.matrix<span class=\"hljs-punctuation\">(</span><span class=\"hljs-operator\">~</span>cut<span class=\"hljs-operator\">-</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>train.set<span class=\"hljs-punctuation\">)</span> <span class=\"hljs-operator\">%&gt;%</span> as.tibble<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>model.matrix<span class=\"hljs-punctuation\">(</span><span class=\"hljs-operator\">~</span>color<span class=\"hljs-operator\">-</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>train.set<span class=\"hljs-punctuation\">)</span> <span class=\"hljs-operator\">%&gt;%</span> as.tibble<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>model.matrix<span class=\"hljs-punctuation\">(</span><span class=\"hljs-operator\">~</span>clarity<span class=\"hljs-operator\">-</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>train.set<span class=\"hljs-punctuation\">)</span> <span class=\"hljs-operator\">%&gt;%</span> as.tibble<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">)</span>\nxgboost.train<span class=\"hljs-operator\">&lt;-</span>xgb.DMatrix<span class=\"hljs-punctuation\">(</span>data <span class=\"hljs-operator\">=</span> as.matrix<span class=\"hljs-punctuation\">(</span>select<span class=\"hljs-punctuation\">(</span>xgb.train<span class=\"hljs-punctuation\">,</span><span class=\"hljs-operator\">-</span>price<span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>label<span class=\"hljs-operator\">=</span>xgb.train<span class=\"hljs-operator\">$</span>price<span class=\"hljs-punctuation\">)</span>\nxgb.test<span class=\"hljs-operator\">&lt;-</span>bind_cols<span class=\"hljs-punctuation\">(</span>select_if<span class=\"hljs-punctuation\">(</span>test.set<span class=\"hljs-punctuation\">,</span><span class=\"hljs-built_in\">is.numeric</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>model.matrix<span class=\"hljs-punctuation\">(</span><span class=\"hljs-operator\">~</span>cut<span class=\"hljs-operator\">-</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>test.set<span class=\"hljs-punctuation\">)</span> <span class=\"hljs-operator\">%&gt;%</span> as.tibble<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>model.matrix<span class=\"hljs-punctuation\">(</span><span class=\"hljs-operator\">~</span>color<span class=\"hljs-operator\">-</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>test.set<span class=\"hljs-punctuation\">)</span> <span class=\"hljs-operator\">%&gt;%</span> as.tibble<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>model.matrix<span class=\"hljs-punctuation\">(</span><span class=\"hljs-operator\">~</span>clarity<span class=\"hljs-operator\">-</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>test.set<span class=\"hljs-punctuation\">)</span> <span class=\"hljs-operator\">%&gt;%</span> as.tibble<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">)</span>\nxgboost.test<span class=\"hljs-operator\">&lt;-</span>xgb.DMatrix<span class=\"hljs-punctuation\">(</span>data <span class=\"hljs-operator\">=</span> select<span class=\"hljs-punctuation\">(</span>xgb.test<span class=\"hljs-punctuation\">,</span><span class=\"hljs-operator\">-</span>price<span class=\"hljs-punctuation\">)</span> <span class=\"hljs-operator\">%&gt;%</span> as.matrix<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>label<span class=\"hljs-operator\">=</span>xgb.test<span class=\"hljs-operator\">$</span>price<span class=\"hljs-punctuation\">)</span>\n\nparam<span class=\"hljs-operator\">&lt;-</span><span class=\"hljs-built_in\">list</span><span class=\"hljs-punctuation\">(</span>eval_metric<span class=\"hljs-operator\">=</span><span class=\"hljs-string\">&#x27;rmse&#x27;</span><span class=\"hljs-punctuation\">,</span><span class=\"hljs-built_in\">gamma</span><span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>max_depth<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">6</span><span class=\"hljs-punctuation\">,</span>nthread <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">3</span><span class=\"hljs-punctuation\">)</span>\nxg.model<span class=\"hljs-operator\">&lt;-</span>xgb.train<span class=\"hljs-punctuation\">(</span>data <span class=\"hljs-operator\">=</span> xgboost.train<span class=\"hljs-punctuation\">,</span>params <span class=\"hljs-operator\">=</span> param<span class=\"hljs-punctuation\">,</span>watchlist <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">list</span><span class=\"hljs-punctuation\">(</span>test<span class=\"hljs-operator\">=</span>xgboost.test<span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">,</span>nrounds <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">500</span><span class=\"hljs-punctuation\">,</span>early_stopping_rounds <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">60</span><span class=\"hljs-punctuation\">,</span>\n                      print_every_n <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">30</span><span class=\"hljs-punctuation\">)</span>\n                      \nxg.predict<span class=\"hljs-operator\">&lt;-</span>predict<span class=\"hljs-punctuation\">(</span>xg.model<span class=\"hljs-punctuation\">,</span>xgboost.test<span class=\"hljs-punctuation\">)</span>\nmse.xgb<span class=\"hljs-operator\">&lt;-</span><span class=\"hljs-built_in\">sqrt</span><span class=\"hljs-punctuation\">(</span>mean<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">(</span>test.set<span class=\"hljs-operator\">$</span>price<span class=\"hljs-operator\">-</span>xg.predict<span class=\"hljs-punctuation\">)</span><span class=\"hljs-operator\">^</span><span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">)</span>\nplot<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">(</span>test.set<span class=\"hljs-operator\">$</span>price<span class=\"hljs-operator\">-</span>xg.predict<span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">)</span>\n"
    }
  },
  "contributors": [
    {
      "name": "Ron Lee",
      "email": "857748998@qq.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}
