{
  "slug": "kmp",
  "name": "KMP",
  "categories": ["others"],
  "body": {},
  "implementations": {
    "java": {
      "dir": "Others/KMP.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/Others/KMP.java",
      "code": "<span class=\"hljs-keyword\">package</span> Others;\n\n<span class=\"hljs-comment\">/** Implementation of Knuth–Morris–Pratt algorithm Usage: see the main function for an example */</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">KMP</span> {\n  <span class=\"hljs-comment\">// a working example</span>\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">haystack</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;AAAAABAAABA&quot;</span>; <span class=\"hljs-comment\">// This is the full string</span>\n    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">needle</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;AAAA&quot;</span>; <span class=\"hljs-comment\">// This is the substring that we want to find</span>\n    KMPmatcher(haystack, needle);\n  }\n\n  <span class=\"hljs-comment\">// find the starting index in string haystack[] that matches the search word P[]</span>\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">KMPmatcher</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String haystack, <span class=\"hljs-keyword\">final</span> String needle)</span> {\n    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">m</span> <span class=\"hljs-operator\">=</span> haystack.length();\n    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">n</span> <span class=\"hljs-operator\">=</span> needle.length();\n    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span>[] pi = computePrefixFunction(needle);\n    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">q</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; m; i++) {\n      <span class=\"hljs-keyword\">while</span> (q &gt; <span class=\"hljs-number\">0</span> &amp;&amp; haystack.charAt(i) != needle.charAt(q)) {\n        q = pi[q - <span class=\"hljs-number\">1</span>];\n      }\n\n      <span class=\"hljs-keyword\">if</span> (haystack.charAt(i) == needle.charAt(q)) {\n        q++;\n      }\n\n      <span class=\"hljs-keyword\">if</span> (q == n) {\n        System.out.println(<span class=\"hljs-string\">&quot;Pattern starts: &quot;</span> + (i + <span class=\"hljs-number\">1</span> - n));\n        q = pi[q - <span class=\"hljs-number\">1</span>];\n      }\n    }\n  }\n\n  <span class=\"hljs-comment\">// return the prefix function</span>\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">int</span>[] computePrefixFunction(<span class=\"hljs-keyword\">final</span> String P) {\n    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">n</span> <span class=\"hljs-operator\">=</span> P.length();\n    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span>[] pi = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">int</span>[n];\n    pi[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">q</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>; i &lt; n; i++) {\n      <span class=\"hljs-keyword\">while</span> (q &gt; <span class=\"hljs-number\">0</span> &amp;&amp; P.charAt(q) != P.charAt(i)) {\n        q = pi[q - <span class=\"hljs-number\">1</span>];\n      }\n\n      <span class=\"hljs-keyword\">if</span> (P.charAt(q) == P.charAt(i)) {\n        q++;\n      }\n\n      pi[i] = q;\n    }\n    <span class=\"hljs-keyword\">return</span> pi;\n  }\n}\n"
    },
    "go": {
      "dir": "strings/single-string-matching/kmp/kmp.go",
      "url": "https://github.com/TheAlgorithms/go/tree/master/strings/single-string-matching/kmp/kmp.go",
      "code": "<span class=\"hljs-keyword\">package</span> kmp\n\n<span class=\"hljs-keyword\">import</span> (\n\t<span class=\"hljs-string\">&quot;fmt&quot;</span>\n)\n\n<span class=\"hljs-comment\">// User defined.</span>\n<span class=\"hljs-comment\">// Set to true to read input from two command line arguments</span>\n<span class=\"hljs-comment\">// Set to false to read input from two files &quot;pattern.txt&quot; and &quot;text.txt&quot;</span>\n\n<span class=\"hljs-comment\">// const isTakingInputFromCommandLine bool = true</span>\n\n<span class=\"hljs-keyword\">const</span> notFoundPosition <span class=\"hljs-keyword\">int</span> = <span class=\"hljs-number\">-1</span>\n\n<span class=\"hljs-keyword\">type</span> Result <span class=\"hljs-keyword\">struct</span> {\n\tresultPosition     <span class=\"hljs-keyword\">int</span>\n\tnumberOfComparison <span class=\"hljs-keyword\">int</span>\n}\n\n<span class=\"hljs-comment\">// Implementation of Knuth-Morris-Pratt algorithm (Prefix based approach).</span>\n<span class=\"hljs-comment\">// Requires either a two command line arguments separated by a single space,</span>\n<span class=\"hljs-comment\">// or two files in the same folder: &quot;pattern.txt&quot; containing the string to</span>\n<span class=\"hljs-comment\">// be searched for, &quot;text.txt&quot; containing the text to be searched in.</span>\n<span class=\"hljs-comment\">// func main() {</span>\n<span class=\"hljs-comment\">// \tvar text string</span>\n<span class=\"hljs-comment\">// \tvar word string</span>\n\n<span class=\"hljs-comment\">// \tif isTakingInputFromCommandLine { // case of command line input</span>\n<span class=\"hljs-comment\">// \t\targs := os.Args</span>\n<span class=\"hljs-comment\">// \t\tif len(args) &lt;= 2 {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(&quot;Not enough arguments. Two string arguments separated by spaces are required!&quot;)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\tword = args[1]</span>\n<span class=\"hljs-comment\">// \t\ttext = args[2]</span>\n<span class=\"hljs-comment\">// \t\tfor i := 3; i &lt; len(args); i++ {</span>\n<span class=\"hljs-comment\">// \t\t\ttext = text + &quot; &quot; + args[i]</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t} else { // case of file input</span>\n<span class=\"hljs-comment\">// \t\tpatFile, err := ioutil.ReadFile(&quot;../pattern.txt&quot;)</span>\n<span class=\"hljs-comment\">// \t\tif err != nil {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(err)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\ttextFile, err := ioutil.ReadFile(&quot;../text.txt&quot;)</span>\n<span class=\"hljs-comment\">// \t\tif err != nil {</span>\n<span class=\"hljs-comment\">// \t\t\tlog.Fatal(err)</span>\n<span class=\"hljs-comment\">// \t\t}</span>\n<span class=\"hljs-comment\">// \t\ttext = string(textFile)</span>\n<span class=\"hljs-comment\">// \t\tword = string(patFile)</span>\n<span class=\"hljs-comment\">// \t}</span>\n\n<span class=\"hljs-comment\">// \tif len(word) &gt; len(text) {</span>\n<span class=\"hljs-comment\">// \t\tlog.Fatal(&quot;Pattern is longer than text!&quot;)</span>\n<span class=\"hljs-comment\">// \t}</span>\n<span class=\"hljs-comment\">// \tfmt.Printf(&quot;\\nRunning: Knuth-Morris-Pratt algorithm.\\n\\n&quot;)</span>\n<span class=\"hljs-comment\">// \tfmt.Printf(&quot;Search word (%d chars long): %q.\\n&quot;, len(word), word)</span>\n<span class=\"hljs-comment\">// \tfmt.Printf(&quot;Text        (%d chars long): %q.\\n\\n&quot;, len(text), text)</span>\n\n<span class=\"hljs-comment\">// \tr := kmp(text, word)</span>\n<span class=\"hljs-comment\">// \tif r.resultPosition == notFoundPosition {</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;\\n\\nWord was not found.\\n%d comparisons were done.&quot;, r.numberOfComparison)</span>\n<span class=\"hljs-comment\">// \t} else {</span>\n<span class=\"hljs-comment\">// \t\tfmt.Printf(&quot;\\n\\nWord %q was found at position %d in %q. \\n%d comparisons were done.&quot;, word,</span>\n<span class=\"hljs-comment\">// \t\t\tr.resultPosition, text, r.numberOfComparison)</span>\n<span class=\"hljs-comment\">// \t}</span>\n<span class=\"hljs-comment\">// }</span>\n\n<span class=\"hljs-comment\">// Kmp Function kmp performing the Knuth-Morris-Pratt algorithm.</span>\n<span class=\"hljs-comment\">// Prints whether the word/pattern was found and on what position in the text or not.</span>\n<span class=\"hljs-comment\">// m - current match in text, i - current character in w, c - amount of comparisons.</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">Kmp</span><span class=\"hljs-params\">(text <span class=\"hljs-keyword\">string</span>, word <span class=\"hljs-keyword\">string</span>)</span> <span class=\"hljs-title\">Result</span></span> {\n\tm, i, c := <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>\n\tt := kmpTable(word)\n\t<span class=\"hljs-keyword\">for</span> m+i &lt; <span class=\"hljs-built_in\">len</span>(text) {\n\t\tfmt.Printf(<span class=\"hljs-string\">&quot;\\n   comparing characters %c %c at positions %d %d&quot;</span>, text[m+i], word[i], m+i, i)\n\t\tc++\n\t\t<span class=\"hljs-keyword\">if</span> word[i] == text[m+i] {\n\t\t\tfmt.Printf(<span class=\"hljs-string\">&quot; - match&quot;</span>)\n\t\t\t<span class=\"hljs-keyword\">if</span> i == <span class=\"hljs-built_in\">len</span>(word)<span class=\"hljs-number\">-1</span> {\n\t\t\t\t<span class=\"hljs-keyword\">return</span> Result{\n\t\t\t\t\tm, c,\n\t\t\t\t}\n\t\t\t}\n\t\t\ti++\n\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\tm = m + i - t[i]\n\t\t\t<span class=\"hljs-keyword\">if</span> t[i] &gt; <span class=\"hljs-number\">-1</span> {\n\t\t\t\ti = t[i]\n\t\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t\ti = <span class=\"hljs-number\">0</span>\n\t\t\t}\n\t\t}\n\t}\n\t<span class=\"hljs-keyword\">return</span> Result{notFoundPosition,\n\t\tc,\n\t}\n}\n\n<span class=\"hljs-comment\">// Table building alghoritm.</span>\n<span class=\"hljs-comment\">// Takes word to be analyzed and table to be filled.</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">kmpTable</span><span class=\"hljs-params\">(word <span class=\"hljs-keyword\">string</span>)</span> <span class=\"hljs-params\">(t []<span class=\"hljs-keyword\">int</span>)</span></span> {\n\tt = <span class=\"hljs-built_in\">make</span>([]<span class=\"hljs-keyword\">int</span>, <span class=\"hljs-built_in\">len</span>(word))\n\tpos, cnd := <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>\n\tt[<span class=\"hljs-number\">0</span>], t[<span class=\"hljs-number\">1</span>] = <span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">0</span>\n\t<span class=\"hljs-keyword\">for</span> pos &lt; <span class=\"hljs-built_in\">len</span>(word) {\n\t\t<span class=\"hljs-keyword\">if</span> word[pos<span class=\"hljs-number\">-1</span>] == word[cnd] {\n\t\t\tcnd++\n\t\t\tt[pos] = cnd\n\t\t\tpos++\n\t\t} <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> cnd &gt; <span class=\"hljs-number\">0</span> {\n\t\t\tcnd = t[cnd]\n\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\tt[pos] = <span class=\"hljs-number\">0</span>\n\t\t\tpos++\n\t\t}\n\t}\n\t<span class=\"hljs-keyword\">return</span> t\n}\n"
    }
  },
  "contributors": [
    {
      "name": "Taj",
      "email": "tjgurwara99@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "halafi",
      "email": "filiphalas74@gmail.com",
      "commits": 1
    },
    {
      "name": "_0",
      "email": "_0@m-PC",
      "commits": 1
    },
    {
      "name": "Libin Yang",
      "email": "szuyanglb@outlook.com",
      "commits": 2
    }
  ],
  "explanationUrl": {}
}
