{
  "slug": "stockprice",
  "name": "StockPrice",
  "categories": ["webprogramming"],
  "body": {},
  "implementations": {
    "javascript": {
      "dir": "Web-Programming/StockPrice.js",
      "url": "https://github.com/TheAlgorithms/javascript/tree/master/Web-Programming/StockPrice.js",
      "code": "<span class=\"hljs-keyword\">const</span> fetch = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;node-fetch&#x27;</span>)\n<span class=\"hljs-keyword\">const</span> jsdom = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;jsdom&#x27;</span>)\n\n<span class=\"hljs-comment\">// function to get the stock price from the given symbol</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getStockPrice</span> (stockSymbol) {\n  <span class=\"hljs-comment\">// parsing the html page body</span>\n  <span class=\"hljs-keyword\">const</span> url = <span class=\"hljs-string\">`https://in.finance.yahoo.com/lookup?s=$<span class=\"hljs-subst\">${stockSymbol}</span>`</span>\n  <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(url)\n  <span class=\"hljs-keyword\">const</span> pageBody = <span class=\"hljs-keyword\">await</span> response.<span class=\"hljs-title function_\">text</span>()\n  <span class=\"hljs-keyword\">const</span> dom = <span class=\"hljs-keyword\">new</span> jsdom.<span class=\"hljs-title function_\">JSDOM</span>(pageBody, <span class=\"hljs-string\">&#x27;text/html&#x27;</span>)\n  <span class=\"hljs-comment\">// returning the price as a number</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">parseFloat</span>(dom.<span class=\"hljs-property\">window</span>.<span class=\"hljs-property\">document</span>.<span class=\"hljs-title function_\">querySelectorAll</span>(<span class=\"hljs-string\">&#x27;td&#x27;</span>)[<span class=\"hljs-number\">2</span>].<span class=\"hljs-property\">textContent</span>.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/,/g</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>))\n}\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">main</span> () {\n  <span class=\"hljs-comment\">// Using async await to ensure synchronous behaviour</span>\n  <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">getStockPrice</span>(<span class=\"hljs-string\">&#x27;GOOGL&#x27;</span>)\n    .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =&gt;</span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`GOOGL stock price: $ <span class=\"hljs-subst\">${response}</span>`</span>))\n\n  <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">getStockPrice</span>(<span class=\"hljs-string\">&#x27;AAPL&#x27;</span>)\n    .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =&gt;</span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`AAPL stock price: $ <span class=\"hljs-subst\">${response}</span>`</span>))\n\n  <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">getStockPrice</span>(<span class=\"hljs-string\">&#x27;MSFT&#x27;</span>)\n    .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =&gt;</span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`MSFT stock price: $ <span class=\"hljs-subst\">${response}</span>`</span>))\n\n  <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">getStockPrice</span>(<span class=\"hljs-string\">&#x27;AMZN&#x27;</span>)\n    .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =&gt;</span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`AMZN stock price: $ <span class=\"hljs-subst\">${response}</span>`</span>))\n}\n\n<span class=\"hljs-title function_\">main</span>()\n"
    }
  },
  "contributors": [
    {
      "name": "Tapajyoti Bose",
      "email": "44058757+ruppysuppy@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}
